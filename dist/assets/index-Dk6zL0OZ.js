(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function bv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Vd={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function CA(){if(U_)return _l;U_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return _l.Fragment=t,_l.jsx=n,_l.jsxs=n,_l}var j_;function xA(){return j_||(j_=1,Vd.exports=CA()),Vd.exports}var R=xA(),Md={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function NA(){if(z_)return wt;z_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,tt={};function W(N,Z,st){this.props=N,this.context=Z,this.refs=tt,this.updater=st||z}W.prototype.isReactComponent={},W.prototype.setState=function(N,Z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Z,"setState")},W.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function at(){}at.prototype=W.prototype;function it(N,Z,st){this.props=N,this.context=Z,this.refs=tt,this.updater=st||z}var dt=it.prototype=new at;dt.constructor=it,X(dt,W.prototype),dt.isPureReactComponent=!0;var Mt=Array.isArray,Tt={H:null,A:null,T:null,S:null,V:null},Rt=Object.prototype.hasOwnProperty;function M(N,Z,st,J,ft,bt){return st=bt.ref,{$$typeof:s,type:N,key:Z,ref:st!==void 0?st:null,props:bt}}function w(N,Z){return M(N.type,Z,void 0,void 0,void 0,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function O(N){var Z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(st){return Z[st]})}var V=/\/+/g;function P(N,Z){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):Z.toString(36)}function C(){}function ve(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(Z){N.status==="pending"&&(N.status="fulfilled",N.value=Z)},function(Z){N.status==="pending"&&(N.status="rejected",N.reason=Z)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ee(N,Z,st,J,ft){var bt=typeof N;(bt==="undefined"||bt==="boolean")&&(N=null);var gt=!1;if(N===null)gt=!0;else switch(bt){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(N.$$typeof){case s:case t:gt=!0;break;case T:return gt=N._init,ee(gt(N._payload),Z,st,J,ft)}}if(gt)return ft=ft(N),gt=J===""?"."+P(N,0):J,Mt(ft)?(st="",gt!=null&&(st=gt.replace(V,"$&/")+"/"),ee(ft,Z,st,"",function(ut){return ut})):ft!=null&&(x(ft)&&(ft=w(ft,st+(ft.key==null||N&&N.key===ft.key?"":(""+ft.key).replace(V,"$&/")+"/")+gt)),Z.push(ft)),1;gt=0;var Ee=J===""?".":J+":";if(Mt(N))for(var Kt=0;Kt<N.length;Kt++)J=N[Kt],bt=Ee+P(J,Kt),gt+=ee(J,Z,st,bt,ft);else if(Kt=S(N),typeof Kt=="function")for(N=Kt.call(N),Kt=0;!(J=N.next()).done;)J=J.value,bt=Ee+P(J,Kt++),gt+=ee(J,Z,st,bt,ft);else if(bt==="object"){if(typeof N.then=="function")return ee(ve(N),Z,st,J,ft);throw Z=String(N),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return gt}function G(N,Z,st){if(N==null)return N;var J=[],ft=0;return ee(N,J,"","",function(bt){return Z.call(st,bt,ft++)}),J}function nt(N){if(N._status===-1){var Z=N._result;Z=Z(),Z.then(function(st){(N._status===0||N._status===-1)&&(N._status=1,N._result=st)},function(st){(N._status===0||N._status===-1)&&(N._status=2,N._result=st)}),N._status===-1&&(N._status=0,N._result=Z)}if(N._status===1)return N._result.default;throw N._result}var ct=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function jt(){}return wt.Children={map:G,forEach:function(N,Z,st){G(N,function(){Z.apply(this,arguments)},st)},count:function(N){var Z=0;return G(N,function(){Z++}),Z},toArray:function(N){return G(N,function(Z){return Z})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},wt.Component=W,wt.Fragment=n,wt.Profiler=l,wt.PureComponent=it,wt.StrictMode=r,wt.Suspense=p,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Tt,wt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Tt.H.useMemoCache(N)}},wt.cache=function(N){return function(){return N.apply(null,arguments)}},wt.cloneElement=function(N,Z,st){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var J=X({},N.props),ft=N.key,bt=void 0;if(Z!=null)for(gt in Z.ref!==void 0&&(bt=void 0),Z.key!==void 0&&(ft=""+Z.key),Z)!Rt.call(Z,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&Z.ref===void 0||(J[gt]=Z[gt]);var gt=arguments.length-2;if(gt===1)J.children=st;else if(1<gt){for(var Ee=Array(gt),Kt=0;Kt<gt;Kt++)Ee[Kt]=arguments[Kt+2];J.children=Ee}return M(N.type,ft,void 0,void 0,bt,J)},wt.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},wt.createElement=function(N,Z,st){var J,ft={},bt=null;if(Z!=null)for(J in Z.key!==void 0&&(bt=""+Z.key),Z)Rt.call(Z,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ft[J]=Z[J]);var gt=arguments.length-2;if(gt===1)ft.children=st;else if(1<gt){for(var Ee=Array(gt),Kt=0;Kt<gt;Kt++)Ee[Kt]=arguments[Kt+2];ft.children=Ee}if(N&&N.defaultProps)for(J in gt=N.defaultProps,gt)ft[J]===void 0&&(ft[J]=gt[J]);return M(N,bt,void 0,void 0,null,ft)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(N){return{$$typeof:g,render:N}},wt.isValidElement=x,wt.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:nt}},wt.memo=function(N,Z){return{$$typeof:y,type:N,compare:Z===void 0?null:Z}},wt.startTransition=function(N){var Z=Tt.T,st={};Tt.T=st;try{var J=N(),ft=Tt.S;ft!==null&&ft(st,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(jt,ct)}catch(bt){ct(bt)}finally{Tt.T=Z}},wt.unstable_useCacheRefresh=function(){return Tt.H.useCacheRefresh()},wt.use=function(N){return Tt.H.use(N)},wt.useActionState=function(N,Z,st){return Tt.H.useActionState(N,Z,st)},wt.useCallback=function(N,Z){return Tt.H.useCallback(N,Z)},wt.useContext=function(N){return Tt.H.useContext(N)},wt.useDebugValue=function(){},wt.useDeferredValue=function(N,Z){return Tt.H.useDeferredValue(N,Z)},wt.useEffect=function(N,Z,st){var J=Tt.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(N,Z)},wt.useId=function(){return Tt.H.useId()},wt.useImperativeHandle=function(N,Z,st){return Tt.H.useImperativeHandle(N,Z,st)},wt.useInsertionEffect=function(N,Z){return Tt.H.useInsertionEffect(N,Z)},wt.useLayoutEffect=function(N,Z){return Tt.H.useLayoutEffect(N,Z)},wt.useMemo=function(N,Z){return Tt.H.useMemo(N,Z)},wt.useOptimistic=function(N,Z){return Tt.H.useOptimistic(N,Z)},wt.useReducer=function(N,Z,st){return Tt.H.useReducer(N,Z,st)},wt.useRef=function(N){return Tt.H.useRef(N)},wt.useState=function(N){return Tt.H.useState(N)},wt.useSyncExternalStore=function(N,Z,st){return Tt.H.useSyncExternalStore(N,Z,st)},wt.useTransition=function(){return Tt.H.useTransition()},wt.version="19.1.1",wt}var B_;function wm(){return B_||(B_=1,Md.exports=NA()),Md.exports}var Bt=wm();const DA=bv(Bt);var kd={exports:{}},vl={},Pd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function OA(){return q_||(q_=1,function(s){function t(G,nt){var ct=G.length;G.push(nt);t:for(;0<ct;){var jt=ct-1>>>1,N=G[jt];if(0<l(N,nt))G[jt]=nt,G[ct]=N,ct=jt;else break t}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var nt=G[0],ct=G.pop();if(ct!==nt){G[0]=ct;t:for(var jt=0,N=G.length,Z=N>>>1;jt<Z;){var st=2*(jt+1)-1,J=G[st],ft=st+1,bt=G[ft];if(0>l(J,ct))ft<N&&0>l(bt,J)?(G[jt]=bt,G[ft]=ct,jt=ft):(G[jt]=J,G[st]=ct,jt=st);else if(ft<N&&0>l(bt,ct))G[jt]=bt,G[ft]=ct,jt=ft;else break t}}return nt}function l(G,nt){var ct=G.sortIndex-nt.sortIndex;return ct!==0?ct:G.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,b=null,S=3,z=!1,X=!1,tt=!1,W=!1,at=typeof setTimeout=="function"?setTimeout:null,it=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;function Mt(G){for(var nt=n(y);nt!==null;){if(nt.callback===null)r(y);else if(nt.startTime<=G)r(y),nt.sortIndex=nt.expirationTime,t(p,nt);else break;nt=n(y)}}function Tt(G){if(tt=!1,Mt(G),!X)if(n(p)!==null)X=!0,Rt||(Rt=!0,P());else{var nt=n(y);nt!==null&&ee(Tt,nt.startTime-G)}}var Rt=!1,M=-1,w=5,x=-1;function O(){return W?!0:!(s.unstable_now()-x<w)}function V(){if(W=!1,Rt){var G=s.unstable_now();x=G;var nt=!0;try{t:{X=!1,tt&&(tt=!1,it(M),M=-1),z=!0;var ct=S;try{e:{for(Mt(G),b=n(p);b!==null&&!(b.expirationTime>G&&O());){var jt=b.callback;if(typeof jt=="function"){b.callback=null,S=b.priorityLevel;var N=jt(b.expirationTime<=G);if(G=s.unstable_now(),typeof N=="function"){b.callback=N,Mt(G),nt=!0;break e}b===n(p)&&r(p),Mt(G)}else r(p);b=n(p)}if(b!==null)nt=!0;else{var Z=n(y);Z!==null&&ee(Tt,Z.startTime-G),nt=!1}}break t}finally{b=null,S=ct,z=!1}nt=void 0}}finally{nt?P():Rt=!1}}}var P;if(typeof dt=="function")P=function(){dt(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ve=C.port2;C.port1.onmessage=V,P=function(){ve.postMessage(null)}}else P=function(){at(V,0)};function ee(G,nt){M=at(function(){G(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(G){switch(S){case 1:case 2:case 3:var nt=3;break;default:nt=S}var ct=S;S=nt;try{return G()}finally{S=ct}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(G,nt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ct=S;S=G;try{return nt()}finally{S=ct}},s.unstable_scheduleCallback=function(G,nt,ct){var jt=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?jt+ct:jt):ct=jt,G){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ct+N,G={id:T++,callback:nt,priorityLevel:G,startTime:ct,expirationTime:N,sortIndex:-1},ct>jt?(G.sortIndex=ct,t(y,G),n(p)===null&&G===n(y)&&(tt?(it(M),M=-1):tt=!0,ee(Tt,ct-jt))):(G.sortIndex=N,t(p,G),X||z||(X=!0,Rt||(Rt=!0,P()))),G},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(G){var nt=S;return function(){var ct=S;S=nt;try{return G.apply(this,arguments)}finally{S=ct}}}}(Ld)),Ld}var H_;function VA(){return H_||(H_=1,Pd.exports=OA()),Pd.exports}var Ud={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function MA(){if(G_)return Ze;G_=1;var s=wm();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,T){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:y,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ze.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,T)},Ze.flushSync=function(p){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=T,r.d.f()}},Ze.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Ze.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Ze.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,b=g(T,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:z}):T==="script"&&r.d.X(p,{crossOrigin:b,integrity:S,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ze.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Ze.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,b=g(T,y.crossOrigin);r.d.L(p,T,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ze.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Ze.requestFormReset=function(p){r.d.r(p)},Ze.unstable_batchedUpdates=function(p,y){return p(y)},Ze.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Ze.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ze.version="19.1.1",Ze}var F_;function kA(){if(F_)return Ud.exports;F_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Ud.exports=MA(),Ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function PA(){if(Q_)return vl;Q_=1;var s=VA(),t=wm(),n=kA();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(r(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),at=Symbol.for("react.provider"),it=Symbol.for("react.consumer"),dt=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case W:return"Profiler";case tt:return"StrictMode";case Tt:return"Suspense";case Rt:return"SuspenseList";case x:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case dt:return(e.displayName||"Context")+".Provider";case it:return(e._context.displayName||"Context")+".Consumer";case Mt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return i=e.displayName||null,i!==null?i:ve(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return ve(e(i))}catch{}}return null}var ee=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},jt=[],N=-1;function Z(e){return{current:e}}function st(e){0>N||(e.current=jt[N],jt[N]=null,N--)}function J(e,i){N++,jt[N]=e.current,e.current=i}var ft=Z(null),bt=Z(null),gt=Z(null),Ee=Z(null);function Kt(e,i){switch(J(gt,i),J(bt,e),J(ft,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?f_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=f_(i),e=d_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}st(ft),J(ft,e)}function ut(){st(ft),st(bt),st(gt)}function qt(e){e.memoizedState!==null&&J(Ee,e);var i=ft.current,a=d_(i,e.type);i!==a&&(J(bt,e),J(ft,a))}function zt(e){bt.current===e&&(st(ft),st(bt)),Ee.current===e&&(st(Ee),dl._currentValue=ct)}var le=Object.prototype.hasOwnProperty,Un=s.unstable_scheduleCallback,Zs=s.unstable_cancelCallback,uo=s.unstable_shouldYield,tu=s.unstable_requestPaint,Sn=s.unstable_now,Oh=s.unstable_getCurrentPriorityLevel,co=s.unstable_ImmediatePriority,Fr=s.unstable_UserBlockingPriority,Ws=s.unstable_NormalPriority,Vh=s.unstable_LowPriority,Qr=s.unstable_IdlePriority,ho=s.log,eu=s.unstable_setDisableYieldValue,he=null,Yt=null;function fn(e){if(typeof ho=="function"&&eu(e),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(he,e)}catch{}}var Xe=Math.clz32?Math.clz32:Js,nu=Math.log,Mh=Math.LN2;function Js(e){return e>>>=0,e===0?32:31-(nu(e)/Mh|0)|0}var tr=256,er=4194304;function jn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kr(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=jn(o):(v&=E,v!==0?h=jn(v):a||(a=E&~e,a!==0&&(h=jn(a))))):(E=o&~d,E!==0?h=jn(E):v!==0?h=jn(v):a||(a=o&~e,a!==0&&(h=jn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function nr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function fo(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(){var e=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),e}function go(){var e=er;return er<<=1,(er&62914560)===0&&(er=4194304),e}function vi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Ei(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function po(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,I=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Xe(a),Y=1<<F;E[F]=0,I[F]=-1;var B=j[F];if(B!==null)for(j[F]=null,F=0;F<B.length;F++){var q=B[F];q!==null&&(q.lane&=-536870913)}a&=~Y}o!==0&&Xn(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Xn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Xe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function yo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Xe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function es(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ns(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:O_(e.type))}function iu(e,i){var a=nt.p;try{return nt.p=e,i()}finally{nt.p=a}}var ae=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ae,Te="__reactProps$"+ae,bn="__reactContainer$"+ae,_o="__reactEvents$"+ae,kh="__reactListeners$"+ae,is="__reactHandles$"+ae,su="__reactResources$"+ae,ir="__reactMarker$"+ae;function ss(e){delete e[Ce],delete e[Te],delete e[_o],delete e[kh],delete e[is]}function Ti(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[bn]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=y_(e);e!==null;){if(a=e[Ce])return a;e=y_(e)}return i}e=a,a=e.parentNode}return null}function $n(e){if(e=e[Ce]||e[bn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Zn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function nn(e){var i=e[su];return i||(i=e[su]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(e){e[ir]=!0}var vo=new Set,Xr={};function zn(e,i){Ai(e,i),Ai(e+"Capture",i)}function Ai(e,i){for(Xr[e]=i,e=0;e<i.length;e++)vo.add(i[e])}var ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),au={},sr={};function ou(e){return le.call(sr,e)?!0:le.call(au,e)?!1:ru.test(e)?sr[e]=!0:(au[e]=!0,!1)}function rs(e,i,a){if(ou(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Wn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Be(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var rr,lu;function Si(e){if(rr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);rr=i&&i[1]||"",lu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rr+e+lu}var $r=!1;function Zr(e,i){if(!e||$r)return"";$r=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(q){var B=q}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(q){B=q}e.call(Y.prototype)}}else{try{throw Error()}catch(q){B=q}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var I=v.split(`
`),j=E.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===j.length)for(o=I.length-1,h=j.length-1;1<=o&&0<=h&&I[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==j[h]){var F=`
`+I[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=h);break}}}finally{$r=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Si(a):""}function Eo(e){switch(e.tag){case 26:case 27:case 5:return Si(e.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return Zr(e.type,!1);case 11:return Zr(e.type.render,!1);case 1:return Zr(e.type,!0);case 31:return Si("Activity");default:return""}}function Wr(e){try{var i="";do i+=Eo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function To(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ph(e){var i=To(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Jr(e){e._valueTracker||(e._valueTracker=Ph(e))}function Ao(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=To(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lh=/[\n"\\]/g;function Ae(e){return e.replace(Lh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dn(e,i,a,o,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+sn(i)):e.value!==""+sn(i)&&(e.value=""+sn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?as(e,v,sn(i)):a!=null?as(e,v,sn(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+sn(E):e.removeAttribute("name")}function or(e,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+sn(a):"",i=i!=null?""+sn(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function as(e,i,a){i==="number"&&ar(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function bi(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+sn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Zt(e,i,a){if(i!=null&&(i=""+sn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+sn(a):""}function lr(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(ee(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=sn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function wn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ur.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function So(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&uu(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&uu(e,d,i[d])}function bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(e){return jh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wi=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ri=null,Ii=null;function wo(e){var i=$n(e);if(i&&(e=i.stateNode)){var a=e[Te]||null;t:switch(e=i.stateNode,i.type){case"input":if(dn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ae(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[Te]||null;if(!h)throw Error(r(90));dn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Ao(o)}break t;case"textarea":Zt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&bi(e,!!a.multiple,i,!1)}}}var Jn=!1;function cu(e,i,a){if(Jn)return e(i,a);Jn=!0;try{var o=e(i);return o}finally{if(Jn=!1,(Ri!==null||Ii!==null)&&(ic(),Ri&&(i=Ri,e=Ii,Ii=Ri=null,wo(i),e)))for(i=0;i<e.length;i++)wo(e[i])}}function cr(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Te]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Bn)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){In=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{In=!1}var ti=null,os=null,Ci=null;function Ro(){if(Ci)return Ci;var e,i=os,a=i.length,o,h="value"in ti?ti.value:ti.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return Ci=h.slice(e,1<o?1-o:void 0)}function ei(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ni(){return!0}function Io(){return!1}function ke(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ni:Io,this.isPropagationStopped=Io,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),i}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=ke(Ft),fr=T({},Ft,{view:0,detail:0}),hu=ke(fr),na,ia,ii,dr=T({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&e.type==="mousemove"?(na=e.screenX-ii.screenX,ia=e.screenY-ii.screenY):ia=na=0,ii=e),na)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),Cn=ke(dr),fu=T({},dr,{dataTransfer:0}),zh=ke(fu),mr=T({},fr,{relatedTarget:0}),sa=ke(mr),Co=T({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),ra=ke(Co),du=T({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aa=ke(du),Bh=T({},Ft,{data:0}),xo=ke(Bh),gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function No(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=gu[e])?!!i[e]:!1}function pr(){return No}var pu=T({},fr,{key:function(e){if(e.key){var i=gr[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oa=ke(pu),yu=T({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=ke(yu),xi=T({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),_u=ke(xi),vu=T({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=ke(vu),Tu=T({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),la=ke(Tu),rn=T({},Ft,{newState:0,oldState:0}),Au=ke(rn),Su=[9,13,27,32],si=Bn&&"CompositionEvent"in window,u=null;Bn&&"documentMode"in document&&(u=document.documentMode);var m=Bn&&"TextEvent"in window&&!u,_=Bn&&(!si||u&&8<u&&11>=u),A=" ",L=!1;function H(e,i){switch(e){case"keyup":return Su.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function xe(e,i){switch(e){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return e=i.data,e===A&&L?null:e;default:return null}}function Pt(e,i){if(kt)return e==="compositionend"||!si&&H(e,i)?(e=Ro(),Ci=os=ti=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Pe[e.type]:i==="textarea"}function Ni(e,i,a,o){Ri?Ii?Ii.push(o):Ii=[o]:Ri=o,i=uc(i,"onChange"),0<i.length&&(a=new ea("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var qe=null,ri=null;function Oo(e){o_(e,0)}function bu(e){var i=Zn(e);if(Ao(i))return e}function Cg(e,i){if(e==="change")return i}var xg=!1;if(Bn){var qh;if(Bn){var Hh="oninput"in document;if(!Hh){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),Hh=typeof Ng.oninput=="function"}qh=Hh}else qh=!1;xg=qh&&(!document.documentMode||9<document.documentMode)}function Dg(){qe&&(qe.detachEvent("onpropertychange",Og),ri=qe=null)}function Og(e){if(e.propertyName==="value"&&bu(ri)){var i=[];Ni(i,ri,e,Rn(e)),cu(Oo,i)}}function s1(e,i,a){e==="focusin"?(Dg(),qe=i,ri=a,qe.attachEvent("onpropertychange",Og)):e==="focusout"&&Dg()}function r1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bu(ri)}function a1(e,i){if(e==="click")return bu(i)}function o1(e,i){if(e==="input"||e==="change")return bu(i)}function l1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var mn=typeof Object.is=="function"?Object.is:l1;function Vo(e,i){if(mn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!le.call(i,h)||!mn(e[h],i[h]))return!1}return!0}function Vg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mg(e,i){var a=Vg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Vg(a)}}function kg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?kg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Pg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ar(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ar(e.document)}return i}function Gh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var u1=Bn&&"documentMode"in document&&11>=document.documentMode,ua=null,Fh=null,Mo=null,Qh=!1;function Lg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qh||ua==null||ua!==ar(o)||(o=ua,"selectionStart"in o&&Gh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Mo&&Vo(Mo,o)||(Mo=o,o=uc(Fh,"onSelect"),0<o.length&&(i=new ea("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=ua)))}function yr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ca={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},Kh={},Ug={};Bn&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function _r(e){if(Kh[e])return Kh[e];if(!ca[e])return e;var i=ca[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ug)return Kh[e]=i[a];return e}var jg=_r("animationend"),zg=_r("animationiteration"),Bg=_r("animationstart"),c1=_r("transitionrun"),h1=_r("transitionstart"),f1=_r("transitioncancel"),qg=_r("transitionend"),Hg=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function qn(e,i){Hg.set(e,i),zn(i,[e])}var Gg=new WeakMap;function xn(e,i){if(typeof e=="object"&&e!==null){var a=Gg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Wr(i)},Gg.set(e,i),i)}return{value:e,source:i,stack:Wr(i)}}var Nn=[],ha=0,Xh=0;function wu(){for(var e=ha,i=Xh=ha=0;i<e;){var a=Nn[i];Nn[i++]=null;var o=Nn[i];Nn[i++]=null;var h=Nn[i];Nn[i++]=null;var d=Nn[i];if(Nn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Fg(a,h,d)}}function Ru(e,i,a,o){Nn[ha++]=e,Nn[ha++]=i,Nn[ha++]=a,Nn[ha++]=o,Xh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function $h(e,i,a,o){return Ru(e,i,a,o),Iu(e)}function fa(e,i){return Ru(e,null,null,i),Iu(e)}function Fg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Xe(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Iu(e){if(50<rl)throw rl=0,id=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var da={};function d1(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,i,a,o){return new d1(e,i,a,o)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Di(e,i){var a=e.alternate;return a===null?(a=gn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Qg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Cu(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")Zh(e)&&(v=1);else if(typeof e=="string")v=gA(e,a,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case x:return e=gn(31,a,i,h),e.elementType=x,e.lanes=d,e;case X:return vr(a.children,h,d,i);case tt:v=8,h|=24;break;case W:return e=gn(12,a,i,h|2),e.elementType=W,e.lanes=d,e;case Tt:return e=gn(13,a,i,h),e.elementType=Tt,e.lanes=d,e;case Rt:return e=gn(19,a,i,h),e.elementType=Rt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case at:case dt:v=10;break t;case it:v=9;break t;case Mt:v=11;break t;case M:v=14;break t;case w:v=16,o=null;break t}v=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return i=gn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function vr(e,i,a,o){return e=gn(7,e,o,i),e.lanes=a,e}function Wh(e,i,a){return e=gn(6,e,null,i),e.lanes=a,e}function Jh(e,i,a){return i=gn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ma=[],ga=0,xu=null,Nu=0,Dn=[],On=0,Er=null,Oi=1,Vi="";function Tr(e,i){ma[ga++]=Nu,ma[ga++]=xu,xu=e,Nu=i}function Kg(e,i,a){Dn[On++]=Oi,Dn[On++]=Vi,Dn[On++]=Er,Er=e;var o=Oi;e=Vi;var h=32-Xe(o)-1;o&=~(1<<h),a+=1;var d=32-Xe(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Oi=1<<32-Xe(i)+h|a<<h|o,Vi=d+e}else Oi=1<<d|a<<h|o,Vi=e}function tf(e){e.return!==null&&(Tr(e,1),Kg(e,1,0))}function ef(e){for(;e===xu;)xu=ma[--ga],ma[ga]=null,Nu=ma[--ga],ma[ga]=null;for(;e===Er;)Er=Dn[--On],Dn[On]=null,Vi=Dn[--On],Dn[On]=null,Oi=Dn[--On],Dn[On]=null}var an=null,fe=null,Gt=!1,Ar=null,ai=!1,nf=Error(r(519));function Sr(e){var i=Error(r(418,""));throw Lo(xn(i,e)),nf}function Yg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[Te]=o,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<ol.length;a++)Nt(ol[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),or(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Jr(i);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),lr(i,o.value,o.defaultValue,o.children),Jr(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||h_(i.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),o.onScroll!=null&&Nt("scroll",i),o.onScrollEnd!=null&&Nt("scrollend",i),o.onClick!=null&&(i.onclick=cc),i=!0):i=!1,i||Sr(e)}function Xg(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:an=an.return}}function ko(e){if(e!==an)return!1;if(!Gt)return Xg(e),Gt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||vd(e.type,e.memoizedProps)),a=!a),a&&fe&&Sr(e),Xg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){fe=Gn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}fe=null}}else i===27?(i=fe,Ss(e.type)?(e=Sd,Sd=null,fe=e):fe=i):fe=an?Gn(e.stateNode.nextSibling):null;return!0}function Po(){fe=an=null,Gt=!1}function $g(){var e=Ar;return e!==null&&(un===null?un=e:un.push.apply(un,e),Ar=null),e}function Lo(e){Ar===null?Ar=[e]:Ar.push(e)}var sf=Z(null),br=null,Mi=null;function ls(e,i,a){J(sf,i._currentValue),i._currentValue=a}function ki(e){e._currentValue=sf.current,st(sf)}function rf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function af(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var I=0;I<i.length;I++)if(E.context===i[I]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),rf(d.return,a,e),o||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),rf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Uo(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=h.type;mn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ee.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(dl):e=[dl])}h=h.return}e!==null&&af(i,e,a,o),i.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wr(e){br=e,Mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Zg(br,e)}function Ou(e,i){return br===null&&wr(e),Zg(e,i)}function Zg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Mi===null){if(e===null)throw Error(r(308));Mi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Mi=Mi.next=i;return a}var m1=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},g1=s.unstable_scheduleCallback,p1=s.unstable_NormalPriority,De={$$typeof:dt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function of(){return{controller:new m1,data:new Map,refCount:0}}function jo(e){e.refCount--,e.refCount===0&&g1(p1,function(){e.controller.abort()})}var zo=null,lf=0,pa=0,ya=null;function y1(e,i){if(zo===null){var a=zo=[];lf=0,pa=cd(),ya={status:"pending",value:void 0,then:function(o){a.push(o)}}}return lf++,i.then(Wg,Wg),i}function Wg(){if(--lf===0&&zo!==null){ya!==null&&(ya.status="fulfilled");var e=zo;zo=null,pa=0,ya=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function _1(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Jg=G.S;G.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&y1(e,i),Jg!==null&&Jg(e,i)};var Rr=Z(null);function uf(){var e=Rr.current;return e!==null?e:ie.pooledCache}function Vu(e,i){i===null?J(Rr,Rr.current):J(Rr,i.pool)}function tp(){var e=uf();return e===null?null:{parent:De._currentValue,pool:e}}var Bo=Error(r(460)),ep=Error(r(474)),Mu=Error(r(542)),cf={then:function(){}};function np(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ku(){}function ip(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ku,ku),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rp(e),e;default:if(typeof i.status=="string")i.then(ku,ku);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rp(e),e}throw qo=i,Bo}}var qo=null;function sp(){if(qo===null)throw Error(r(459));var e=qo;return qo=null,e}function rp(e){if(e===Bo||e===Mu)throw Error(r(483))}var us=!1;function hf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ff(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hs(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Xt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Iu(e),Fg(e,null,a),i}return Ru(e,o,i,a),Iu(e)}function Ho(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,yo(e,a)}}function df(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var mf=!1;function Go(){if(mf){var e=ya;if(e!==null)throw e}}function Fo(e,i,a,o){mf=!1;var h=e.updateQueue;us=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,j=I.next;I.next=null,v===null?d=j:v.next=j,v=I;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=j:E.next=j,F.lastBaseUpdate=I))}if(d!==null){var Y=h.baseState;v=0,F=j=I=null,E=d;do{var B=E.lane&-536870913,q=B!==E.lane;if(q?(Lt&B)===B:(o&B)===B){B!==0&&B===pa&&(mf=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,pt=E;B=i;var te=a;switch(pt.tag){case 1:if(Et=pt.payload,typeof Et=="function"){Y=Et.call(te,Y,B);break t}Y=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=pt.payload,B=typeof Et=="function"?Et.call(te,Y,B):Et,B==null)break t;Y=T({},Y,B);break t;case 2:us=!0}}B=E.callback,B!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[B]:q.push(B))}else q={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(j=F=q,I=Y):F=F.next=q,v|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);F===null&&(I=Y),h.baseState=I,h.firstBaseUpdate=j,h.lastBaseUpdate=F,d===null&&(h.shared.lanes=0),vs|=v,e.lanes=v,e.memoizedState=Y}}function ap(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function op(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ap(a[e],i)}var _a=Z(null),Pu=Z(0);function lp(e,i){e=qi,J(Pu,e),J(_a,i),qi=e|i.baseLanes}function gf(){J(Pu,qi),J(_a,_a.current)}function pf(){qi=Pu.current,st(_a),st(Pu)}var fs=0,It=null,Wt=null,Se=null,Lu=!1,va=!1,Ir=!1,Uu=0,Qo=0,Ea=null,v1=0;function pe(){throw Error(r(321))}function yf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!mn(e[a],i[a]))return!1;return!0}function _f(e,i,a,o,h,d){return fs=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?Fp:Qp,Ir=!1,d=a(o,h),Ir=!1,va&&(d=cp(i,a,o,h)),up(e),d}function up(e){G.H=Gu;var i=Wt!==null&&Wt.next!==null;if(fs=0,Se=Wt=It=null,Lu=!1,Qo=0,Ea=null,i)throw Error(r(300));e===null||Le||(e=e.dependencies,e!==null&&Du(e)&&(Le=!0))}function cp(e,i,a,o){It=e;var h=0;do{if(va&&(Ea=null),Qo=0,va=!1,25<=h)throw Error(r(301));if(h+=1,Se=Wt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=R1,d=i(a,o)}while(va);return d}function E1(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?Ko(i):i,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(It.flags|=1024),i}function vf(){var e=Uu!==0;return Uu=0,e}function Ef(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Tf(e){if(Lu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Lu=!1}fs=0,Se=Wt=It=null,va=!1,Qo=Uu=0,Ea=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?It.memoizedState=Se=e:Se=Se.next=e,Se}function be(){if(Wt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var i=Se===null?It.memoizedState:Se.next;if(i!==null)Se=i,Wt=e;else{if(e===null)throw It.alternate===null?Error(r(467)):Error(r(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Se===null?It.memoizedState=Se=e:Se=Se.next=e}return Se}function Af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var i=Qo;return Qo+=1,Ea===null&&(Ea=[]),e=ip(Ea,e,i),i=It,(Se===null?i.memoizedState:Se.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Fp:Qp),e}function ju(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===dt)return $e(e)}throw Error(r(438,String(e)))}function Sf(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Af(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function Pi(e,i){return typeof i=="function"?i(e):i}function zu(e){var i=be();return bf(i,Wt,e)}function bf(e,i,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,I=null,j=i,F=!1;do{var Y=j.lane&-536870913;if(Y!==j.lane?(Lt&Y)===Y:(fs&Y)===Y){var B=j.revertLane;if(B===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Y===pa&&(F=!0);else if((fs&B)===B){j=j.next,B===pa&&(F=!0);continue}else Y={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=Y,v=d):I=I.next=Y,It.lanes|=B,vs|=B;Y=j.action,Ir&&a(d,Y),d=j.hasEagerState?j.eagerState:a(d,Y)}else B={lane:Y,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(E=I=B,v=d):I=I.next=B,It.lanes|=Y,vs|=Y;j=j.next}while(j!==null&&j!==i);if(I===null?v=d:I.next=E,!mn(d,e.memoizedState)&&(Le=!0,F&&(a=ya,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=I,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function wf(e){var i=be(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);mn(d,i.memoizedState)||(Le=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function hp(e,i,a){var o=It,h=be(),d=Gt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!mn((Wt||h).memoizedState,a);v&&(h.memoizedState=a,Le=!0),h=h.queue;var E=mp.bind(null,o,h,e);if(Yo(2048,8,E,[e]),h.getSnapshot!==i||v||Se!==null&&Se.memoizedState.tag&1){if(o.flags|=2048,Ta(9,Bu(),dp.bind(null,o,h,a,i),null),ie===null)throw Error(r(349));d||(fs&124)!==0||fp(o,i,a)}return a}function fp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=Af(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function dp(e,i,a,o){i.value=a,i.getSnapshot=o,gp(i)&&pp(e)}function mp(e,i,a){return a(function(){gp(i)&&pp(e)})}function gp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!mn(e,a)}catch{return!0}}function pp(e){var i=fa(e,2);i!==null&&En(i,e,2)}function Rf(e){var i=on();if(typeof e=="function"){var a=e;if(e=a(),Ir){fn(!0);try{a()}finally{fn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},i}function yp(e,i,a,o){return e.baseState=a,bf(e,Wt,typeof o=="function"?o:Pi)}function T1(e,i,a,o,h){if(Hu(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,_p(i,d)):(d.next=a.next,i.pending=a.next=d)}}function _p(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var E=a(h,o),I=G.S;I!==null&&I(v,E),vp(e,i,E)}catch(j){If(e,i,j)}finally{G.T=d}}else try{d=a(h,o),vp(e,i,d)}catch(j){If(e,i,j)}}function vp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ep(e,i,o)},function(o){return If(e,i,o)}):Ep(e,i,a)}function Ep(e,i,a){i.status="fulfilled",i.value=a,Tp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,_p(e,a)))}function If(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Tp(i),i=i.next;while(i!==o)}e.action=null}function Tp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Ap(e,i){return i}function Sp(e,i){if(Gt){var a=ie.formState;if(a!==null){t:{var o=It;if(Gt){if(fe){e:{for(var h=fe,d=ai;h.nodeType!==8;){if(!d){h=null;break e}if(h=Gn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){fe=Gn(h.nextSibling),o=h.data==="F!";break t}}Sr(o)}o=!1}o&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:i},a.queue=o,a=qp.bind(null,It,o),o.dispatch=a,o=Rf(!1),d=Of.bind(null,It,!1,o.queue),o=on(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=T1.bind(null,It,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function bp(e){var i=be();return wp(i,Wt,e)}function wp(e,i,a){if(i=bf(e,i,Ap)[0],e=zu(Pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Ko(i)}catch(v){throw v===Bo?Mu:v}else o=i;i=be();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(It.flags|=2048,Ta(9,Bu(),A1.bind(null,h,a),null)),[o,d,e]}function A1(e,i){e.action=i}function Rp(e){var i=be(),a=Wt;if(a!==null)return wp(i,a,e);be(),i=i.memoizedState,a=be();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Ta(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=It.updateQueue,i===null&&(i=Af(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Bu(){return{destroy:void 0,resource:void 0}}function Ip(){return be().memoizedState}function qu(e,i,a,o){var h=on();o=o===void 0?null:o,It.flags|=e,h.memoizedState=Ta(1|i,Bu(),a,o)}function Yo(e,i,a,o){var h=be();o=o===void 0?null:o;var d=h.memoizedState.inst;Wt!==null&&o!==null&&yf(o,Wt.memoizedState.deps)?h.memoizedState=Ta(i,d,a,o):(It.flags|=e,h.memoizedState=Ta(1|i,d,a,o))}function Cp(e,i){qu(8390656,8,e,i)}function xp(e,i){Yo(2048,8,e,i)}function Np(e,i){return Yo(4,2,e,i)}function Dp(e,i){return Yo(4,4,e,i)}function Op(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Vp(e,i,a){a=a!=null?a.concat([e]):null,Yo(4,4,Op.bind(null,i,e),a)}function Cf(){}function Mp(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&yf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function kp(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&yf(i,o[1]))return o[0];if(o=e(),Ir){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,i],o}function xf(e,i,a){return a===void 0||(fs&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Uy(),It.lanes|=e,vs|=e,a)}function Pp(e,i,a,o){return mn(a,i)?a:_a.current!==null?(e=xf(e,a,o),mn(e,i)||(Le=!0),e):(fs&42)===0?(Le=!0,e.memoizedState=a):(e=Uy(),It.lanes|=e,vs|=e,i)}function Lp(e,i,a,o,h){var d=nt.p;nt.p=d!==0&&8>d?d:8;var v=G.T,E={};G.T=E,Of(e,!1,i,a);try{var I=h(),j=G.S;if(j!==null&&j(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var F=_1(I,o);Xo(e,i,F,vn(e))}else Xo(e,i,o,vn(e))}catch(Y){Xo(e,i,{then:function(){},status:"rejected",reason:Y},vn())}finally{nt.p=d,G.T=v}}function S1(){}function Nf(e,i,a,o){if(e.tag!==5)throw Error(r(476));var h=Up(e).queue;Lp(e,h,i,ct,a===null?S1:function(){return jp(e),a(o)})}function Up(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function jp(e){var i=Up(e).next.queue;Xo(e,i,{},vn())}function Df(){return $e(dl)}function zp(){return be().memoizedState}function Bp(){return be().memoizedState}function b1(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=vn();e=cs(a);var o=hs(i,e,a);o!==null&&(En(o,i,a),Ho(o,i,a)),i={cache:of()},e.payload=i;return}i=i.return}}function w1(e,i,a){var o=vn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Hu(e)?Hp(i,a):(a=$h(e,i,a,o),a!==null&&(En(a,e,o),Gp(a,i,o)))}function qp(e,i,a){var o=vn();Xo(e,i,a,o)}function Xo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hu(e))Hp(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,mn(E,v))return Ru(e,i,h,0),ie===null&&wu(),!1}catch{}finally{}if(a=$h(e,i,h,o),a!==null)return En(a,e,o),Gp(a,i,o),!0}return!1}function Of(e,i,a,o){if(o={lane:2,revertLane:cd(),action:o,hasEagerState:!1,eagerState:null,next:null},Hu(e)){if(i)throw Error(r(479))}else i=$h(e,a,o,2),i!==null&&En(i,e,2)}function Hu(e){var i=e.alternate;return e===It||i!==null&&i===It}function Hp(e,i){va=Lu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Gp(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,yo(e,a)}}var Gu={readContext:$e,use:ju,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe},Fp={readContext:$e,use:ju,useCallback:function(e,i){return on().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:Cp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,qu(4194308,4,Op.bind(null,i,e),a)},useLayoutEffect:function(e,i){return qu(4194308,4,e,i)},useInsertionEffect:function(e,i){qu(4,2,e,i)},useMemo:function(e,i){var a=on();i=i===void 0?null:i;var o=e();if(Ir){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=on();if(a!==void 0){var h=a(i);if(Ir){fn(!0);try{a(i)}finally{fn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=w1.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var i=on();return e={current:e},i.memoizedState=e},useState:function(e){e=Rf(e);var i=e.queue,a=qp.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Cf,useDeferredValue:function(e,i){var a=on();return xf(a,e,i)},useTransition:function(){var e=Rf(!1);return e=Lp.bind(null,It,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=It,h=on();if(Gt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ie===null)throw Error(r(349));(Lt&124)!==0||fp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Cp(mp.bind(null,o,d,e),[e]),o.flags|=2048,Ta(9,Bu(),dp.bind(null,o,d,a,i),null),a},useId:function(){var e=on(),i=ie.identifierPrefix;if(Gt){var a=Vi,o=Oi;a=(o&~(1<<32-Xe(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Uu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=v1++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Df,useFormState:Sp,useActionState:Sp,useOptimistic:function(e){var i=on();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Of.bind(null,It,!0,a),a.dispatch=i,[e,i]},useMemoCache:Sf,useCacheRefresh:function(){return on().memoizedState=b1.bind(null,It)}},Qp={readContext:$e,use:ju,useCallback:Mp,useContext:$e,useEffect:xp,useImperativeHandle:Vp,useInsertionEffect:Np,useLayoutEffect:Dp,useMemo:kp,useReducer:zu,useRef:Ip,useState:function(){return zu(Pi)},useDebugValue:Cf,useDeferredValue:function(e,i){var a=be();return Pp(a,Wt.memoizedState,e,i)},useTransition:function(){var e=zu(Pi)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Ko(e),i]},useSyncExternalStore:hp,useId:zp,useHostTransitionStatus:Df,useFormState:bp,useActionState:bp,useOptimistic:function(e,i){var a=be();return yp(a,Wt,e,i)},useMemoCache:Sf,useCacheRefresh:Bp},R1={readContext:$e,use:ju,useCallback:Mp,useContext:$e,useEffect:xp,useImperativeHandle:Vp,useInsertionEffect:Np,useLayoutEffect:Dp,useMemo:kp,useReducer:wf,useRef:Ip,useState:function(){return wf(Pi)},useDebugValue:Cf,useDeferredValue:function(e,i){var a=be();return Wt===null?xf(a,e,i):Pp(a,Wt.memoizedState,e,i)},useTransition:function(){var e=wf(Pi)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Ko(e),i]},useSyncExternalStore:hp,useId:zp,useHostTransitionStatus:Df,useFormState:Rp,useActionState:Rp,useOptimistic:function(e,i){var a=be();return Wt!==null?yp(a,Wt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Sf,useCacheRefresh:Bp},Aa=null,$o=0;function Fu(e){var i=$o;return $o+=1,Aa===null&&(Aa=[]),ip(Aa,e,i)}function Zo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Qu(e,i){throw i.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Kp(e){var i=e._init;return i(e._payload)}function Yp(e){function i(k,D){if(e){var U=k.deletions;U===null?(k.deletions=[D],k.flags|=16):U.push(D)}}function a(k,D){if(!e)return null;for(;D!==null;)i(k,D),D=D.sibling;return null}function o(k){for(var D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function h(k,D){return k=Di(k,D),k.index=0,k.sibling=null,k}function d(k,D,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<D?(k.flags|=67108866,D):U):(k.flags|=67108866,D)):(k.flags|=1048576,D)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,D,U,K){return D===null||D.tag!==6?(D=Wh(U,k.mode,K),D.return=k,D):(D=h(D,U),D.return=k,D)}function I(k,D,U,K){var lt=U.type;return lt===X?F(k,D,U.props.children,K,U.key):D!==null&&(D.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===w&&Kp(lt)===D.type)?(D=h(D,U.props),Zo(D,U),D.return=k,D):(D=Cu(U.type,U.key,U.props,null,k.mode,K),Zo(D,U),D.return=k,D)}function j(k,D,U,K){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Jh(U,k.mode,K),D.return=k,D):(D=h(D,U.children||[]),D.return=k,D)}function F(k,D,U,K,lt){return D===null||D.tag!==7?(D=vr(U,k.mode,K,lt),D.return=k,D):(D=h(D,U),D.return=k,D)}function Y(k,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Wh(""+D,k.mode,U),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return U=Cu(D.type,D.key,D.props,null,k.mode,U),Zo(U,D),U.return=k,U;case z:return D=Jh(D,k.mode,U),D.return=k,D;case w:var K=D._init;return D=K(D._payload),Y(k,D,U)}if(ee(D)||P(D))return D=vr(D,k.mode,U,null),D.return=k,D;if(typeof D.then=="function")return Y(k,Fu(D),U);if(D.$$typeof===dt)return Y(k,Ou(k,D),U);Qu(k,D)}return null}function B(k,D,U,K){var lt=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return lt!==null?null:E(k,D,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return U.key===lt?I(k,D,U,K):null;case z:return U.key===lt?j(k,D,U,K):null;case w:return lt=U._init,U=lt(U._payload),B(k,D,U,K)}if(ee(U)||P(U))return lt!==null?null:F(k,D,U,K,null);if(typeof U.then=="function")return B(k,D,Fu(U),K);if(U.$$typeof===dt)return B(k,D,Ou(k,U),K);Qu(k,U)}return null}function q(k,D,U,K,lt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(U)||null,E(D,k,""+K,lt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return k=k.get(K.key===null?U:K.key)||null,I(D,k,K,lt);case z:return k=k.get(K.key===null?U:K.key)||null,j(D,k,K,lt);case w:var Ct=K._init;return K=Ct(K._payload),q(k,D,U,K,lt)}if(ee(K)||P(K))return k=k.get(U)||null,F(D,k,K,lt,null);if(typeof K.then=="function")return q(k,D,U,Fu(K),lt);if(K.$$typeof===dt)return q(k,D,U,Ou(D,K),lt);Qu(D,K)}return null}function Et(k,D,U,K){for(var lt=null,Ct=null,ht=D,yt=D=0,je=null;ht!==null&&yt<U.length;yt++){ht.index>yt?(je=ht,ht=null):je=ht.sibling;var Ht=B(k,ht,U[yt],K);if(Ht===null){ht===null&&(ht=je);break}e&&ht&&Ht.alternate===null&&i(k,ht),D=d(Ht,D,yt),Ct===null?lt=Ht:Ct.sibling=Ht,Ct=Ht,ht=je}if(yt===U.length)return a(k,ht),Gt&&Tr(k,yt),lt;if(ht===null){for(;yt<U.length;yt++)ht=Y(k,U[yt],K),ht!==null&&(D=d(ht,D,yt),Ct===null?lt=ht:Ct.sibling=ht,Ct=ht);return Gt&&Tr(k,yt),lt}for(ht=o(ht);yt<U.length;yt++)je=q(ht,k,yt,U[yt],K),je!==null&&(e&&je.alternate!==null&&ht.delete(je.key===null?yt:je.key),D=d(je,D,yt),Ct===null?lt=je:Ct.sibling=je,Ct=je);return e&&ht.forEach(function(Cs){return i(k,Cs)}),Gt&&Tr(k,yt),lt}function pt(k,D,U,K){if(U==null)throw Error(r(151));for(var lt=null,Ct=null,ht=D,yt=D=0,je=null,Ht=U.next();ht!==null&&!Ht.done;yt++,Ht=U.next()){ht.index>yt?(je=ht,ht=null):je=ht.sibling;var Cs=B(k,ht,Ht.value,K);if(Cs===null){ht===null&&(ht=je);break}e&&ht&&Cs.alternate===null&&i(k,ht),D=d(Cs,D,yt),Ct===null?lt=Cs:Ct.sibling=Cs,Ct=Cs,ht=je}if(Ht.done)return a(k,ht),Gt&&Tr(k,yt),lt;if(ht===null){for(;!Ht.done;yt++,Ht=U.next())Ht=Y(k,Ht.value,K),Ht!==null&&(D=d(Ht,D,yt),Ct===null?lt=Ht:Ct.sibling=Ht,Ct=Ht);return Gt&&Tr(k,yt),lt}for(ht=o(ht);!Ht.done;yt++,Ht=U.next())Ht=q(ht,k,yt,Ht.value,K),Ht!==null&&(e&&Ht.alternate!==null&&ht.delete(Ht.key===null?yt:Ht.key),D=d(Ht,D,yt),Ct===null?lt=Ht:Ct.sibling=Ht,Ct=Ht);return e&&ht.forEach(function(IA){return i(k,IA)}),Gt&&Tr(k,yt),lt}function te(k,D,U,K){if(typeof U=="object"&&U!==null&&U.type===X&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case S:t:{for(var lt=U.key;D!==null;){if(D.key===lt){if(lt=U.type,lt===X){if(D.tag===7){a(k,D.sibling),K=h(D,U.props.children),K.return=k,k=K;break t}}else if(D.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===w&&Kp(lt)===D.type){a(k,D.sibling),K=h(D,U.props),Zo(K,U),K.return=k,k=K;break t}a(k,D);break}else i(k,D);D=D.sibling}U.type===X?(K=vr(U.props.children,k.mode,K,U.key),K.return=k,k=K):(K=Cu(U.type,U.key,U.props,null,k.mode,K),Zo(K,U),K.return=k,k=K)}return v(k);case z:t:{for(lt=U.key;D!==null;){if(D.key===lt)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(k,D.sibling),K=h(D,U.children||[]),K.return=k,k=K;break t}else{a(k,D);break}else i(k,D);D=D.sibling}K=Jh(U,k.mode,K),K.return=k,k=K}return v(k);case w:return lt=U._init,U=lt(U._payload),te(k,D,U,K)}if(ee(U))return Et(k,D,U,K);if(P(U)){if(lt=P(U),typeof lt!="function")throw Error(r(150));return U=lt.call(U),pt(k,D,U,K)}if(typeof U.then=="function")return te(k,D,Fu(U),K);if(U.$$typeof===dt)return te(k,D,Ou(k,U),K);Qu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(k,D.sibling),K=h(D,U),K.return=k,k=K):(a(k,D),K=Wh(U,k.mode,K),K.return=k,k=K),v(k)):a(k,D)}return function(k,D,U,K){try{$o=0;var lt=te(k,D,U,K);return Aa=null,lt}catch(ht){if(ht===Bo||ht===Mu)throw ht;var Ct=gn(29,ht,null,k.mode);return Ct.lanes=K,Ct.return=k,Ct}finally{}}}var Sa=Yp(!0),Xp=Yp(!1),Vn=Z(null),oi=null;function ds(e){var i=e.alternate;J(Oe,Oe.current&1),J(Vn,e),oi===null&&(i===null||_a.current!==null||i.memoizedState!==null)&&(oi=e)}function $p(e){if(e.tag===22){if(J(Oe,Oe.current),J(Vn,e),oi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(oi=e)}}else ms()}function ms(){J(Oe,Oe.current),J(Vn,Vn.current)}function Li(e){st(Vn),oi===e&&(oi=null),st(Oe)}var Oe=Z(0);function Ku(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ad(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Vf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Mf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=vn(),h=cs(o);h.payload=i,a!=null&&(h.callback=a),i=hs(e,h,o),i!==null&&(En(i,e,o),Ho(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=vn(),h=cs(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=hs(e,h,o),i!==null&&(En(i,e,o),Ho(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=vn(),o=cs(a);o.tag=2,i!=null&&(o.callback=i),i=hs(e,o,a),i!==null&&(En(i,e,a),Ho(i,e,a))}};function Zp(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Vo(a,o)||!Vo(h,d):!0}function Wp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Mf.enqueueReplaceState(i,i.state,null)}function Cr(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Yu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Jp(e){Yu(e)}function ty(e){console.error(e)}function ey(e){Yu(e)}function Xu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ny(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function kf(e,i,a){return a=cs(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(e,i)},a}function iy(e){return e=cs(e),e.tag=3,e}function sy(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){ny(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ny(i,a,o),typeof h!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function I1(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Uo(i,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 13:return oi===null?rd():a.alternate===null&&de===0&&(de=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===cf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),od(e,o,h)),!1;case 22:return a.flags|=65536,o===cf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),od(e,o,h)),!1}throw Error(r(435,a.tag))}return od(e,o,h),rd(),!1}if(Gt)return i=Vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==nf&&(e=Error(r(422),{cause:o}),Lo(xn(e,a)))):(o!==nf&&(i=Error(r(423),{cause:o}),Lo(xn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=xn(o,a),h=kf(e.stateNode,o,h),df(e,h),de!==4&&(de=2)),!1;var d=Error(r(520),{cause:o});if(d=xn(d,a),sl===null?sl=[d]:sl.push(d),de!==4&&(de=2),i===null)return!0;o=xn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=kf(a.stateNode,o,e),df(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Es===null||!Es.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=iy(h),sy(h,e,a,o),df(a,h),!1}a=a.return}while(a!==null);return!1}var ry=Error(r(461)),Le=!1;function He(e,i,a,o){i.child=e===null?Xp(i,null,a,o):Sa(i,e.child,a,o)}function ay(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return wr(i),o=_f(e,i,a,v,d,h),E=vf(),e!==null&&!Le?(Ef(e,i,h),Ui(e,i,h)):(Gt&&E&&tf(i),i.flags|=1,He(e,i,o,h),i.child)}function oy(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!Zh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ly(e,i,d,o,h)):(e=Cu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Hf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Vo,a(v,o)&&e.ref===i.ref)return Ui(e,i,h)}return i.flags|=1,e=Di(d,o),e.ref=i.ref,e.return=i,i.child=e}function ly(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Vo(d,o)&&e.ref===i.ref)if(Le=!1,i.pendingProps=o=d,Hf(e,h))(e.flags&131072)!==0&&(Le=!0);else return i.lanes=e.lanes,Ui(e,i,h)}return Pf(e,i,a,o,h)}function uy(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return cy(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vu(i,d!==null?d.cachePool:null),d!==null?lp(i,d):gf(),$p(i);else return i.lanes=i.childLanes=536870912,cy(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Vu(i,d.cachePool),lp(i,d),ms(),i.memoizedState=null):(e!==null&&Vu(i,null),gf(),ms());return He(e,i,h,a),i.child}function cy(e,i,a,o){var h=uf();return h=h===null?null:{parent:De._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Vu(i,null),gf(),$p(i),e!==null&&Uo(e,i,o,!0),null}function $u(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Pf(e,i,a,o,h){return wr(i),a=_f(e,i,a,o,void 0,h),o=vf(),e!==null&&!Le?(Ef(e,i,h),Ui(e,i,h)):(Gt&&o&&tf(i),i.flags|=1,He(e,i,a,h),i.child)}function hy(e,i,a,o,h,d){return wr(i),i.updateQueue=null,a=cp(i,o,a,h),up(e),o=vf(),e!==null&&!Le?(Ef(e,i,d),Ui(e,i,d)):(Gt&&o&&tf(i),i.flags|=1,He(e,i,a,d),i.child)}function fy(e,i,a,o,h){if(wr(i),i.stateNode===null){var d=da,v=a.contextType;typeof v=="object"&&v!==null&&(d=$e(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Mf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},hf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?$e(v):da,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Vf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Mf.enqueueReplaceState(d,d.state,null),Fo(i,o,d,h),Go(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,I=Cr(a,E);d.props=I;var j=d.context,F=a.contextType;v=da,typeof F=="object"&&F!==null&&(v=$e(F));var Y=a.getDerivedStateFromProps;F=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,F||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==v)&&Wp(i,d,o,v),us=!1;var B=i.memoizedState;d.state=B,Fo(i,o,d,h),Go(),j=i.memoizedState,E||B!==j||us?(typeof Y=="function"&&(Vf(i,a,Y,o),j=i.memoizedState),(I=us||Zp(i,a,I,o,B,j,v))?(F||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=v,o=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,ff(e,i),v=i.memoizedProps,F=Cr(a,v),d.props=F,Y=i.pendingProps,B=d.context,j=a.contextType,I=da,typeof j=="object"&&j!==null&&(I=$e(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Y||B!==I)&&Wp(i,d,o,I),us=!1,B=i.memoizedState,d.state=B,Fo(i,o,d,h),Go();var q=i.memoizedState;v!==Y||B!==q||us||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof E=="function"&&(Vf(i,a,E,o),q=i.memoizedState),(F=us||Zp(i,a,F,o,B,q,I)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,q,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,q,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),d.props=o,d.state=q,d.context=I,o=F):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,$u(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Sa(i,e.child,null,h),i.child=Sa(i,null,a,h)):He(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Ui(e,i,h),e}function dy(e,i,a,o){return Po(),i.flags|=256,He(e,i,a,o),i.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(e){return{baseLanes:e,cachePool:tp()}}function jf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function my(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Oe.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Gt){if(h?ds(i):ms(),Gt){var E=fe,I;if(I=E){t:{for(I=E,E=ai;I.nodeType!==8;){if(!E){E=null;break t}if(I=Gn(I.nextSibling),I===null){E=null;break t}}E=I}E!==null?(i.memoizedState={dehydrated:E,treeContext:Er!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},I=gn(18,null,null,0),I.stateNode=E,I.return=i,i.child=I,an=i,fe=null,I=!0):I=!1}I||Sr(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ad(E)?i.lanes=32:i.lanes=536870912,null;Li(i)}return E=o.children,o=o.fallback,h?(ms(),h=i.mode,E=Zu({mode:"hidden",children:E},h),o=vr(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Uf(a),h.childLanes=jf(e,v,a),i.memoizedState=Lf,o):(ds(i),zf(i,E))}if(I=e.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(d)i.flags&256?(ds(i),i.flags&=-257,i=Bf(e,i,a)):i.memoizedState!==null?(ms(),i.child=e.child,i.flags|=128,i=null):(ms(),h=o.fallback,E=i.mode,o=Zu({mode:"visible",children:o.children},E),h=vr(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Sa(i,e.child,null,a),o=i.child,o.memoizedState=Uf(a),o.childLanes=jf(e,v,a),i.memoizedState=Lf,i=h);else if(ds(i),Ad(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(r(419)),o.stack="",o.digest=v,Lo({value:o,source:null,stack:null}),i=Bf(e,i,a)}else if(Le||Uo(e,i,a,!1),v=(a&e.childLanes)!==0,Le||v){if(v=ie,v!==null&&(o=a&-a,o=(o&42)!==0?1:es(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==I.retryLane))throw I.retryLane=o,fa(e,o),En(v,e,o),ry;E.data==="$?"||rd(),i=Bf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,fe=Gn(E.nextSibling),an=i,Gt=!0,Ar=null,ai=!1,e!==null&&(Dn[On++]=Oi,Dn[On++]=Vi,Dn[On++]=Er,Oi=e.id,Vi=e.overflow,Er=i),i=zf(i,o.children),i.flags|=4096);return i}return h?(ms(),h=o.fallback,E=i.mode,I=e.child,j=I.sibling,o=Di(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,j!==null?h=Di(j,h):(h=vr(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Uf(a):(I=E.cachePool,I!==null?(j=De._currentValue,I=I.parent!==j?{parent:j,pool:j}:I):I=tp(),E={baseLanes:E.baseLanes|a,cachePool:I}),h.memoizedState=E,h.childLanes=jf(e,v,a),i.memoizedState=Lf,o):(ds(i),a=e.child,e=a.sibling,a=Di(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function zf(e,i){return i=Zu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Zu(e,i){return e=gn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Bf(e,i,a){return Sa(i,e.child,null,a),e=zf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function gy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),rf(e.return,i,a)}function qf(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function py(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(He(e,i,o.children,a),o=Oe.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gy(e,a,i);else if(e.tag===19)gy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Oe,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Ku(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),qf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Ku(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}qf(i,!0,a,null,d);break;case"together":qf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ui(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),vs|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Uo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Di(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Di(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Hf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function C1(e,i,a){switch(i.tag){case 3:Kt(i,i.stateNode.containerInfo),ls(i,De,e.memoizedState.cache),Po();break;case 27:case 5:qt(i);break;case 4:Kt(i,i.stateNode.containerInfo);break;case 10:ls(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(ds(i),i.flags|=128,null):(a&i.child.childLanes)!==0?my(e,i,a):(ds(i),e=Ui(e,i,a),e!==null?e.sibling:null);ds(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Uo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return py(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Oe,Oe.current),o)break;return null;case 22:case 23:return i.lanes=0,uy(e,i,a);case 24:ls(i,De,e.memoizedState.cache)}return Ui(e,i,a)}function yy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Le=!0;else{if(!Hf(e,a)&&(i.flags&128)===0)return Le=!1,C1(e,i,a);Le=(e.flags&131072)!==0}else Le=!1,Gt&&(i.flags&1048576)!==0&&Kg(i,Nu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Zh(o)?(e=Cr(o,e),i.tag=1,i=fy(null,i,o,e,a)):(i.tag=0,i=Pf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Mt){i.tag=11,i=ay(null,i,o,e,a);break t}else if(h===M){i.tag=14,i=oy(null,i,o,e,a);break t}}throw i=ve(o)||o,Error(r(306,i,""))}}return i;case 0:return Pf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Cr(o,i.pendingProps),fy(e,i,o,h,a);case 3:t:{if(Kt(i,i.stateNode.containerInfo),e===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,ff(e,i),Fo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ls(i,De,o),o!==d.cache&&af(i,[De],a,!0),Go(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=dy(e,i,o,a);break t}else if(o!==h){h=xn(Error(r(424)),i),Lo(h),i=dy(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(fe=Gn(e.firstChild),an=i,Gt=!0,Ar=null,ai=!0,a=Xp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Po(),o===h){i=Ui(e,i,a);break t}He(e,i,o,a)}i=i.child}return i;case 26:return $u(e,i),e===null?(a=T_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Gt||(a=i.type,e=i.pendingProps,o=hc(gt.current).createElement(a),o[Ce]=i,o[Te]=e,Fe(o,a,e),ge(o),i.stateNode=o):i.memoizedState=T_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return qt(i),e===null&&Gt&&(o=i.stateNode=__(i.type,i.pendingProps,gt.current),an=i,ai=!0,h=fe,Ss(i.type)?(Sd=h,fe=Gn(o.firstChild)):fe=h),He(e,i,i.pendingProps.children,a),$u(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Gt&&((h=o=fe)&&(o=nA(o,i.type,i.pendingProps,ai),o!==null?(i.stateNode=o,an=i,fe=Gn(o.firstChild),ai=!1,h=!0):h=!1),h||Sr(i)),qt(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,vd(h,d)?o=null:v!==null&&vd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=_f(e,i,E1,null,null,a),dl._currentValue=h),$u(e,i),He(e,i,o,a),i.child;case 6:return e===null&&Gt&&((e=a=fe)&&(a=iA(a,i.pendingProps,ai),a!==null?(i.stateNode=a,an=i,fe=null,e=!0):e=!1),e||Sr(i)),null;case 13:return my(e,i,a);case 4:return Kt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Sa(i,null,o,a):He(e,i,o,a),i.child;case 11:return ay(e,i,i.type,i.pendingProps,a);case 7:return He(e,i,i.pendingProps,a),i.child;case 8:return He(e,i,i.pendingProps.children,a),i.child;case 12:return He(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ls(i,i.type,o.value),He(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,wr(i),h=$e(h),o=o(h),i.flags|=1,He(e,i,o,a),i.child;case 14:return oy(e,i,i.type,i.pendingProps,a);case 15:return ly(e,i,i.type,i.pendingProps,a);case 19:return py(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Zu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Di(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return uy(e,i,a);case 24:return wr(i),o=$e(De),e===null?(h=uf(),h===null&&(h=ie,d=of(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},hf(i),ls(i,De,h)):((e.lanes&a)!==0&&(ff(e,i),Fo(i,null,null,a),Go()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ls(i,De,o)):(o=d.cache,ls(i,De,o),o!==h.cache&&af(i,[De],a,!0))),He(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ji(e){e.flags|=4}function _y(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!R_(i)){if(i=Vn.current,i!==null&&((Lt&4194048)===Lt?oi!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==oi))throw qo=cf,ep;e.flags|=8192}}function Wu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?go():536870912,e.lanes|=i,Ia|=i)}function Wo(e,i){if(!Gt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ue(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function x1(e,i,a){var o=i.pendingProps;switch(ef(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(i),null;case 1:return ue(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ki(De),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ko(i)?ji(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$g())),ue(i),null;case 26:return a=i.memoizedState,e===null?(ji(i),a!==null?(ue(i),_y(i,a)):(ue(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ji(i),ue(i),_y(i,a)):(ue(i),i.flags&=-16777217):(e.memoizedProps!==o&&ji(i),ue(i),i.flags&=-16777217),null;case 27:zt(i),a=gt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ji(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ue(i),null}e=ft.current,ko(i)?Yg(i):(e=__(h,o,a),i.stateNode=e,ji(i))}return ue(i),null;case 5:if(zt(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ji(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ue(i),null}if(e=ft.current,ko(i))Yg(i);else{switch(h=hc(gt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Ce]=i,e[Te]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Fe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ji(i)}}return ue(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ji(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(e=gt.current,ko(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=an,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||h_(e.nodeValue,a)),e||Sr(i)}else e=hc(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return ue(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ko(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ce]=i}else Po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ue(i),h=!1}else h=$g(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Li(i),i):(Li(i),null)}if(Li(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Wu(i,i.updateQueue),ue(i),null;case 4:return ut(),e===null&&md(i.stateNode.containerInfo),ue(i),null;case 10:return ki(i.type),ue(i),null;case 19:if(st(Oe),h=i.memoizedState,h===null)return ue(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)Wo(h,!1);else{if(de!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Ku(e),d!==null){for(i.flags|=128,Wo(h,!1),e=d.updateQueue,i.updateQueue=e,Wu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Qg(a,e),a=a.sibling;return J(Oe,Oe.current&1|2),i.child}e=e.sibling}h.tail!==null&&Sn()>ec&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Ku(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Wu(i,e),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Gt)return ue(i),null}else 2*Sn()-h.renderingStartTime>ec&&a!==536870912&&(i.flags|=128,o=!0,Wo(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Sn(),i.sibling=null,e=Oe.current,J(Oe,o?e&1|2:e&1),i):(ue(i),null);case 22:case 23:return Li(i),pf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ue(i),i.subtreeFlags&6&&(i.flags|=8192)):ue(i),a=i.updateQueue,a!==null&&Wu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&st(Rr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(De),ue(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function N1(e,i){switch(ef(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ki(De),ut(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return zt(i),null;case 13:if(Li(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Po()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return st(Oe),null;case 4:return ut(),null;case 10:return ki(i.type),null;case 22:case 23:return Li(i),pf(),e!==null&&st(Rr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ki(De),null;case 25:return null;default:return null}}function vy(e,i){switch(ef(i),i.tag){case 3:ki(De),ut();break;case 26:case 27:case 5:zt(i);break;case 4:ut();break;case 13:Li(i);break;case 19:st(Oe);break;case 10:ki(i.type);break;case 22:case 23:Li(i),pf(),e!==null&&st(Rr);break;case 24:ki(De)}}function Jo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){ne(i,i.return,E)}}function gs(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var I=a,j=E;try{j()}catch(F){ne(h,I,F)}}}o=o.next}while(o!==d)}}catch(F){ne(i,i.return,F)}}function Ey(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{op(i,a)}catch(o){ne(e,e.return,o)}}}function Ty(e,i,a){a.props=Cr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ne(e,i,o)}}function tl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){ne(e,i,h)}}function li(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){ne(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ne(e,i,h)}else a.current=null}function Ay(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){ne(e,e.return,h)}}function Gf(e,i,a){try{var o=e.stateNode;Z1(o,e.type,a,i),o[Te]=i}catch(h){ne(e,e.return,h)}}function Sy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ss(e.type)||e.tag===4}function Ff(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Sy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ss(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=cc));else if(o!==4&&(o===27&&Ss(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Qf(e,i,a),e=e.sibling;e!==null;)Qf(e,i,a),e=e.sibling}function Ju(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ss(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ju(e,i,a),e=e.sibling;e!==null;)Ju(e,i,a),e=e.sibling}function by(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Fe(i,o,a),i[Ce]=e,i[Te]=a}catch(d){ne(e,e.return,d)}}var zi=!1,ye=!1,Kf=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function D1(e,i){if(e=e.containerInfo,yd=yc,e=Pg(e),Gh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,I=-1,j=0,F=0,Y=e,B=null;e:for(;;){for(var q;Y!==a||h!==0&&Y.nodeType!==3||(E=v+h),Y!==d||o!==0&&Y.nodeType!==3||(I=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(q=Y.firstChild)!==null;)B=Y,Y=q;for(;;){if(Y===e)break e;if(B===a&&++j===h&&(E=v),B===d&&++F===o&&(I=v),(q=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=q}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(_d={focusedElem:e,selectionRange:a},yc=!1,Ue=i;Ue!==null;)if(i=Ue,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ue=e;else for(;Ue!==null;){switch(i=Ue,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Et=Cr(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){ne(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Td(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Ue=e;break}Ue=i.return}}function Ry(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ps(e,a),o&4&&Jo(5,a);break;case 1:if(ps(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){ne(a,a.return,v)}else{var h=Cr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ne(a,a.return,v)}}o&64&&Ey(a),o&512&&tl(a,a.return);break;case 3:if(ps(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{op(e,i)}catch(v){ne(a,a.return,v)}}break;case 27:i===null&&o&4&&by(a);case 26:case 5:ps(e,a),i===null&&o&4&&Ay(a),o&512&&tl(a,a.return);break;case 12:ps(e,a);break;case 13:ps(e,a),o&4&&xy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=z1.bind(null,a),sA(e,a))));break;case 22:if(o=a.memoizedState!==null||zi,!o){i=i!==null&&i.memoizedState!==null||ye,h=zi;var d=ye;zi=o,(ye=i)&&!d?ys(e,a,(a.subtreeFlags&8772)!==0):ps(e,a),zi=h,ye=d}break;case 30:break;default:ps(e,a)}}function Iy(e){var i=e.alternate;i!==null&&(e.alternate=null,Iy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ss(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var oe=null,ln=!1;function Bi(e,i,a){for(a=a.child;a!==null;)Cy(e,i,a),a=a.sibling}function Cy(e,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(he,a)}catch{}switch(a.tag){case 26:ye||li(a,i),Bi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ye||li(a,i);var o=oe,h=ln;Ss(a.type)&&(oe=a.stateNode,ln=!1),Bi(e,i,a),ul(a.stateNode),oe=o,ln=h;break;case 5:ye||li(a,i);case 6:if(o=oe,h=ln,oe=null,Bi(e,i,a),oe=o,ln=h,oe!==null)if(ln)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(d){ne(a,i,d)}else try{oe.removeChild(a.stateNode)}catch(d){ne(a,i,d)}break;case 18:oe!==null&&(ln?(e=oe,p_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),yl(e)):p_(oe,a.stateNode));break;case 4:o=oe,h=ln,oe=a.stateNode.containerInfo,ln=!0,Bi(e,i,a),oe=o,ln=h;break;case 0:case 11:case 14:case 15:ye||gs(2,a,i),ye||gs(4,a,i),Bi(e,i,a);break;case 1:ye||(li(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ty(a,i,o)),Bi(e,i,a);break;case 21:Bi(e,i,a);break;case 22:ye=(o=ye)||a.memoizedState!==null,Bi(e,i,a),ye=o;break;default:Bi(e,i,a)}}function xy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{yl(e)}catch(a){ne(i,i.return,a)}}function O1(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new wy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new wy),i;default:throw Error(r(435,e.tag))}}function Yf(e,i){var a=O1(e);i.forEach(function(o){var h=B1.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function pn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Ss(E.type)){oe=E.stateNode,ln=!1;break t}break;case 5:oe=E.stateNode,ln=!1;break t;case 3:case 4:oe=E.stateNode.containerInfo,ln=!0;break t}E=E.return}if(oe===null)throw Error(r(160));Cy(d,v,h),oe=null,ln=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ny(i,e),i=i.sibling}var Hn=null;function Ny(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(i,e),yn(e),o&4&&(gs(3,e,e.return),Jo(3,e),gs(5,e,e.return));break;case 1:pn(i,e),yn(e),o&512&&(ye||a===null||li(a,a.return)),o&64&&zi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Hn;if(pn(i,e),yn(e),o&512&&(ye||a===null||li(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ir]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Fe(d,o,a),d[Ce]=e,ge(d),o=d;break t;case"link":var v=b_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(o),Fe(d,o,a),h.head.appendChild(d);break;case"meta":if(v=b_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(o),Fe(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[Ce]=e,ge(d),o=d}e.stateNode=o}else w_(h,e.type,e.stateNode);else e.stateNode=S_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?w_(h,e.type,e.stateNode):S_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Gf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(i,e),yn(e),o&512&&(ye||a===null||li(a,a.return)),a!==null&&o&4&&Gf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,e),yn(e),o&512&&(ye||a===null||li(a,a.return)),e.flags&32){h=e.stateNode;try{wn(h,"")}catch(q){ne(e,e.return,q)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Gf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Kf=!0);break;case 6:if(pn(i,e),yn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(q){ne(e,e.return,q)}}break;case 3:if(mc=null,h=Hn,Hn=fc(i.containerInfo),pn(i,e),Hn=h,yn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{yl(i.containerInfo)}catch(q){ne(e,e.return,q)}Kf&&(Kf=!1,Dy(e));break;case 4:o=Hn,Hn=fc(e.stateNode.containerInfo),pn(i,e),yn(e),Hn=o;break;case 12:pn(i,e),yn(e);break;case 13:pn(i,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(td=Sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Yf(e,o)));break;case 22:h=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,j=zi,F=ye;if(zi=j||h,ye=F||I,pn(i,e),ye=F,zi=j,yn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||zi||ye||xr(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=I.stateNode;var Y=I.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){ne(I,I.return,q)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(q){ne(I,I.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Yf(e,a))));break;case 19:pn(i,e),yn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Yf(e,o)));break;case 30:break;case 21:break;default:pn(i,e),yn(e)}}function yn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Sy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Ff(e);Ju(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(wn(v,""),a.flags&=-33);var E=Ff(e);Ju(e,E,v);break;case 3:case 4:var I=a.stateNode.containerInfo,j=Ff(e);Qf(e,j,I);break;default:throw Error(r(161))}}catch(F){ne(e,e.return,F)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Dy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Dy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ps(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ry(e,i.alternate,i),i=i.sibling}function xr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:gs(4,i,i.return),xr(i);break;case 1:li(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ty(i,i.return,a),xr(i);break;case 27:ul(i.stateNode);case 26:case 5:li(i,i.return),xr(i);break;case 22:i.memoizedState===null&&xr(i);break;case 30:xr(i);break;default:xr(i)}e=e.sibling}}function ys(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:ys(h,d,a),Jo(4,d);break;case 1:if(ys(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){ne(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)ap(I[h],E)}catch(j){ne(o,o.return,j)}}a&&v&64&&Ey(d),tl(d,d.return);break;case 27:by(d);case 26:case 5:ys(h,d,a),a&&o===null&&v&4&&Ay(d),tl(d,d.return);break;case 12:ys(h,d,a);break;case 13:ys(h,d,a),a&&v&4&&xy(h,d);break;case 22:d.memoizedState===null&&ys(h,d,a),tl(d,d.return);break;case 30:break;default:ys(h,d,a)}i=i.sibling}}function Xf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&jo(a))}function $f(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jo(e))}function ui(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Oy(e,i,a,o),i=i.sibling}function Oy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ui(e,i,a,o),h&2048&&Jo(9,i);break;case 1:ui(e,i,a,o);break;case 3:ui(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&jo(e)));break;case 12:if(h&2048){ui(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ne(i,i.return,I)}}else ui(e,i,a,o);break;case 13:ui(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ui(e,i,a,o):el(e,i):d._visibility&2?ui(e,i,a,o):(d._visibility|=2,ba(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Xf(v,i);break;case 24:ui(e,i,a,o),h&2048&&$f(i.alternate,i);break;default:ui(e,i,a,o)}}function ba(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,I=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:ba(d,v,E,I,h),Jo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?ba(d,v,E,I,h):el(d,v):(F._visibility|=2,ba(d,v,E,I,h)),h&&j&2048&&Xf(v.alternate,v);break;case 24:ba(d,v,E,I,h),h&&j&2048&&$f(v.alternate,v);break;default:ba(d,v,E,I,h)}i=i.sibling}}function el(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:el(a,o),h&2048&&Xf(o.alternate,o);break;case 24:el(a,o),h&2048&&$f(o.alternate,o);break;default:el(a,o)}i=i.sibling}}var nl=8192;function wa(e){if(e.subtreeFlags&nl)for(e=e.child;e!==null;)Vy(e),e=e.sibling}function Vy(e){switch(e.tag){case 26:wa(e),e.flags&nl&&e.memoizedState!==null&&yA(Hn,e.memoizedState,e.memoizedProps);break;case 5:wa(e);break;case 3:case 4:var i=Hn;Hn=fc(e.stateNode.containerInfo),wa(e),Hn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=nl,nl=16777216,wa(e),nl=i):wa(e));break;default:wa(e)}}function My(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function il(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ue=o,Py(o,e)}My(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ky(e),e=e.sibling}function ky(e){switch(e.tag){case 0:case 11:case 15:il(e),e.flags&2048&&gs(9,e,e.return);break;case 3:il(e);break;case 12:il(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,tc(e)):il(e);break;default:il(e)}}function tc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ue=o,Py(o,e)}My(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:gs(8,i,i.return),tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,tc(i));break;default:tc(i)}e=e.sibling}}function Py(e,i){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:gs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:jo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ue=o;else t:for(a=e;Ue!==null;){o=Ue;var h=o.sibling,d=o.return;if(Iy(o),o===a){Ue=null;break t}if(h!==null){h.return=d,Ue=h;break t}Ue=d}}}var V1={getCacheForType:function(e){var i=$e(De),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},M1=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ie=null,xt=null,Lt=0,$t=0,_n=null,_s=!1,Ra=!1,Zf=!1,qi=0,de=0,vs=0,Nr=0,Wf=0,Mn=0,Ia=0,sl=null,un=null,Jf=!1,td=0,ec=1/0,nc=null,Es=null,Ge=0,Ts=null,Ca=null,xa=0,ed=0,nd=null,Ly=null,rl=0,id=null;function vn(){if((Xt&2)!==0&&Lt!==0)return Lt&-Lt;if(G.T!==null){var e=pa;return e!==0?e:cd()}return ns()}function Uy(){Mn===0&&(Mn=(Lt&536870912)===0||Gt?mo():536870912);var e=Vn.current;return e!==null&&(e.flags|=32),Mn}function En(e,i,a){(e===ie&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Na(e,0),As(e,Lt,Mn,!1)),Ei(e,a),((Xt&2)===0||e!==ie)&&(e===ie&&((Xt&2)===0&&(Nr|=a),de===4&&As(e,Lt,Mn,!1)),ci(e))}function jy(e,i,a){if((Xt&6)!==0)throw Error(r(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||nr(e,i),h=o?L1(e,i):ad(e,i,!0),d=o;do{if(h===0){Ra&&!o&&As(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!k1(a)){h=ad(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=sl;var I=E.current.memoizedState.isDehydrated;if(I&&(Na(E,v).flags|=256),v=ad(E,v,!1),v!==2){if(Zf&&!I){E.errorRecoveryDisabledLanes|=d,Nr|=d,h=4;break t}d=un,un=h,d!==null&&(un===null?un=d:un.push.apply(un,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Na(e,0),As(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:As(o,i,Mn,!_s);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=td+300-Sn(),10<h)){if(As(o,i,Mn,!_s),Kr(o,0,!0)!==0)break t;o.timeoutHandle=m_(zy.bind(null,o,a,un,nc,Jf,i,Mn,Nr,Ia,_s,d,2,-0,0),h);break t}zy(o,a,un,nc,Jf,i,Mn,Nr,Ia,_s,d,0,-0,0)}}break}while(!0);ci(e)}function zy(e,i,a,o,h,d,v,E,I,j,F,Y,B,q){if(e.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(fl={stylesheets:null,count:0,unsuspend:pA},Vy(i),Y=_A(),Y!==null)){e.cancelPendingCommit=Y(Ky.bind(null,e,i,d,a,o,h,v,E,I,F,1,B,q)),As(e,d,v,!j);return}Ky(e,i,d,a,o,h,v,E,I)}function k1(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!mn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function As(e,i,a,o){i&=~Wf,i&=~Nr,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-Xe(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Xn(e,a,i)}function ic(){return(Xt&6)===0?(al(0),!1):!0}function sd(){if(xt!==null){if($t===0)var e=xt.return;else e=xt,Mi=br=null,Tf(e),Aa=null,$o=0,e=xt;for(;e!==null;)vy(e.alternate,e),e=e.return;xt=null}}function Na(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,J1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),sd(),ie=e,xt=a=Di(e.current,null),Lt=i,$t=0,_n=null,_s=!1,Ra=nr(e,i),Zf=!1,Ia=Mn=Wf=Nr=vs=de=0,un=sl=null,Jf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Xe(o),d=1<<h;i|=e[h],o&=~d}return qi=i,wu(),a}function By(e,i){It=null,G.H=Gu,i===Bo||i===Mu?(i=sp(),$t=3):i===ep?(i=sp(),$t=4):$t=i===ry?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_n=i,xt===null&&(de=1,Xu(e,xn(i,e.current)))}function qy(){var e=G.H;return G.H=Gu,e===null?Gu:e}function Hy(){var e=G.A;return G.A=V1,e}function rd(){de=4,_s||(Lt&4194048)!==Lt&&Vn.current!==null||(Ra=!0),(vs&134217727)===0&&(Nr&134217727)===0||ie===null||As(ie,Lt,Mn,!1)}function ad(e,i,a){var o=Xt;Xt|=2;var h=qy(),d=Hy();(ie!==e||Lt!==i)&&(nc=null,Na(e,i)),i=!1;var v=de;t:do try{if($t!==0&&xt!==null){var E=xt,I=_n;switch($t){case 8:sd(),v=6;break t;case 3:case 2:case 9:case 6:Vn.current===null&&(i=!0);var j=$t;if($t=0,_n=null,Da(e,E,I,j),a&&Ra){v=0;break t}break;default:j=$t,$t=0,_n=null,Da(e,E,I,j)}}P1(),v=de;break}catch(F){By(e,F)}while(!0);return i&&e.shellSuspendCounter++,Mi=br=null,Xt=o,G.H=h,G.A=d,xt===null&&(ie=null,Lt=0,wu()),v}function P1(){for(;xt!==null;)Gy(xt)}function L1(e,i){var a=Xt;Xt|=2;var o=qy(),h=Hy();ie!==e||Lt!==i?(nc=null,ec=Sn()+500,Na(e,i)):Ra=nr(e,i);t:do try{if($t!==0&&xt!==null){i=xt;var d=_n;e:switch($t){case 1:$t=0,_n=null,Da(e,i,d,1);break;case 2:case 9:if(np(d)){$t=0,_n=null,Fy(i);break}i=function(){$t!==2&&$t!==9||ie!==e||($t=7),ci(e)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:np(d)?($t=0,_n=null,Fy(i)):($t=0,_n=null,Da(e,i,d,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var E=xt;if(!v||R_(v)){$t=0,_n=null;var I=E.sibling;if(I!==null)xt=I;else{var j=E.return;j!==null?(xt=j,sc(j)):xt=null}break e}}$t=0,_n=null,Da(e,i,d,5);break;case 6:$t=0,_n=null,Da(e,i,d,6);break;case 8:sd(),de=6;break t;default:throw Error(r(462))}}U1();break}catch(F){By(e,F)}while(!0);return Mi=br=null,G.H=o,G.A=h,Xt=a,xt!==null?0:(ie=null,Lt=0,wu(),de)}function U1(){for(;xt!==null&&!uo();)Gy(xt)}function Gy(e){var i=yy(e.alternate,e,qi);e.memoizedProps=e.pendingProps,i===null?sc(e):xt=i}function Fy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=hy(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=hy(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Tf(i);default:vy(a,i),i=xt=Qg(i,qi),i=yy(a,i,qi)}e.memoizedProps=e.pendingProps,i===null?sc(e):xt=i}function Da(e,i,a,o){Mi=br=null,Tf(i),Aa=null,$o=0;var h=i.return;try{if(I1(e,h,i,a,Lt)){de=1,Xu(e,xn(a,e.current)),xt=null;return}}catch(d){if(h!==null)throw xt=h,d;de=1,Xu(e,xn(a,e.current)),xt=null;return}i.flags&32768?(Gt||o===1?e=!0:Ra||(Lt&536870912)!==0?e=!1:(_s=e=!0,(o===2||o===9||o===3||o===6)&&(o=Vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Qy(i,e)):sc(i)}function sc(e){var i=e;do{if((i.flags&32768)!==0){Qy(i,_s);return}e=i.return;var a=x1(i.alternate,i,qi);if(a!==null){xt=a;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=e}while(i!==null);de===0&&(de=5)}function Qy(e,i){do{var a=N1(e.alternate,e);if(a!==null){a.flags&=32767,xt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){xt=e;return}xt=e=a}while(e!==null);de=6,xt=null}function Ky(e,i,a,o,h,d,v,E,I){e.cancelPendingCommit=null;do rc();while(Ge!==0);if((Xt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Xh,po(e,a,d,v,E,I),e===ie&&(xt=ie=null,Lt=0),Ca=i,Ts=e,xa=a,ed=d,nd=h,Ly=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,q1(Ws,function(){return Wy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=nt.p,nt.p=2,v=Xt,Xt|=4;try{D1(e,i,a)}finally{Xt=v,nt.p=h,G.T=o}}Ge=1,Yy(),Xy(),$y()}}function Yy(){if(Ge===1){Ge=0;var e=Ts,i=Ca,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{Ny(i,e);var d=_d,v=Pg(e.containerInfo),E=d.focusedElem,I=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&kg(E.ownerDocument.documentElement,E)){if(I!==null&&Gh(E)){var j=I.start,F=I.end;if(F===void 0&&(F=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(F,E.value.length);else{var Y=E.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var q=B.getSelection(),Et=E.textContent.length,pt=Math.min(I.start,Et),te=I.end===void 0?pt:Math.min(I.end,Et);!q.extend&&pt>te&&(v=te,te=pt,pt=v);var k=Mg(E,pt),D=Mg(E,te);if(k&&D&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var U=Y.createRange();U.setStart(k.node,k.offset),q.removeAllRanges(),pt>te?(q.addRange(U),q.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),q.addRange(U))}}}}for(Y=[],q=E;q=q.parentNode;)q.nodeType===1&&Y.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var K=Y[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}yc=!!yd,_d=yd=null}finally{Xt=h,nt.p=o,G.T=a}}e.current=i,Ge=2}}function Xy(){if(Ge===2){Ge=0;var e=Ts,i=Ca,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=nt.p;nt.p=2;var h=Xt;Xt|=4;try{Ry(e,i.alternate,i)}finally{Xt=h,nt.p=o,G.T=a}}Ge=3}}function $y(){if(Ge===4||Ge===3){Ge=0,tu();var e=Ts,i=Ca,a=xa,o=Ly;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ge=5:(Ge=0,Ca=Ts=null,Zy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Es=null),Yr(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(he,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=nt.p,nt.p=2,G.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{G.T=i,nt.p=h}}(xa&3)!==0&&rc(),ci(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===id?rl++:(rl=0,id=e):rl=0,al(0)}}function Zy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,jo(i)))}function rc(e){return Yy(),Xy(),$y(),Wy()}function Wy(){if(Ge!==5)return!1;var e=Ts,i=ed;ed=0;var a=Yr(xa),o=G.T,h=nt.p;try{nt.p=32>a?32:a,G.T=null,a=nd,nd=null;var d=Ts,v=xa;if(Ge=0,Ca=Ts=null,xa=0,(Xt&6)!==0)throw Error(r(331));var E=Xt;if(Xt|=4,ky(d.current),Oy(d,d.current,v,a),Xt=E,al(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(he,d)}catch{}return!0}finally{nt.p=h,G.T=o,Zy(e,i)}}function Jy(e,i,a){i=xn(a,i),i=kf(e.stateNode,i,2),e=hs(e,i,2),e!==null&&(Ei(e,2),ci(e))}function ne(e,i,a){if(e.tag===3)Jy(e,e,a);else for(;i!==null;){if(i.tag===3){Jy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Es===null||!Es.has(o))){e=xn(a,e),a=iy(2),o=hs(i,a,2),o!==null&&(sy(a,o,i,e),Ei(o,2),ci(o));break}}i=i.return}}function od(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new M1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Zf=!0,h.add(a),e=j1.bind(null,e,i,a),i.then(e,e))}function j1(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(Lt&a)===a&&(de===4||de===3&&(Lt&62914560)===Lt&&300>Sn()-td?(Xt&2)===0&&Na(e,0):Wf|=a,Ia===Lt&&(Ia=0)),ci(e)}function t_(e,i){i===0&&(i=go()),e=fa(e,i),e!==null&&(Ei(e,i),ci(e))}function z1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),t_(e,a)}function B1(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),t_(e,a)}function q1(e,i){return Un(e,i)}var ac=null,Oa=null,ld=!1,oc=!1,ud=!1,Dr=0;function ci(e){e!==Oa&&e.next===null&&(Oa===null?ac=Oa=e:Oa=Oa.next=e),oc=!0,ld||(ld=!0,G1())}function al(e,i){if(!ud&&oc){ud=!0;do for(var a=!1,o=ac;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Xe(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,s_(o,d))}else d=Lt,d=Kr(o,o===ie?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||nr(o,d)||(a=!0,s_(o,d));o=o.next}while(a);ud=!1}}function H1(){e_()}function e_(){oc=ld=!1;var e=0;Dr!==0&&(W1()&&(e=Dr),Dr=0);for(var i=Sn(),a=null,o=ac;o!==null;){var h=o.next,d=n_(o,i);d===0?(o.next=null,a===null?ac=h:a.next=h,h===null&&(Oa=a)):(a=o,(e!==0||(d&3)!==0)&&(oc=!0)),o=h}al(e)}function n_(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Xe(d),E=1<<v,I=h[v];I===-1?((E&a)===0||(E&o)!==0)&&(h[v]=fo(E,i)):I<=i&&(e.expiredLanes|=E),d&=~E}if(i=ie,a=Lt,a=Kr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zs(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||nr(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Zs(o),Yr(a)){case 2:case 8:a=Fr;break;case 32:a=Ws;break;case 268435456:a=Qr;break;default:a=Ws}return o=i_.bind(null,e),a=Un(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Zs(o),e.callbackPriority=2,e.callbackNode=null,2}function i_(e,i){if(Ge!==0&&Ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(rc()&&e.callbackNode!==a)return null;var o=Lt;return o=Kr(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(jy(e,o,i),n_(e,Sn()),e.callbackNode!=null&&e.callbackNode===a?i_.bind(null,e):null)}function s_(e,i){if(rc())return null;jy(e,i,!0)}function G1(){tA(function(){(Xt&6)!==0?Un(co,H1):e_()})}function cd(){return Dr===0&&(Dr=mo()),Dr}function r_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ta(""+e)}function a_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function F1(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=r_((h[Te]||null).action),v=o.submitter;v&&(i=(i=v[Te]||null)?r_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new ea("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Dr!==0){var I=v?a_(h,v):new FormData(h);Nf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=v?a_(h,v):new FormData(h),Nf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var hd=0;hd<Yh.length;hd++){var fd=Yh[hd],Q1=fd.toLowerCase(),K1=fd[0].toUpperCase()+fd.slice(1);qn(Q1,"on"+K1)}qn(jg,"onAnimationEnd"),qn(zg,"onAnimationIteration"),qn(Bg,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(c1,"onTransitionRun"),qn(h1,"onTransitionStart"),qn(f1,"onTransitionCancel"),qn(qg,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function o_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],I=E.instance,j=E.currentTarget;if(E=E.listener,I!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(F){Yu(F)}h.currentTarget=null,d=I}else for(v=0;v<o.length;v++){if(E=o[v],I=E.instance,j=E.currentTarget,E=E.listener,I!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(F){Yu(F)}h.currentTarget=null,d=I}}}}function Nt(e,i){var a=i[_o];a===void 0&&(a=i[_o]=new Set);var o=e+"__bubble";a.has(o)||(l_(i,e,2,!1),a.add(o))}function dd(e,i,a){var o=0;i&&(o|=4),l_(a,e,o,i)}var lc="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[lc]){e[lc]=!0,vo.forEach(function(a){a!=="selectionchange"&&(Y1.has(a)||dd(a,!1,e),dd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[lc]||(i[lc]=!0,dd("selectionchange",!1,i))}}function l_(e,i,a,o){switch(O_(i)){case 2:var h=TA;break;case 8:h=AA;break;default:h=Cd}a=h.bind(null,i,a,e),h=void 0,!In||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function gd(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ti(E),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){o=d=v;continue t}E=E.parentNode}}o=o.return}cu(function(){var j=d,F=Rn(a),Y=[];t:{var B=Hg.get(e);if(B!==void 0){var q=ea,Et=e;switch(e){case"keypress":if(ei(a)===0)break t;case"keydown":case"keyup":q=oa;break;case"focusin":Et="focus",q=sa;break;case"focusout":Et="blur",q=sa;break;case"beforeblur":case"afterblur":q=sa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=_u;break;case jg:case zg:case Bg:q=ra;break;case qg:q=Eu;break;case"scroll":case"scrollend":q=hu;break;case"wheel":q=la;break;case"copy":case"cut":case"paste":q=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Do;break;case"toggle":case"beforetoggle":q=Au}var pt=(i&4)!==0,te=!pt&&(e==="scroll"||e==="scrollend"),k=pt?B!==null?B+"Capture":null:B;pt=[];for(var D=j,U;D!==null;){var K=D;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||k===null||(K=cr(D,k),K!=null&&pt.push(ll(D,K,U))),te)break;D=D.return}0<pt.length&&(B=new q(B,Et,null,a,F),Y.push({event:B,listeners:pt}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",B&&a!==wi&&(Et=a.relatedTarget||a.fromElement)&&(Ti(Et)||Et[bn]))break t;if((q||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,q?(Et=a.relatedTarget||a.toElement,q=j,Et=Et?Ti(Et):null,Et!==null&&(te=c(Et),pt=Et.tag,Et!==te||pt!==5&&pt!==27&&pt!==6)&&(Et=null)):(q=null,Et=j),q!==Et)){if(pt=Cn,K="onMouseLeave",k="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Do,K="onPointerLeave",k="onPointerEnter",D="pointer"),te=q==null?B:Zn(q),U=Et==null?B:Zn(Et),B=new pt(K,D+"leave",q,a,F),B.target=te,B.relatedTarget=U,K=null,Ti(F)===j&&(pt=new pt(k,D+"enter",Et,a,F),pt.target=U,pt.relatedTarget=te,K=pt),te=K,q&&Et)e:{for(pt=q,k=Et,D=0,U=pt;U;U=Va(U))D++;for(U=0,K=k;K;K=Va(K))U++;for(;0<D-U;)pt=Va(pt),D--;for(;0<U-D;)k=Va(k),U--;for(;D--;){if(pt===k||k!==null&&pt===k.alternate)break e;pt=Va(pt),k=Va(k)}pt=null}else pt=null;q!==null&&u_(Y,B,q,pt,!1),Et!==null&&te!==null&&u_(Y,te,Et,pt,!0)}}t:{if(B=j?Zn(j):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var lt=Cg;else if(Ne(B))if(xg)lt=o1;else{lt=r1;var Ct=s1}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&bo(j.elementType)&&(lt=Cg):lt=a1;if(lt&&(lt=lt(e,j))){Ni(Y,lt,a,F);break t}Ct&&Ct(e,B,j),e==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&as(B,"number",B.value)}switch(Ct=j?Zn(j):window,e){case"focusin":(Ne(Ct)||Ct.contentEditable==="true")&&(ua=Ct,Fh=j,Mo=null);break;case"focusout":Mo=Fh=ua=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,Lg(Y,a,F);break;case"selectionchange":if(u1)break;case"keydown":case"keyup":Lg(Y,a,F)}var ht;if(si)t:{switch(e){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else kt?H(e,a)&&(yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(yt="onCompositionStart");yt&&(_&&a.locale!=="ko"&&(kt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&kt&&(ht=Ro()):(ti=F,os="value"in ti?ti.value:ti.textContent,kt=!0)),Ct=uc(j,yt),0<Ct.length&&(yt=new xo(yt,e,null,a,F),Y.push({event:yt,listeners:Ct}),ht?yt.data=ht:(ht=et(a),ht!==null&&(yt.data=ht)))),(ht=m?xe(e,a):Pt(e,a))&&(yt=uc(j,"onBeforeInput"),0<yt.length&&(Ct=new xo("onBeforeInput","beforeinput",null,a,F),Y.push({event:Ct,listeners:yt}),Ct.data=ht)),F1(Y,e,j,a,F)}o_(Y,i)})}function ll(e,i,a){return{instance:e,listener:i,currentTarget:a}}function uc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=cr(e,a),h!=null&&o.unshift(ll(e,h,d)),h=cr(e,i),h!=null&&o.push(ll(e,h,d))),e.tag===3)return o;e=e.return}return[]}function Va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u_(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,I=E.alternate,j=E.stateNode;if(E=E.tag,I!==null&&I===o)break;E!==5&&E!==26&&E!==27||j===null||(I=j,h?(j=cr(a,d),j!=null&&v.unshift(ll(a,j,I))):h||(j=cr(a,d),j!=null&&v.push(ll(a,j,I)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var X1=/\r\n?/g,$1=/\u0000|\uFFFD/g;function c_(e){return(typeof e=="string"?e:""+e).replace(X1,`
`).replace($1,"")}function h_(e,i){return i=c_(i),c_(e)===i}function cc(){}function Jt(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||wn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&wn(e,""+o);break;case"className":Wn(e,"class",o);break;case"tabIndex":Wn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(e,a,o);break;case"style":So(e,o,d);break;case"data":if(i!=="object"){Wn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Jt(e,i,"name",h.name,h,null),Jt(e,i,"formEncType",h.formEncType,h,null),Jt(e,i,"formMethod",h.formMethod,h,null),Jt(e,i,"formTarget",h.formTarget,h,null)):(Jt(e,i,"encType",h.encType,h,null),Jt(e,i,"method",h.method,h,null),Jt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=cc);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ta(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),rs(e,"popover",o);break;case"xlinkActuate":Be(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Be(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Be(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Be(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Be(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Be(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Be(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Be(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Be(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rs(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uh.get(a)||a,rs(e,a,o))}}function pd(e,i,a,o,h,d){switch(a){case"style":So(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?wn(e,o):(typeof o=="number"||typeof o=="bigint")&&wn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Te]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):rs(e,a,o)}}}function Fe(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(e,i,d,v,a,null)}}h&&Jt(e,i,"srcSet",a.srcSet,a,null),o&&Jt(e,i,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=d=v=h=null,I=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":h=F;break;case"type":v=F;break;case"checked":I=F;break;case"defaultChecked":j=F;break;case"value":d=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:Jt(e,i,o,F,a,null)}}or(e,d,E,I,j,v,h,!1),Jr(e);return;case"select":Nt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Jt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!o,i!=null?bi(e,!!o,i,!1):a!=null&&bi(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Jt(e,i,v,E,a,null)}lr(e,o,h,d),Jr(e);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Jt(e,i,I,o,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<ol.length;o++)Nt(ol[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(e,i,j,o,a,null)}return;default:if(bo(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&pd(e,i,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Jt(e,i,E,o,a,null))}function Z1(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,I=null,j=null,F=null;for(q in a){var Y=a[q];if(a.hasOwnProperty(q)&&Y!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":I=Y;default:o.hasOwnProperty(q)||Jt(e,i,q,null,o,Y)}}for(var B in o){var q=o[B];if(Y=a[B],o.hasOwnProperty(B)&&(q!=null||Y!=null))switch(B){case"type":d=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":F=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==Y&&Jt(e,i,B,q,o,Y)}}dn(e,v,E,I,j,F,d,h);return;case"select":q=v=E=B=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":q=I;default:o.hasOwnProperty(d)||Jt(e,i,d,null,o,I)}for(h in o)if(d=o[h],I=a[h],o.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":B=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==I&&Jt(e,i,h,d,o,I)}i=E,a=v,o=q,B!=null?bi(e,!!a,B,!1):!!o!=!!a&&(i!=null?bi(e,!!a,i,!0):bi(e,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Jt(e,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":B=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Jt(e,i,v,h,o,d)}Zt(e,B,q);return;case"option":for(var Et in a)if(B=a[Et],a.hasOwnProperty(Et)&&B!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Jt(e,i,Et,null,o,B)}for(I in o)if(B=o[I],q=a[I],o.hasOwnProperty(I)&&B!==q&&(B!=null||q!=null))switch(I){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Jt(e,i,I,B,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)B=a[pt],a.hasOwnProperty(pt)&&B!=null&&!o.hasOwnProperty(pt)&&Jt(e,i,pt,null,o,B);for(j in o)if(B=o[j],q=a[j],o.hasOwnProperty(j)&&B!==q&&(B!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:Jt(e,i,j,B,o,q)}return;default:if(bo(i)){for(var te in a)B=a[te],a.hasOwnProperty(te)&&B!==void 0&&!o.hasOwnProperty(te)&&pd(e,i,te,void 0,o,B);for(F in o)B=o[F],q=a[F],!o.hasOwnProperty(F)||B===q||B===void 0&&q===void 0||pd(e,i,F,B,o,q);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!o.hasOwnProperty(k)&&Jt(e,i,k,null,o,B);for(Y in o)B=o[Y],q=a[Y],!o.hasOwnProperty(Y)||B===q||B==null&&q==null||Jt(e,i,Y,B,o,q)}var yd=null,_d=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function f_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function vd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ed=null;function W1(){var e=window.event;return e&&e.type==="popstate"?e===Ed?!1:(Ed=e,!0):(Ed=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,tA=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(e){return g_.resolve(null).then(e).catch(eA)}:m_;function eA(e){setTimeout(function(){throw e})}function Ss(e){return e==="head"}function p_(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ul(v.documentElement),a&2&&ul(v.body),a&4)for(a=v.head,ul(a),v=a.firstChild;v;){var E=v.nextSibling,I=v.nodeName;v[ir]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),yl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);yl(i)}function Td(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Td(a),ss(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function nA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ir])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function iA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function Ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function sA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Sd=null;function y_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function __(e,i,a){switch(i=hc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function ul(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ss(e)}var kn=new Map,v_=new Set;function fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hi=nt.d;nt.d={f:rA,r:aA,D:oA,C:lA,L:uA,m:cA,X:fA,S:hA,M:dA};function rA(){var e=Hi.f(),i=ic();return e||i}function aA(e){var i=$n(e);i!==null&&i.tag===5&&i.type==="form"?jp(i):Hi.r(e)}var Ma=typeof document>"u"?null:document;function E_(e,i,a){var o=Ma;if(o&&typeof i=="string"&&i){var h=Ae(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),v_.has(h)||(v_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Fe(i,"link",e),ge(i),o.head.appendChild(i)))}}function oA(e){Hi.D(e),E_("dns-prefetch",e,null)}function lA(e,i){Hi.C(e,i),E_("preconnect",e,i)}function uA(e,i,a){Hi.L(e,i,a);var o=Ma;if(o&&e&&i){var h='link[rel="preload"][as="'+Ae(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ae(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ae(a.imageSizes)+'"]')):h+='[href="'+Ae(e)+'"]';var d=h;switch(i){case"style":d=ka(e);break;case"script":d=Pa(e)}kn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),kn.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(cl(d))||i==="script"&&o.querySelector(hl(d))||(i=o.createElement("link"),Fe(i,"link",e),ge(i),o.head.appendChild(i)))}}function cA(e,i){Hi.m(e,i);var a=Ma;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Ae(o)+'"][href="'+Ae(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Pa(e)}if(!kn.has(d)&&(e=T({rel:"modulepreload",href:e},i),kn.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(d)))return}o=a.createElement("link"),Fe(o,"link",e),ge(o),a.head.appendChild(o)}}}function hA(e,i,a){Hi.S(e,i,a);var o=Ma;if(o&&e){var h=nn(o).hoistableStyles,d=ka(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(cl(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=kn.get(d))&&bd(e,a);var I=v=o.createElement("link");ge(I),Fe(I,"link",e),I._p=new Promise(function(j,F){I.onload=j,I.onerror=F}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function fA(e,i){Hi.X(e,i);var a=Ma;if(a&&e){var o=nn(a).hoistableScripts,h=Pa(e),d=o.get(h);d||(d=a.querySelector(hl(h)),d||(e=T({src:e,async:!0},i),(i=kn.get(h))&&wd(e,i),d=a.createElement("script"),ge(d),Fe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function dA(e,i){Hi.M(e,i);var a=Ma;if(a&&e){var o=nn(a).hoistableScripts,h=Pa(e),d=o.get(h);d||(d=a.querySelector(hl(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=kn.get(h))&&wd(e,i),d=a.createElement("script"),ge(d),Fe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function T_(e,i,a,o){var h=(h=gt.current)?fc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ka(a.href),a=nn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ka(a.href);var d=nn(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(cl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),kn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(e,a),d||mA(h,e,a,v.state))),i&&o===null)throw Error(r(528,""));return v}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Pa(a),a=nn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ka(e){return'href="'+Ae(e)+'"'}function cl(e){return'link[rel="stylesheet"]['+e+"]"}function A_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function mA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Fe(i,"link",a),ge(i),e.head.appendChild(i))}function Pa(e){return'[src="'+Ae(e)+'"]'}function hl(e){return"script[async]"+e}function S_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+Ae(a.href)+'"]');if(o)return i.instance=o,ge(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ge(o),Fe(o,"style",h),dc(o,a.precedence,e),i.instance=o;case"stylesheet":h=ka(a.href);var d=e.querySelector(cl(h));if(d)return i.state.loading|=4,i.instance=d,ge(d),d;o=A_(a),(h=kn.get(h))&&bd(o,h),d=(e.ownerDocument||e).createElement("link"),ge(d);var v=d;return v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Fe(d,"link",o),i.state.loading|=4,dc(d,a.precedence,e),i.instance=d;case"script":return d=Pa(a.src),(h=e.querySelector(hl(d)))?(i.instance=h,ge(h),h):(o=a,(h=kn.get(d))&&(o=T({},a),wd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),Fe(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,dc(o,a.precedence,e));return i.instance}function dc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function bd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function wd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var mc=null;function b_(e,i,a){if(mc===null){var o=new Map,h=mc=new Map;h.set(a,o)}else h=mc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ir]||d[Ce]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function w_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function gA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function R_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var fl=null;function pA(){}function yA(e,i,a){if(fl===null)throw Error(r(475));var o=fl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ka(a.href),d=e.querySelector(cl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=gc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,ge(d);return}d=e.ownerDocument||e,a=A_(a),(h=kn.get(h))&&bd(a,h),d=d.createElement("link"),ge(d);var v=d;v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Fe(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=gc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function _A(){if(fl===null)throw Error(r(475));var e=fl;return e.stylesheets&&e.count===0&&Rd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Rd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function gc(){if(this.count--,this.count===0){if(this.stylesheets)Rd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pc=null;function Rd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pc=new Map,i.forEach(vA,e),pc=null,gc.call(e))}function vA(e,i){if(!(i.state.loading&4)){var a=pc.get(e);if(a)var o=a.get(null);else{a=new Map,pc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=gc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var dl={$$typeof:dt,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function EA(e,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function I_(e,i,a,o,h,d,v,E,I,j,F,Y){return e=new EA(e,i,a,v,E,I,j,Y),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),e.current=d,d.stateNode=e,i=of(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},hf(d),e}function C_(e){return e?(e=da,e):da}function x_(e,i,a,o,h,d){h=C_(h),o.context===null?o.context=h:o.pendingContext=h,o=cs(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=hs(e,o,i),a!==null&&(En(a,e,i),Ho(a,e,i))}function N_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Id(e,i){N_(e,i),(e=e.alternate)&&N_(e,i)}function D_(e){if(e.tag===13){var i=fa(e,67108864);i!==null&&En(i,e,67108864),Id(e,67108864)}}var yc=!0;function TA(e,i,a,o){var h=G.T;G.T=null;var d=nt.p;try{nt.p=2,Cd(e,i,a,o)}finally{nt.p=d,G.T=h}}function AA(e,i,a,o){var h=G.T;G.T=null;var d=nt.p;try{nt.p=8,Cd(e,i,a,o)}finally{nt.p=d,G.T=h}}function Cd(e,i,a,o){if(yc){var h=xd(o);if(h===null)gd(e,i,o,_c,a),V_(e,o);else if(bA(h,e,i,a,o))o.stopPropagation();else if(V_(e,o),i&4&&-1<SA.indexOf(e)){for(;h!==null;){var d=$n(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=jn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var I=1<<31-Xe(v);E.entanglements[1]|=I,v&=~I}ci(d),(Xt&6)===0&&(ec=Sn()+500,al(0))}}break;case 13:E=fa(d,2),E!==null&&En(E,d,2),ic(),Id(d,2)}if(d=xd(o),d===null&&gd(e,i,o,_c,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else gd(e,i,o,null,a)}}function xd(e){return e=Rn(e),Nd(e)}var _c=null;function Nd(e){if(_c=null,e=Ti(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return _c=e,null}function O_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oh()){case co:return 2;case Fr:return 8;case Ws:case Vh:return 32;case Qr:return 268435456;default:return 32}default:return 32}}var Dd=!1,bs=null,ws=null,Rs=null,ml=new Map,gl=new Map,Is=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V_(e,i){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":ml.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(i.pointerId)}}function pl(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=$n(i),i!==null&&D_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function bA(e,i,a,o,h){switch(i){case"focusin":return bs=pl(bs,e,i,a,o,h),!0;case"dragenter":return ws=pl(ws,e,i,a,o,h),!0;case"mouseover":return Rs=pl(Rs,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return ml.set(d,pl(ml.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,gl.set(d,pl(gl.get(d)||null,e,i,a,o,h)),!0}return!1}function M_(e){var i=Ti(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,iu(e.priority,function(){if(a.tag===13){var o=vn();o=es(o);var h=fa(a,o);h!==null&&En(h,a,o),Id(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=xd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);wi=o,a.target.dispatchEvent(o),wi=null}else return i=$n(a),i!==null&&D_(i),e.blockedOn=a,!1;i.shift()}return!0}function k_(e,i,a){vc(e)&&a.delete(i)}function wA(){Dd=!1,bs!==null&&vc(bs)&&(bs=null),ws!==null&&vc(ws)&&(ws=null),Rs!==null&&vc(Rs)&&(Rs=null),ml.forEach(k_),gl.forEach(k_)}function Ec(e,i){e.blockedOn===i&&(e.blockedOn=null,Dd||(Dd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wA)))}var Tc=null;function P_(e){Tc!==e&&(Tc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Tc===e&&(Tc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Nd(o||a)===null)continue;break}var d=$n(a);d!==null&&(e.splice(i,3),i-=3,Nf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function yl(e){function i(I){return Ec(I,e)}bs!==null&&Ec(bs,e),ws!==null&&Ec(ws,e),Rs!==null&&Ec(Rs,e),ml.forEach(i),gl.forEach(i);for(var a=0;a<Is.length;a++){var o=Is[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Is.length&&(a=Is[0],a.blockedOn===null);)M_(a),a.blockedOn===null&&Is.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Te]||null;if(typeof d=="function")v||P_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Te]||null)E=v.formAction;else if(Nd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),P_(a)}}}function Od(e){this._internalRoot=e}Ac.prototype.render=Od.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=vn();x_(a,o,e,i,null,null)},Ac.prototype.unmount=Od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;x_(e.current,2,null,e,null,null),ic(),i[bn]=null}};function Ac(e){this._internalRoot=e}Ac.prototype.unstable_scheduleHydration=function(e){if(e){var i=ns();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Is.length&&i!==0&&i<Is[a].priority;a++);Is.splice(a,0,e),a===0&&M_(e)}};var L_=t.version;if(L_!=="19.1.1")throw Error(r(527,L_,"19.1.1"));nt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var RA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{he=Sc.inject(RA),Yt=Sc}catch{}}return vl.createRoot=function(e,i){if(!l(e))throw Error(r(299));var a=!1,o="",h=Jp,d=ty,v=ey,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=I_(e,1,!1,null,null,a,o,h,d,v,E,null),e[bn]=i.current,md(e),new Od(i)},vl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(r(299));var o=!1,h="",d=Jp,v=ty,E=ey,I=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=I_(e,1,!0,i,a??null,o,h,d,v,E,I,j),i.context=C_(null),a=i.current,o=vn(),o=es(o),h=cs(o),h.callback=null,hs(a,h,o),a=o,i.current.lanes=a,Ei(i,a),ci(i),e[bn]=i.current,md(e),new Ac(i)},vl.version="19.1.1",vl}var K_;function LA(){if(K_)return kd.exports;K_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),kd.exports=PA(),kd.exports}var UA=LA();const jA=bv(UA),zA=()=>{};var Y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},BA=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];t[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],g=s[n++],p=((l&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;t[r++]=String.fromCharCode(55296+(p>>10)),t[r++]=String.fromCharCode(56320+(p&1023))}else{const c=s[n++],f=s[n++];t[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,g=f?s[l+1]:0,p=l+2<s.length,y=p?s[l+2]:0,T=c>>2,b=(c&3)<<4|g>>4;let S=(g&15)<<2|y>>6,z=y&63;p||(z=64,f||(S=64)),r.push(n[T],n[b],n[S],n[z])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(wv(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):BA(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],g=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const b=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||g==null||y==null||b==null)throw new qA;const S=c<<2|g>>4;if(r.push(S),y!==64){const z=g<<4&240|y>>2;if(r.push(z),b!==64){const X=y<<6&192|b;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class qA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HA=function(s){const t=wv(s);return Rv.encodeByteArray(t,!0)},Bc=function(s){return HA(s).replace(/\./g,"")},Iv=function(s){try{return Rv.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=()=>GA().__FIREBASE_DEFAULTS__,QA=()=>{if(typeof process>"u"||typeof Y_>"u")return;const s=Y_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},KA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Iv(s[1]);return t&&JSON.parse(t)},lh=()=>{try{return zA()||FA()||QA()||KA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Cv=s=>{var t,n;return(n=(t=lh())==null?void 0:t.emulatorHosts)==null?void 0:n[s]},YA=s=>{const t=Cv(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xv=()=>{var s;return(s=lh())==null?void 0:s.config},Nv=s=>{var t;return(t=lh())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dv(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(f)),""].join(".")}const Rl={};function ZA(){const s={prod:[],emulator:[]};for(const t of Object.keys(Rl))Rl[t]?s.emulator.push(t):s.prod.push(t);return s}function WA(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let X_=!1;function Ov(s,t){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||Rl[s]===t||Rl[s]||X_)return;Rl[s]=t;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",c=ZA().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function g(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,z){S.setAttribute("width","24"),S.setAttribute("id",z),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{X_=!0,f()},S}function T(S,z){S.setAttribute("id",z),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=WA(r),z=n("text"),X=document.getElementById(z)||document.createElement("span"),tt=n("learnmore"),W=document.getElementById(tt)||document.createElement("a"),at=n("preprendIcon"),it=document.getElementById(at)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const dt=S.element;g(dt),T(W,tt);const Mt=y();p(it,at),dt.append(it,X,W,Mt),document.body.appendChild(dt)}c?(X.innerText="Preview backend disconnected.",it.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(it.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function tS(){var t;const s=(t=lh())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function iS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sS(){const s=en();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function rS(){return!tS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aS(){try{return typeof indexedDB=="object"}catch{return!1}}function oS(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)==null?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="FirebaseError";class Wi extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=lS,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?uS(c,r):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new Wi(l,g,r)}}function uS(s,t){return s.replace(cS,(n,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const cS=/\{\$([^}]+)}/g;function hS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Pr(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const l of n){if(!r.includes(l))return!1;const c=s[l],f=t[l];if($_(c)&&$_(f)){if(!Pr(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function $_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(s){const t=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function El(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function Tl(s){const t=s.indexOf("?");if(!t)return"";const n=s.indexOf("#",t);return s.substring(t,n>0?n:void 0)}function fS(s,t){const n=new dS(s,t);return n.subscribe.bind(n)}class dS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let l;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:r},l.next===void 0&&(l.next=jd),l.error===void 0&&(l.error=jd),l.complete===void 0&&(l.complete=jd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mS(s,t){if(typeof s!="object"||s===null)return!1;for(const n of t)if(n in s&&typeof s[n]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(s){return s&&s._delegate?s._delegate:s}class Lr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new XA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yS(t))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(t=Or){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Or){return this.instances.has(t)}getOptions(t=Or){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&f.resolve(l)}return l}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pS(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Or){return this.component?this.component.multipleInstances?t:Or:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(s){return s===Or?void 0:s}function yS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new gS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Dt||(Dt={}));const vS={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},ES=Dt.INFO,TS={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},AS=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),l=TS[t];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rm{constructor(t){this.name=t,this._logLevel=ES,this._logHandler=AS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const SS=(s,t)=>t.some(n=>s instanceof n);let Z_,W_;function bS(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wS(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vv=new WeakMap,Zd=new WeakMap,Mv=new WeakMap,zd=new WeakMap,Im=new WeakMap;function RS(s){const t=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(ks(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&Vv.set(n,s)}).catch(()=>{}),Im.set(t,s),t}function IS(s){if(Zd.has(s))return;const t=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Zd.set(s,t)}let Wd={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Zd.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Mv.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ks(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function CS(s){Wd=s(Wd)}function xS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(Bd(this),t,...n);return Mv.set(r,t.sort?t.sort():[t]),ks(r)}:wS().includes(s)?function(...t){return s.apply(Bd(this),t),ks(Vv.get(this))}:function(...t){return ks(s.apply(Bd(this),t))}}function NS(s){return typeof s=="function"?xS(s):(s instanceof IDBTransaction&&IS(s),SS(s,bS())?new Proxy(s,Wd):s)}function ks(s){if(s instanceof IDBRequest)return RS(s);if(zd.has(s))return zd.get(s);const t=NS(s);return t!==s&&(zd.set(s,t),Im.set(t,s)),t}const Bd=s=>Im.get(s);function DS(s,t,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,t),g=ks(f);return r&&f.addEventListener("upgradeneeded",p=>{r(ks(f.result),p.oldVersion,p.newVersion,ks(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const OS=["get","getKey","getAll","getAllKeys","count"],VS=["put","add","delete","clear"],qd=new Map;function J_(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(qd.get(t))return qd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,l=VS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||OS.includes(n)))return;const c=async function(f,...g){const p=this.transaction(f,l?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return qd.set(t,c),c}CS(s=>({...s,get:(t,n,r)=>J_(t,n)||s.get(t,n,r),has:(t,n)=>!!J_(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kS(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Jd="@firebase/app",t0="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Rm("@firebase/app"),PS="@firebase/app-compat",LS="@firebase/analytics-compat",US="@firebase/analytics",jS="@firebase/app-check-compat",zS="@firebase/app-check",BS="@firebase/auth",qS="@firebase/auth-compat",HS="@firebase/database",GS="@firebase/data-connect",FS="@firebase/database-compat",QS="@firebase/functions",KS="@firebase/functions-compat",YS="@firebase/installations",XS="@firebase/installations-compat",$S="@firebase/messaging",ZS="@firebase/messaging-compat",WS="@firebase/performance",JS="@firebase/performance-compat",tb="@firebase/remote-config",eb="@firebase/remote-config-compat",nb="@firebase/storage",ib="@firebase/storage-compat",sb="@firebase/firestore",rb="@firebase/ai",ab="@firebase/firestore-compat",ob="firebase",lb="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",ub={[Jd]:"fire-core",[PS]:"fire-core-compat",[US]:"fire-analytics",[LS]:"fire-analytics-compat",[zS]:"fire-app-check",[jS]:"fire-app-check-compat",[BS]:"fire-auth",[qS]:"fire-auth-compat",[HS]:"fire-rtdb",[GS]:"fire-data-connect",[FS]:"fire-rtdb-compat",[QS]:"fire-fn",[KS]:"fire-fn-compat",[YS]:"fire-iid",[XS]:"fire-iid-compat",[$S]:"fire-fcm",[ZS]:"fire-fcm-compat",[WS]:"fire-perf",[JS]:"fire-perf-compat",[tb]:"fire-rc",[eb]:"fire-rc-compat",[nb]:"fire-gcs",[ib]:"fire-gcs-compat",[sb]:"fire-fst",[ab]:"fire-fst-compat",[rb]:"fire-vertex","fire-js":"fire-js",[ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,cb=new Map,em=new Map;function e0(s,t){try{s.container.addComponent(t)}catch(n){Yi.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ka(s){const t=s.name;if(em.has(t))return Yi.debug(`There were multiple attempts to register component ${t}.`),!1;em.set(t,s);for(const n of qc.values())e0(n,s);for(const n of cb.values())e0(n,s);return!0}function Cm(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function Pn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new ql("app","Firebase",hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=lb;function kv(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:tm,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw Ps.create("bad-app-name",{appName:String(l)});if(n||(n=xv()),!n)throw Ps.create("no-options");const c=qc.get(l);if(c){if(Pr(n,c.options)&&Pr(r,c.config))return c;throw Ps.create("duplicate-app",{appName:l})}const f=new _S(l);for(const p of em.values())f.addComponent(p);const g=new fb(n,r,f);return qc.set(l,g),g}function Pv(s=tm){const t=qc.get(s);if(!t&&s===tm&&xv())return kv();if(!t)throw Ps.create("no-app",{appName:s});return t}function Ls(s,t,n){let r=ub[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${t}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yi.warn(f.join(" "));return}Ka(new Lr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebase-heartbeat-database",mb=1,Ol="firebase-heartbeat-store";let Hd=null;function Lv(){return Hd||(Hd=DS(db,mb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ol)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ps.create("idb-open",{originalErrorMessage:s.message})})),Hd}async function gb(s){try{const n=(await Lv()).transaction(Ol),r=await n.objectStore(Ol).get(Uv(s));return await n.done,r}catch(t){if(t instanceof Wi)Yi.warn(t.message);else{const n=Ps.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Yi.warn(n.message)}}}async function n0(s,t){try{const r=(await Lv()).transaction(Ol,"readwrite");await r.objectStore(Ol).put(t,Uv(s)),await r.done}catch(n){if(n instanceof Wi)Yi.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yi.warn(r.message)}}}function Uv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=1024,yb=30;class _b{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Eb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=i0();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>yb){const f=Tb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=i0(),{heartbeatsToSend:r,unsentEntries:l}=vb(this._heartbeatsCache.heartbeats),c=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Yi.warn(n),""}}}function i0(){return new Date().toISOString().substring(0,10)}function vb(s,t=pb){const n=[];let r=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),s0(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),s0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Eb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aS()?oS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return n0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return n0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function s0(s){return Bc(JSON.stringify({version:2,heartbeats:s})).length}function Tb(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(s){Ka(new Lr("platform-logger",t=>new MS(t),"PRIVATE")),Ka(new Lr("heartbeat",t=>new _b(t),"PRIVATE")),Ls(Jd,t0,s),Ls(Jd,t0,"esm2020"),Ls("fire-js","")}Ab("");var Sb="firebase",bb="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(Sb,bb,"app");function jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=jv,zv=new ql("auth","Firebase",jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Rm("@firebase/auth");function Rb(s,...t){Hc.logLevel<=Dt.WARN&&Hc.warn(`Auth (${eo}): ${s}`,...t)}function Dc(s,...t){Hc.logLevel<=Dt.ERROR&&Hc.error(`Auth (${eo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(s,...t){throw xm(s,...t)}function fi(s,...t){return xm(s,...t)}function Bv(s,t,n){const r={...wb(),[t]:n};return new ql("auth","Firebase",r).create(t,{appName:s.name})}function Qi(s){return Bv(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xm(s,...t){if(typeof s!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return zv.create(s,...t)}function _t(s,t,...n){if(!s)throw xm(t,...n)}function Gi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Dc(t),new Error(t)}function Xi(s,t){s||Gi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function Ib(){return r0()==="http:"||r0()==="https:"}function r0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||nS()||"connection"in navigator)?navigator.onLine:!0}function xb(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Xi(n>t,"Short delay should be less than long delay!"),this.isMobile=JA()||iS()}get(){return Cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(s,t){Xi(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ob=new Gl(3e4,6e4);function Ks(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Ys(s,t,n,r,l={}){return Hv(s,l,async()=>{let c={},f={};r&&(t==="GET"?f=r:c={body:JSON.stringify(r)});const g=Hl({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:p,...c};return eS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&to(s.emulatorConfig.host)&&(y.credentials="include"),qv.fetch()(await Gv(s,s.config.apiHost,n,g),y)})}async function Hv(s,t,n){s._canInitEmulator=!1;const r={...Nb,...t};try{const l=new Mb(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw bc(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const g=c.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw bc(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw bc(s,"user-disabled",f);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Bv(s,T,y);Kn(s,T)}}catch(l){if(l instanceof Wi)throw l;Kn(s,"network-request-failed",{message:String(l)})}}async function Fl(s,t,n,r,l={}){const c=await Ys(s,t,n,r,l);return"mfaPendingCredential"in c&&Kn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function Gv(s,t,n,r){const l=`${t}${n}?${r}`,c=s,f=c.config.emulator?Nm(s.config,l):`${s.config.apiScheme}://${l}`;return Db.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function Vb(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),Ob.get())})}}function bc(s,t,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=fi(s,t,r);return l.customData._tokenResponse=n,l}function a0(s){return s!==void 0&&s.enterprise!==void 0}class kb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Vb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Pb(s,t){return Ys(s,"GET","/v2/recaptchaConfig",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(s,t){return Ys(s,"POST","/v1/accounts:delete",t)}async function Gc(s,t){return Ys(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ub(s,t=!1){const n=Me(s),r=await n.getIdToken(t),l=Dm(r);_t(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:r,authTime:Il(Gd(l.auth_time)),issuedAtTime:Il(Gd(l.iat)),expirationTime:Il(Gd(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Gd(s){return Number(s)*1e3}function Dm(s){const[t,n,r]=s.split(".");if(t===void 0||n===void 0||r===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Iv(n);return l?JSON.parse(l):(Dc("Failed to decode base64 JWT payload"),null)}catch(l){return Dc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function o0(s){const t=Dm(s);return _t(t,"internal-error"),_t(typeof t.exp<"u","internal-error"),_t(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(s,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Wi&&jb(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function jb({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Il(this.lastLoginAt),this.creationTime=Il(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(s){var b;const t=s.auth,n=await s.getIdToken(),r=await Vl(s,Gc(t,{idToken:n}));_t(r==null?void 0:r.users.length,t,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=(b=l.providerUserInfo)!=null&&b.length?Fv(l.providerUserInfo):[],f=qb(s.providerData,c),g=s.isAnonymous,p=!(s.email&&l.passwordHash)&&!(f!=null&&f.length),y=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new im(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function Bb(s){const t=Me(s);await Fc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function qb(s,t){return[...s.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function Fv(s){return s.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(s,t){const n=await Hv(s,{},async()=>{const r=Hl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await Gv(s,l,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return s.emulatorConfig&&to(s.emulatorConfig.host)&&(p.credentials="include"),qv.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gb(s,t){return Ys(s,"POST","/v2/accounts:revokeToken",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_t(t.idToken,"internal-error"),_t(typeof t.idToken<"u","internal-error"),_t(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):o0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){_t(t.length!==0,"internal-error");const n=o0(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await Hb(t,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,f=new Ha;return r&&(_t(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),l&&(_t(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(_t(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return Gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(s,t){_t(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Fn{constructor({uid:t,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new zb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new im(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Vl(this,this.stsTokenManager.getToken(this.auth,t));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ub(this,t)}reload(){return Bb(this)}_assign(t){this!==t&&(_t(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Fn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Qi(this.auth));const t=await this.getIdToken();return await Vl(this,Lb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:z,providerData:X,stsTokenManager:tt}=n;_t(b&&tt,t,"internal-error");const W=Ha.fromJSON(this.name,tt);_t(typeof b=="string",t,"internal-error"),xs(r,t.name),xs(l,t.name),_t(typeof S=="boolean",t,"internal-error"),_t(typeof z=="boolean",t,"internal-error"),xs(c,t.name),xs(f,t.name),xs(g,t.name),xs(p,t.name),xs(y,t.name),xs(T,t.name);const at=new Fn({uid:b,auth:t,email:l,emailVerified:S,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:c,tenantId:g,stsTokenManager:W,createdAt:y,lastLoginAt:T});return X&&Array.isArray(X)&&(at.providerData=X.map(it=>({...it}))),p&&(at._redirectEventId=p),at}static async _fromIdTokenResponse(t,n,r=!1){const l=new Ha;l.updateFromServerResponse(n);const c=new Fn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await Fc(c),c}static async _fromGetAccountInfoResponse(t,n,r){const l=n.users[0];_t(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?Fv(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Ha;g.updateFromIdToken(r);const p=new Fn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new im(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function Fi(s){Xi(s instanceof Function,"Expected a class definition");let t=l0.get(s);return t?(Xi(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,l0.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Qv.type="NONE";const u0=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(s,t,n){return`firebase:${s}:${t}:${n}`}class Ga{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Oc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Oc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Gc(this.auth,{idToken:t}).catch(()=>{});return n?Fn._fromGetAccountInfoResponse(this.auth,n,t):null}return Fn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ga(Fi(u0),t,r);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Fi(u0);const f=Oc(r,t.config.apiKey,t.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let b;if(typeof T=="string"){const S=await Gc(t,{idToken:T}).catch(()=>{});if(!S)break;b=await Fn._fromGetAccountInfoResponse(t,S,T)}else b=Fn._fromJSON(t,T);y!==c&&(g=b),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ga(c,t,r):(c=p[0],g&&await c._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Ga(c,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($v(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Kv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wv(t))return"Blackberry";if(Jv(t))return"Webos";if(Yv(t))return"Safari";if((t.includes("chrome/")||Xv(t))&&!t.includes("edge/"))return"Chrome";if(Zv(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kv(s=en()){return/firefox\//i.test(s)}function Yv(s=en()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Xv(s=en()){return/crios\//i.test(s)}function $v(s=en()){return/iemobile/i.test(s)}function Zv(s=en()){return/android/i.test(s)}function Wv(s=en()){return/blackberry/i.test(s)}function Jv(s=en()){return/webos/i.test(s)}function Om(s=en()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Fb(s=en()){var t;return Om(s)&&!!((t=window.navigator)!=null&&t.standalone)}function Qb(){return sS()&&document.documentMode===10}function tE(s=en()){return Om(s)||Zv(s)||Jv(s)||Wv(s)||/windows phone/i.test(s)||$v(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(s,t=[]){let n;switch(s){case"Browser":n=c0(en());break;case"Worker":n=`${c0(en())}-${s}`;break;default:n=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=c=>new Promise((f,g)=>{try{const p=t(c);f(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(s,t={}){return Ys(s,"GET","/v2/passwordPolicy",Ks(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=6;class $b{constructor(t){var r;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Xb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,n,r,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h0(this),this.idTokenSubscription=new h0(this),this.beforeStateQueue=new Kb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var r,l,c;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Gc(this,{idToken:t}),r=await Fn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var c;if(Pn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&(p!=null&&p.user)&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Fc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=xb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Pn(this.app))return Promise.reject(Qi(this));const n=t?Me(t):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&_t(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Pn(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Yb(this),n=new $b(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ql("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gb(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Fi(t)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(g,this,"internal-error"),g.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,r,l);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var n;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&Rb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qr(s){return Me(s)}class h0{constructor(t){this.auth=t,this.observer=null,this.addObserver=fS(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wb(s){uh=s}function nE(s){return uh.loadJS(s)}function Jb(){return uh.recaptchaEnterpriseScript}function tw(){return uh.gapiScript}function ew(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class nw{constructor(){this.enterprise=new iw}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class iw{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const sw="recaptcha-enterprise",iE="NO_RECAPTCHA";class rw{constructor(t){this.type=sw,this.auth=qr(t)}async verify(t="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,g)=>{Pb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new kb(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(p=>{g(p)})})}function l(c,f,g){const p=window.grecaptcha;a0(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(y=>{f(y)}).catch(()=>{f(iE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nw().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(g=>{if(!n&&a0(window.grecaptcha))l(g,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Jb();p.length!==0&&(p+=g),nE(p).then(()=>{l(g,c,f)}).catch(y=>{f(y)})}}).catch(g=>{f(g)})})}}async function f0(s,t,n,r=!1,l=!1){const c=new rw(s);let f;if(l)f=iE;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const g={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function sm(s,t,n,r,l){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await f0(s,t,n,n==="getOobCode");return r(s,f)}else return r(s,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await f0(s,t,n,n==="getOobCode");return r(s,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(s,t){const n=Cm(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Pr(c,t??{}))return l;Kn(l,"already-initialized")}return n.initialize({options:t})}function ow(s,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fi);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function lw(s,t,n){const r=qr(s);_t(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,c=sE(t),{host:f,port:g}=uw(t),p=g===null?"":`:${g}`,y={url:`${c}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){_t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_t(Pr(y,r.config.emulator)&&Pr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,to(f)?(Dv(`${c}//${f}${p}`),Ov("Auth",!0)):cw()}function sE(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function uw(s){const t=sE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:d0(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:d0(f)}}}function d0(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function cw(){function s(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Gi("not implemented")}_getIdTokenResponse(t){return Gi("not implemented")}_linkToIdToken(t,n){return Gi("not implemented")}_getReauthenticationResolver(t){return Gi("not implemented")}}async function hw(s,t){return Ys(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(s,t){return Fl(s,"POST","/v1/accounts:signInWithPassword",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(s,t){return Fl(s,"POST","/v1/accounts:signInWithEmailLink",Ks(s,t))}async function mw(s,t){return Fl(s,"POST","/v1/accounts:signInWithEmailLink",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends Vm{constructor(t,n,r,l=null){super("password",r),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Ml(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Ml(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(t,n,"signInWithPassword",fw);case"emailLink":return dw(t,{email:this._email,oobCode:this._password});default:Kn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(t,r,"signUpPassword",hw);case"emailLink":return mw(t,{idToken:n,email:this._email,oobCode:this._password});default:Kn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(s,t){return Fl(s,"POST","/v1/accounts:signInWithIdp",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="http://localhost";class Ur extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ur(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const f=new Ur(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Fa(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Fa(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Fa(t,n)}buildRequest(){const t={requestUri:gw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Hl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yw(s){const t=El(Tl(s)).link,n=t?El(Tl(t)).deep_link_id:null,r=El(Tl(s)).deep_link_id;return(r?El(Tl(r)).link:null)||r||n||t||s}class Mm{constructor(t){const n=El(Tl(t)),r=n.apiKey??null,l=n.oobCode??null,c=pw(n.mode??null);_t(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=yw(t);try{return new Mm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.providerId=no.PROVIDER_ID}static credential(t,n){return Ml._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Mm.parseLink(n);return _t(r,"argument-error"),Ml._fromEmailAndCode(t,r.code,r.tenantId)}}no.PROVIDER_ID="password";no.EMAIL_PASSWORD_SIGN_IN_METHOD="password";no.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Ql{constructor(){super("facebook.com")}static credential(t){return Ur._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ns.credential(t.oauthAccessToken)}catch{return null}}}Ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ur._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ds.credentialFromTaggedObject(t)}static credentialFromError(t){return Ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ds.credential(n,r)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ql{constructor(){super("github.com")}static credential(t){return Ur._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Os.credential(t.oauthAccessToken)}catch{return null}}}Os.GITHUB_SIGN_IN_METHOD="github.com";Os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Ql{constructor(){super("twitter.com")}static credential(t,n){return Ur._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(s,t){return Fl(s,"POST","/v1/accounts:signUp",Ks(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,l=!1){const c=await Fn._fromIdTokenResponse(t,r,l),f=m0(r);return new jr({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const l=m0(r);return new jr({user:t,providerId:l,_tokenResponse:r,operationType:n})}}function m0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Wi{constructor(t,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,l){return new Qc(t,n,r,l)}}function aE(s,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(s,c,t,r):c})}async function vw(s,t,n=!1){const r=await Vl(s,t._linkToIdToken(s.auth,await s.getIdToken()),n);return jr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(s,t,n=!1){const{auth:r}=s;if(Pn(r.app))return Promise.reject(Qi(r));const l="reauthenticate";try{const c=await Vl(s,aE(r,l,t,s),n);_t(c.idToken,r,"internal-error");const f=Dm(c.idToken);_t(f,r,"internal-error");const{sub:g}=f;return _t(s.uid===g,r,"user-mismatch"),jr._forOperation(s,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Kn(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(s,t,n=!1){if(Pn(s.app))return Promise.reject(Qi(s));const r="signIn",l=await aE(s,r,t),c=await jr._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function Tw(s,t){return oE(qr(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(s){const t=qr(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Aw(s,t,n){if(Pn(s.app))return Promise.reject(Qi(s));const r=qr(s),f=await sm(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_w).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&lE(s),p}),g=await jr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function Sw(s,t,n){return Pn(s.app)?Promise.reject(Qi(s)):Tw(Me(s),no.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lE(s),r})}function bw(s,t,n,r){return Me(s).onIdTokenChanged(t,n,r)}function ww(s,t,n){return Me(s).beforeAuthStateChanged(t,n)}function Rw(s,t,n,r){return Me(s).onAuthStateChanged(t,n,r)}function Iw(s){return Me(s).signOut()}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=1e3,xw=10;class cE extends uE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&t(n,l,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const r=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);Qb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,xw):l()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Cw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}cE.type="LOCAL";const Nw=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends uE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}hE.type="SESSION";const fE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const r=new ch(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(f).map(async y=>y(n.origin,c)),p=await Dw(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(s="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((g,p)=>{const y=km("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(b){const S=b;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(S.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function Vw(s){di().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function Mw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kw(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function Pw(){return dE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firebaseLocalStorageDb",Lw=1,Yc="firebaseLocalStorage",gE="fbase_key";class Kl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(s,t){return s.transaction([Yc],t?"readwrite":"readonly").objectStore(Yc)}function Uw(){const s=indexedDB.deleteDatabase(mE);return new Kl(s).toPromise()}function rm(){const s=indexedDB.open(mE,Lw);return new Promise((t,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Yc,{keyPath:gE})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Yc)?t(r):(r.close(),await Uw(),t(await rm()))})})}async function g0(s,t,n){const r=hh(s,!0).put({[gE]:t,value:n});return new Kl(r).toPromise()}async function jw(s,t){const n=hh(s,!1).get(t),r=await new Kl(n).toPromise();return r===void 0?null:r.value}function p0(s,t){const n=hh(s,!0).delete(t);return new Kl(n).toPromise()}const zw=800,Bw=3;class pE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Bw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(Pw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Mw(),!this.activeServiceWorker)return;this.sender=new Ow(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await rm();return await g0(t,Kc,"1"),await p0(t,Kc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>g0(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>jw(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=hh(l,!1).getAll();return new Kl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pE.type="LOCAL";const qw=pE;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(s,t){return t?Fi(t):(_t(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends Vm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Fa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Fa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Fa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Gw(s){return oE(s.auth,new Pm(s),s.bypassAuthState)}function Fw(s){const{auth:t,user:n}=s;return _t(n,t,"internal-error"),Ew(n,new Pm(s),s.bypassAuthState)}async function Qw(s){const{auth:t,user:n}=s;return _t(n,t,"internal-error"),vw(n,new Pm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t,n,r,l,c=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Gw;case"linkViaPopup":case"linkViaRedirect":return Qw;case"reauthViaPopup":case"reauthViaRedirect":return Fw;default:Kn(this.auth,"internal-error")}}resolve(t){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Gl(2e3,1e4);class qa extends yE{constructor(t,n,r,l,c){super(t,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return _t(t,this.auth,"internal-error"),t}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const t=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Kw.get())};t()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="pendingRedirect",Vc=new Map;class Xw extends yE{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Vc.get(this.auth._key());if(!t){try{const r=await $w(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Vc.set(this.auth._key(),t)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $w(s,t){const n=Jw(t),r=Ww(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function Zw(s,t){Vc.set(s._key(),t)}function Ww(s){return Fi(s._redirectPersistence)}function Jw(s){return Oc(Yw,s.config.apiKey,s.name)}async function tR(s,t,n=!1){if(Pn(s.app))return Promise.reject(Qi(s));const r=qr(s),l=Hw(r,t),f=await new Xw(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=600*1e3;class nR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!iR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!_E(t)){const l=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=eR&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(t))}saveEventToCache(t){this.cachedEventUids.add(y0(t)),this.lastProcessedEventTime=Date.now()}}function y0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function _E({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function iR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(s,t={}){return Ys(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function oR(s){if(s.config.emulator)return;const{authorizedDomains:t}=await sR(s);for(const n of t)try{if(lR(n))return}catch{}Kn(s,"unauthorized-domain")}function lR(s){const t=nm(),{protocol:n,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!aR.test(n))return!1;if(rR.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Gl(3e4,6e4);function _0(){const s=di().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function cR(s){return new Promise((t,n)=>{var l,c,f;function r(){_0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_0(),n(fi(s,"network-request-failed"))},timeout:uR.get()})}if((c=(l=di().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)t(gapi.iframes.getContext());else if((f=di().gapi)!=null&&f.load)r();else{const g=ew("iframefcb");return di()[g]=()=>{gapi.load?r():n(fi(s,"network-request-failed"))},nE(`${tw()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw Mc=null,t})}let Mc=null;function hR(s){return Mc=Mc||cR(s),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Gl(5e3,15e3),dR="__/auth/iframe",mR="emulator/auth/iframe",gR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(s){const t=s.config;_t(t.authDomain,s,"auth-domain-config-required");const n=t.emulator?Nm(t,mR):`https://${s.config.authDomain}/${dR}`,r={apiKey:t.apiKey,appName:s.name,v:eo},l=pR.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Hl(r).slice(1)}`}async function _R(s){const t=await hR(s),n=di().gapi;return _t(n,s,"internal-error"),t.open({where:document.body,url:yR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gR,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=fi(s,"network-request-failed"),g=di().setTimeout(()=>{c(f)},fR.get());function p(){di().clearTimeout(g),l(r)}r.ping(p).then(p,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,TR=600,AR="_blank",SR="http://localhost";class v0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(s,t,n,r=ER,l=TR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...vR,width:r.toString(),height:l.toString(),top:c,left:f},y=en().toLowerCase();n&&(g=Xv(y)?AR:n),Kv(y)&&(t=t||SR,p.scrollbars="yes");const T=Object.entries(p).reduce((S,[z,X])=>`${S}${z}=${X},`,"");if(Fb(y)&&g!=="_self")return wR(t||"",g),new v0(null);const b=window.open(t||"",g,T);_t(b,s,"popup-blocked");try{b.focus()}catch{}return new v0(b)}function wR(s,t){const n=document.createElement("a");n.href=s,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="__/auth/handler",IR="emulator/auth/handler",CR=encodeURIComponent("fac");async function E0(s,t,n,r,l,c){_t(s.config.authDomain,s,"auth-domain-config-required"),_t(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:eo,eventId:l};if(t instanceof rE){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",hS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,b]of Object.entries({}))f[T]=b}if(t instanceof Ql){const T=t.getScopes().filter(b=>b!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await s._getAppCheckToken(),y=p?`#${CR}=${encodeURIComponent(p)}`:"";return`${xR(s)}?${Hl(g).slice(1)}${y}`}function xR({config:s}){return s.emulator?Nm(s,IR):`https://${s.authDomain}/${RR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class NR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=tR,this._overrideRedirectResult=Zw}async _openPopup(t,n,r,l){var f;Xi((f=this.eventManagers[t._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const c=await E0(t,n,r,nm(),l);return bR(t,c,km())}async _openRedirect(t,n,r,l){await this._originValidation(t);const c=await E0(t,n,r,nm(),l);return Vw(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Xi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await _R(t),r=new nR(t);return n.register("authEvent",l=>(_t(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Fd,{type:Fd},l=>{var f;const c=(f=l==null?void 0:l[0])==null?void 0:f[Fd];c!==void 0&&n(!!c),Kn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return tE()||Yv()||Om()}}const DR=NR;var T0="@firebase/auth",A0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MR(s){Ka(new Lr("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;_t(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(s)},y=new Zb(r,l,c,p);return ow(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Ka(new Lr("auth-internal",t=>{const n=qr(t.getProvider("auth").getImmediate());return(r=>new OR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(T0,A0,VR(s)),Ls(T0,A0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=300,PR=Nv("authIdTokenMaxAge")||kR;let S0=null;const LR=s=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PR)return;const l=n==null?void 0:n.token;S0!==l&&(S0=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function UR(s=Pv()){const t=Cm(s,"auth");if(t.isInitialized())return t.getImmediate();const n=aw(s,{popupRedirectResolver:DR,persistence:[qw,Nw,fE]}),r=Nv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=LR(c.toString());ww(n,f,()=>f(n.currentUser)),bw(n,g=>f(g))}}const l=Cv("auth");return l&&lw(n,`http://${l}`),n}function jR(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}Wb({loadJS(s){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=l=>{const c=fi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",jR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MR("Browser");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Us,vE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,w){function x(){}x.prototype=w.prototype,M.D=w.prototype,M.prototype=new x,M.prototype.constructor=M,M.C=function(O,V,P){for(var C=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)C[ve-2]=arguments[ve];return w.prototype[V].apply(O,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,w,x){x||(x=0);var O=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)O[V]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(V=0;16>V;++V)O[V]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=M.g[0],x=M.g[1],V=M.g[2];var P=M.g[3],C=w+(P^x&(V^P))+O[0]+3614090360&4294967295;w=x+(C<<7&4294967295|C>>>25),C=P+(V^w&(x^V))+O[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(x^P&(w^x))+O[2]+606105819&4294967295,V=P+(C<<17&4294967295|C>>>15),C=x+(w^V&(P^w))+O[3]+3250441966&4294967295,x=V+(C<<22&4294967295|C>>>10),C=w+(P^x&(V^P))+O[4]+4118548399&4294967295,w=x+(C<<7&4294967295|C>>>25),C=P+(V^w&(x^V))+O[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(x^P&(w^x))+O[6]+2821735955&4294967295,V=P+(C<<17&4294967295|C>>>15),C=x+(w^V&(P^w))+O[7]+4249261313&4294967295,x=V+(C<<22&4294967295|C>>>10),C=w+(P^x&(V^P))+O[8]+1770035416&4294967295,w=x+(C<<7&4294967295|C>>>25),C=P+(V^w&(x^V))+O[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(x^P&(w^x))+O[10]+4294925233&4294967295,V=P+(C<<17&4294967295|C>>>15),C=x+(w^V&(P^w))+O[11]+2304563134&4294967295,x=V+(C<<22&4294967295|C>>>10),C=w+(P^x&(V^P))+O[12]+1804603682&4294967295,w=x+(C<<7&4294967295|C>>>25),C=P+(V^w&(x^V))+O[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(x^P&(w^x))+O[14]+2792965006&4294967295,V=P+(C<<17&4294967295|C>>>15),C=x+(w^V&(P^w))+O[15]+1236535329&4294967295,x=V+(C<<22&4294967295|C>>>10),C=w+(V^P&(x^V))+O[1]+4129170786&4294967295,w=x+(C<<5&4294967295|C>>>27),C=P+(x^V&(w^x))+O[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^x&(P^w))+O[11]+643717713&4294967295,V=P+(C<<14&4294967295|C>>>18),C=x+(P^w&(V^P))+O[0]+3921069994&4294967295,x=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(x^V))+O[5]+3593408605&4294967295,w=x+(C<<5&4294967295|C>>>27),C=P+(x^V&(w^x))+O[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^x&(P^w))+O[15]+3634488961&4294967295,V=P+(C<<14&4294967295|C>>>18),C=x+(P^w&(V^P))+O[4]+3889429448&4294967295,x=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(x^V))+O[9]+568446438&4294967295,w=x+(C<<5&4294967295|C>>>27),C=P+(x^V&(w^x))+O[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^x&(P^w))+O[3]+4107603335&4294967295,V=P+(C<<14&4294967295|C>>>18),C=x+(P^w&(V^P))+O[8]+1163531501&4294967295,x=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(x^V))+O[13]+2850285829&4294967295,w=x+(C<<5&4294967295|C>>>27),C=P+(x^V&(w^x))+O[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^x&(P^w))+O[7]+1735328473&4294967295,V=P+(C<<14&4294967295|C>>>18),C=x+(P^w&(V^P))+O[12]+2368359562&4294967295,x=V+(C<<20&4294967295|C>>>12),C=w+(x^V^P)+O[5]+4294588738&4294967295,w=x+(C<<4&4294967295|C>>>28),C=P+(w^x^V)+O[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^x)+O[11]+1839030562&4294967295,V=P+(C<<16&4294967295|C>>>16),C=x+(V^P^w)+O[14]+4259657740&4294967295,x=V+(C<<23&4294967295|C>>>9),C=w+(x^V^P)+O[1]+2763975236&4294967295,w=x+(C<<4&4294967295|C>>>28),C=P+(w^x^V)+O[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^x)+O[7]+4139469664&4294967295,V=P+(C<<16&4294967295|C>>>16),C=x+(V^P^w)+O[10]+3200236656&4294967295,x=V+(C<<23&4294967295|C>>>9),C=w+(x^V^P)+O[13]+681279174&4294967295,w=x+(C<<4&4294967295|C>>>28),C=P+(w^x^V)+O[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^x)+O[3]+3572445317&4294967295,V=P+(C<<16&4294967295|C>>>16),C=x+(V^P^w)+O[6]+76029189&4294967295,x=V+(C<<23&4294967295|C>>>9),C=w+(x^V^P)+O[9]+3654602809&4294967295,w=x+(C<<4&4294967295|C>>>28),C=P+(w^x^V)+O[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^x)+O[15]+530742520&4294967295,V=P+(C<<16&4294967295|C>>>16),C=x+(V^P^w)+O[2]+3299628645&4294967295,x=V+(C<<23&4294967295|C>>>9),C=w+(V^(x|~P))+O[0]+4096336452&4294967295,w=x+(C<<6&4294967295|C>>>26),C=P+(x^(w|~V))+O[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~x))+O[14]+2878612391&4294967295,V=P+(C<<15&4294967295|C>>>17),C=x+(P^(V|~w))+O[5]+4237533241&4294967295,x=V+(C<<21&4294967295|C>>>11),C=w+(V^(x|~P))+O[12]+1700485571&4294967295,w=x+(C<<6&4294967295|C>>>26),C=P+(x^(w|~V))+O[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~x))+O[10]+4293915773&4294967295,V=P+(C<<15&4294967295|C>>>17),C=x+(P^(V|~w))+O[1]+2240044497&4294967295,x=V+(C<<21&4294967295|C>>>11),C=w+(V^(x|~P))+O[8]+1873313359&4294967295,w=x+(C<<6&4294967295|C>>>26),C=P+(x^(w|~V))+O[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~x))+O[6]+2734768916&4294967295,V=P+(C<<15&4294967295|C>>>17),C=x+(P^(V|~w))+O[13]+1309151649&4294967295,x=V+(C<<21&4294967295|C>>>11),C=w+(V^(x|~P))+O[4]+4149444226&4294967295,w=x+(C<<6&4294967295|C>>>26),C=P+(x^(w|~V))+O[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~x))+O[2]+718787259&4294967295,V=P+(C<<15&4294967295|C>>>17),C=x+(P^(V|~w))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}r.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var x=w-this.blockSize,O=this.B,V=this.h,P=0;P<w;){if(V==0)for(;P<=x;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<w;)if(O[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<w;)if(O[V++]=M[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=w},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var x=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=x&255,x/=256;for(this.u(M),M=Array(16),w=x=0;4>w;++w)for(var O=0;32>O;O+=8)M[x++]=this.g[w]>>>O&255;return M};function c(M,w){var x=g;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=w(M)}function f(M,w){this.h=w;for(var x=[],O=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;O&&P==w||(x[V]=P,O=!1)}this.g=x}var g={};function p(M){return-128<=M&&128>M?c(M,function(w){return new f([w|0],0>w?-1:0)}):new f([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return b;if(0>M)return W(y(-M));for(var w=[],x=1,O=0;M>=x;O++)w[O]=M/x|0,x*=4294967296;return new f(w,0)}function T(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return W(T(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=y(Math.pow(w,8)),O=b,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),C=parseInt(M.substring(V,V+P),w);8>P?(P=y(Math.pow(w,P)),O=O.j(P).add(y(C))):(O=O.j(x),O=O.add(y(C)))}return O}var b=p(0),S=p(1),z=p(16777216);s=f.prototype,s.m=function(){if(tt(this))return-W(this).m();for(var M=0,w=1,x=0;x<this.g.length;x++){var O=this.i(x);M+=(0<=O?O:4294967296+O)*w,w*=4294967296}return M},s.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(X(this))return"0";if(tt(this))return"-"+W(this).toString(M);for(var w=y(Math.pow(M,6)),x=this,O="";;){var V=Mt(x,w).g;x=at(x,V.j(w));var P=((0<x.g.length?x.g[0]:x.h)>>>0).toString(M);if(x=V,X(x))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},s.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function X(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function tt(M){return M.h==-1}s.l=function(M){return M=at(this,M),tt(M)?-1:X(M)?0:1};function W(M){for(var w=M.g.length,x=[],O=0;O<w;O++)x[O]=~M.g[O];return new f(x,~M.h).add(S)}s.abs=function(){return tt(this)?W(this):this},s.add=function(M){for(var w=Math.max(this.g.length,M.g.length),x=[],O=0,V=0;V<=w;V++){var P=O+(this.i(V)&65535)+(M.i(V)&65535),C=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=C>>>16,P&=65535,C&=65535,x[V]=C<<16|P}return new f(x,x[x.length-1]&-2147483648?-1:0)};function at(M,w){return M.add(W(w))}s.j=function(M){if(X(this)||X(M))return b;if(tt(this))return tt(M)?W(this).j(W(M)):W(W(this).j(M));if(tt(M))return W(this.j(W(M)));if(0>this.l(z)&&0>M.l(z))return y(this.m()*M.m());for(var w=this.g.length+M.g.length,x=[],O=0;O<2*w;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var P=this.i(O)>>>16,C=this.i(O)&65535,ve=M.i(V)>>>16,ee=M.i(V)&65535;x[2*O+2*V]+=C*ee,it(x,2*O+2*V),x[2*O+2*V+1]+=P*ee,it(x,2*O+2*V+1),x[2*O+2*V+1]+=C*ve,it(x,2*O+2*V+1),x[2*O+2*V+2]+=P*ve,it(x,2*O+2*V+2)}for(O=0;O<w;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=w;O<2*w;O++)x[O]=0;return new f(x,0)};function it(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function dt(M,w){this.g=M,this.h=w}function Mt(M,w){if(X(w))throw Error("division by zero");if(X(M))return new dt(b,b);if(tt(M))return w=Mt(W(M),w),new dt(W(w.g),W(w.h));if(tt(w))return w=Mt(M,W(w)),new dt(W(w.g),w.h);if(30<M.g.length){if(tt(M)||tt(w))throw Error("slowDivide_ only works with positive integers.");for(var x=S,O=w;0>=O.l(M);)x=Tt(x),O=Tt(O);var V=Rt(x,1),P=Rt(O,1);for(O=Rt(O,2),x=Rt(x,2);!X(O);){var C=P.add(O);0>=C.l(M)&&(V=V.add(x),P=C),O=Rt(O,1),x=Rt(x,1)}return w=at(M,V.j(w)),new dt(V,w)}for(V=b;0<=M.l(w);){for(x=Math.max(1,Math.floor(M.m()/w.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(x),C=P.j(w);tt(C)||0<C.l(M);)x-=O,P=y(x),C=P.j(w);X(P)&&(P=S),V=V.add(P),M=at(M,C)}return new dt(V,M)}s.A=function(M){return Mt(this,M).h},s.and=function(M){for(var w=Math.max(this.g.length,M.g.length),x=[],O=0;O<w;O++)x[O]=this.i(O)&M.i(O);return new f(x,this.h&M.h)},s.or=function(M){for(var w=Math.max(this.g.length,M.g.length),x=[],O=0;O<w;O++)x[O]=this.i(O)|M.i(O);return new f(x,this.h|M.h)},s.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),x=[],O=0;O<w;O++)x[O]=this.i(O)^M.i(O);return new f(x,this.h^M.h)};function Tt(M){for(var w=M.g.length+1,x=[],O=0;O<w;O++)x[O]=M.i(O)<<1|M.i(O-1)>>>31;return new f(x,M.h)}function Rt(M,w){var x=w>>5;w%=32;for(var O=M.g.length-x,V=[],P=0;P<O;P++)V[P]=0<w?M.i(P+x)>>>w|M.i(P+x+1)<<32-w:M.i(P+x);return new f(V,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Us=f}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Al,TE,kc,am,AE,SE,bE;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function l(u,m){if(m)t:{var _=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in _))break t;_=_[L]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,L={next:function(){if(!A&&_<u.length){var H=_++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function b(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:b,S.apply(null,arguments)}function z(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function X(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,L,H){for(var et=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)et[kt-2]=arguments[kt];return m.prototype[L].apply(A,et)}}function tt(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const L=u.length||0,H=A.length||0;u.length=L+H;for(let et=0;et<H;et++)u[L+et]=A[et]}else u.push(A)}}class at{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function it(u){return/^[\s\xa0]*$/.test(u)}function dt(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Mt(u){return Mt[" "](u),u}Mt[" "]=function(){};var Tt=dt().indexOf("Gecko")!=-1&&!(dt().toLowerCase().indexOf("webkit")!=-1&&dt().indexOf("Edge")==-1)&&!(dt().indexOf("Trident")!=-1||dt().indexOf("MSIE")!=-1)&&dt().indexOf("Edge")==-1;function Rt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function M(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function w(u){const m={};for(const _ in u)m[_]=u[_];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)u[_]=A[_];for(let H=0;H<x.length;H++)_=x[H],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){g.setTimeout(()=>{throw u},0)}function C(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ve{constructor(){this.h=this.g=null}add(m,_){const A=ee.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ee=new at(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,ct=!1,jt=new ve,N=()=>{const u=g.Promise.resolve(void 0);nt=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){P(_)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ct=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u}();function bt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Tt){t:{try{Mt(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:gt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}X(bt,J);var gt={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function ut(u,m,_,A,L){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=L,this.key=++Kt,this.da=this.fa=!1}function qt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zt(u){this.src=u,this.g={},this.h=0}zt.prototype.add=function(u,m,_,A,L){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var et=Un(u,m,A,L);return-1<et?(m=u[et],_||(m.fa=!1)):(m=new ut(m,this.src,H,!!A,L),m.fa=_,u.push(m)),m};function le(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],L=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(qt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Un(u,m,_,A){for(var L=0;L<u.length;++L){var H=u[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return L}return-1}var Zs="closure_lm_"+(1e6*Math.random()|0),uo={};function tu(u,m,_,A,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)tu(u,m[H],_,A,L);return null}return _=eu(_),u&&u[Ee]?u.K(m,_,y(A)?!!A.capture:!1,L):Sn(u,m,_,!1,A,L)}function Sn(u,m,_,A,L,H){if(!m)throw Error("Invalid event type");var et=y(L)?!!L.capture:!!L,kt=Qr(u);if(kt||(u[Zs]=kt=new zt(u)),_=kt.add(m,_,A,et,H),_.proxy)return _;if(A=Oh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)ft||(L=et),L===void 0&&(L=!1),u.addEventListener(m.toString(),A,L);else if(u.attachEvent)u.attachEvent(Ws(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Oh(){function u(_){return m.call(u.src,u.listener,_)}const m=Vh;return u}function co(u,m,_,A,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)co(u,m[H],_,A,L);else A=y(A)?!!A.capture:!!A,_=eu(_),u&&u[Ee]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],_=Un(H,_,A,L),-1<_&&(qt(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Qr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Un(m,_,A,L)),(_=-1<u?m[u]:null)&&Fr(_))}function Fr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ee])le(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(Ws(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Qr(m))?(le(_,u),_.h==0&&(_.src=null,m[Zs]=null)):qt(u)}}}function Ws(u){return u in uo?uo[u]:uo[u]="on"+u}function Vh(u,m){if(u.da)u=!0;else{m=new bt(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Fr(u),u=_.call(A,m)}return u}function Qr(u){return u=u[Zs],u instanceof zt?u:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(u){return typeof u=="function"?u:(u[ho]||(u[ho]=function(m){return u.handleEvent(m)}),u[ho])}function he(){st.call(this),this.i=new zt(this),this.M=this,this.F=null}X(he,st),he.prototype[Ee]=!0,he.prototype.removeEventListener=function(u,m,_,A){co(this,u,m,_,A)};function Yt(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var L=m;m=new J(A,u),O(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var et=m.g=_[H];L=fn(et,A,!0,m)&&L}if(et=m.g=u,L=fn(et,A,!0,m)&&L,L=fn(et,A,!1,m)&&L,_)for(H=0;H<_.length;H++)et=m.g=_[H],L=fn(et,A,!1,m)&&L}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)qt(_[A]);delete u.g[m],u.h--}}this.F=null},he.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},he.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function fn(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var et=m[H];if(et&&!et.da&&et.capture==_){var kt=et.listener,xe=et.ha||et.src;et.fa&&le(u.i,et),L=kt.call(xe,A)!==!1&&L}}return L&&!A.defaultPrevented}function Xe(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function nu(u){u.g=Xe(()=>{u.g=null,u.i&&(u.i=!1,nu(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Mh extends st{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:nu(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(u){st.call(this),this.h=u,this.g={}}X(Js,st);var tr=[];function er(u){Rt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Fr(m)},u),u.g={}}Js.prototype.N=function(){Js.aa.N.call(this),er(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=g.JSON.stringify,Kr=g.JSON.parse,nr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function fo(){}fo.prototype.h=null;function mo(u){return u.h||(u.h=u.i())}function go(){}var vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ei(){J.call(this,"d")}X(Ei,J);function po(){J.call(this,"c")}X(po,J);var Xn={},yo=null;function es(){return yo=yo||new he}Xn.La="serverreachability";function Yr(u){J.call(this,Xn.La,u)}X(Yr,J);function ns(u){const m=es();Yt(m,new Yr(m))}Xn.STAT_EVENT="statevent";function iu(u,m){J.call(this,Xn.STAT_EVENT,u),this.stat=m}X(iu,J);function ae(u){const m=es();Yt(m,new iu(m,u))}Xn.Ma="timingevent";function Ce(u,m){J.call(this,Xn.Ma,u),this.size=m}X(Ce,J);function Te(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function _o(u,m,_,A,L,H){u.info(function(){if(u.g)if(H)for(var et="",kt=H.split("&"),xe=0;xe<kt.length;xe++){var Pt=kt[xe].split("=");if(1<Pt.length){var Pe=Pt[0];Pt=Pt[1];var Ne=Pe.split("_");et=2<=Ne.length&&Ne[1]=="type"?et+(Pe+"="+Pt+"&"):et+(Pe+"=redacted&")}}else et=null;else et=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+_+`
`+et})}function kh(u,m,_,A,L,H,et){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+et})}function is(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ir(u,_)+(A?" "+A:"")})}function su(u,m){u.info(function(){return"TIMEOUT: "+m})}bn.prototype.info=function(){};function ir(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var et=1;et<L.length;et++)L[et]=""}}}}return jn(_)}catch{return m}}var ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Zn(){}X(Zn,fo),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},$n=new Zn;function nn(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}var vo={},Xr={};function zn(u,m,_){u.L=1,u.v=lr(dn(m)),u.m=_,u.P=!0,Ai(u,null)}function Ai(u,m){u.F=Date.now(),sr(u),u.A=dn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),wo(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ge,u.g=Eu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Mh(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(tr[0]=L.toString()),L=tr);for(var H=0;H<L.length;H++){var et=tu(_,L[H],A||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ns(),_o(u.i,u.u,u.A,u.l,u.R,u.m)}nn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Cn(u)==3?m.j():this.Y(u)},nn.prototype.Y=function(u){try{if(u==this.g)t:{const Ne=Cn(this.g);var m=this.g.Ba();const Ni=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||Ne!=4||m==7||(m==8||0>=Ni?ns(3):ns(2)),rs(this);var _=this.g.Z();this.X=_;e:if(ru(this)){var A=fu(this.g);u="";var L=A.length,H=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),Wn(this);var et="";break e}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==L-1)});A.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,kh(this.i,this.u,this.A,this.l,this.R,Ne,_),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,xe=this.g;if((kt=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!it(kt)){var Pt=kt;break e}}Pt=null}if(_=Pt)is(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rr(this,_);else{this.o=!1,this.s=3,ae(12),Be(this),Wn(this);break t}}if(this.P){_=!0;let qe;for(;!this.J&&this.C<et.length;)if(qe=au(this,et),qe==Xr){Ne==4&&(this.s=4,ae(14),_=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==vo){this.s=4,ae(15),is(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else is(this.i,this.l,qe,null),rr(this,qe);if(ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||et.length!=0||this.h.h||(this.s=1,ae(16),_=!1),this.o=this.o&&_,!_)is(this.i,this.l,et,"[Invalid Chunked Response]"),Be(this),Wn(this);else if(0<et.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),pr(Pe),Pe.M=!0,ae(11))}}else is(this.i,this.l,et,null),rr(this,et);Ne==4&&Be(this),this.o&&!this.J&&(Ne==4?yu(this.j,this):(this.o=!1,sr(this)))}else zh(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),Be(this),Wn(this)}}}catch{}finally{}};function ru(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function au(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Xr:(_=Number(m.substring(_,A)),isNaN(_)?vo:(A+=1,A+_>m.length?Xr:(m=m.slice(A,A+_),u.C=A+_,m)))}nn.prototype.cancel=function(){this.J=!0,Be(this)};function sr(u){u.S=Date.now()+u.I,ou(u,u.I)}function ou(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Te(S(u.ba,u),m)}function rs(u){u.B&&(g.clearTimeout(u.B),u.B=null)}nn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(su(this.i,this.A),this.L!=2&&(ns(),ae(17)),Be(this),this.s=2,Wn(this)):ou(this,this.S-u)};function Wn(u){u.j.G==0||u.J||yu(u.j,u)}function Be(u){rs(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,er(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function rr(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Eo(_.h,u))){if(!u.K&&Eo(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)oa(_),ra(_);else break t;No(_),ae(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Te(S(_.Za,_),6e3));if(1>=Zr(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else xi(_,11)}else if((u.K||_.g==u)&&oa(_),!it(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Pt=L[m];if(_.T=Pt[0],Pt=Pt[1],_.G==2)if(Pt[0]=="c"){_.K=Pt[1],_.ia=Pt[2];const Pe=Pt[3];Pe!=null&&(_.la=Pe,_.j.info("VER="+_.la));const Ne=Pt[4];Ne!=null&&(_.Aa=Ne,_.j.info("SVER="+_.Aa));const Ni=Pt[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(A=1.5*Ni,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const qe=u.g;if(qe){const ri=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ri){var H=A.h;H.g||ri.indexOf("spdy")==-1&&ri.indexOf("quic")==-1&&ri.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Wr(H,H.h),H.h=null))}if(A.D){const Oo=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(A.ya=Oo,Zt(A.I,A.D,Oo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var et=u;if(A.qa=vu(A,A.J?A.ia:null,A.W),et.K){sn(A.h,et);var kt=et,xe=A.L;xe&&(kt.I=xe),kt.B&&(rs(kt),sr(kt)),A.g=et}else gu(A);0<_.i.length&&aa(_)}else Pt[0]!="stop"&&Pt[0]!="close"||xi(_,7);else _.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?xi(_,7):Co(_):Pt[0]!="noop"&&_.l&&_.l.ta(Pt),_.v=0)}}ns(4)}catch{}}var lu=class{constructor(u,m){this.g=u,this.map=m}};function Si(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $r(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Zr(u){return u.h?1:u.g?u.g.size:0}function Eo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Wr(u,m){u.g?u.g.add(m):u.h=m}function sn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Si.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function To(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return tt(u.i)}function Ph(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Jr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function Ao(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Jr(u),A=Ph(u),L=A.length,H=0;H<L;H++)m.call(void 0,A[H],_&&_[H],u)}var ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),L=null;if(0<=A){var H=u[_].substring(0,A);L=u[_].substring(A+1)}else H=u[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ae(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ae){this.h=u.h,or(this,u.j),this.o=u.o,this.g=u.g,as(this,u.s),this.l=u.l;var m=u.i,_=new wi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),bi(this,_),this.m=u.m}else u&&(m=String(u).match(ar))?(this.h=!1,or(this,m[1]||"",!0),this.o=wn(m[2]||""),this.g=wn(m[3]||"",!0),as(this,m[4]),this.l=wn(m[5]||"",!0),bi(this,m[6]||"",!0),this.m=wn(m[7]||"")):(this.h=!1,this.i=new wi(null,this.h))}Ae.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ur(m,So,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ur(m,So,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ur(_,_.charAt(0)=="/"?Uh:bo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ur(_,ta)),u.join("")};function dn(u){return new Ae(u)}function or(u,m,_){u.j=_?wn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function as(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function bi(u,m,_){m instanceof wi?(u.i=m,cu(u.i,u.h)):(_||(m=ur(m,jh)),u.i=new wi(m,u.h))}function Zt(u,m,_){u.i.set(m,_)}function lr(u){return Zt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function wn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ur(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,uu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function uu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var So=/[#\/\?@]/g,bo=/[#\?:]/g,Uh=/[#\?]/g,jh=/[#\?@]/g,ta=/#/g;function wi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rn(u){u.g||(u.g=new Map,u.h=0,u.i&&Lh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=wi.prototype,s.add=function(u,m){Rn(this),this.i=null,u=Jn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ri(u,m){Rn(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ii(u,m){return Rn(u),m=Jn(u,m),u.g.has(m)}s.forEach=function(u,m){Rn(this),this.g.forEach(function(_,A){_.forEach(function(L){u.call(m,L,A,this)},this)},this)},s.na=function(){Rn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const L=u[A];for(let H=0;H<L.length;H++)_.push(m[A])}return _},s.V=function(u){Rn(this);let m=[];if(typeof u=="string")Ii(this,u)&&(m=m.concat(this.g.get(Jn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},s.set=function(u,m){return Rn(this),this.i=null,u=Jn(this,u),Ii(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function wo(u,m,_){Ri(u,m),0<_.length&&(u.i=null,u.g.set(Jn(u,m),tt(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),et=this.V(A);for(A=0;A<et.length;A++){var L=H;et[A]!==""&&(L+="="+encodeURIComponent(String(et[A]))),u.push(L)}}return this.i=u.join("&")};function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function cu(u,m){m&&!u.j&&(Rn(u),u.i=null,u.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(Ri(this,A),wo(this,L,_))},u)),u.j=m}function cr(u,m){const _=new bn;if(g.Image){const A=new Image;A.onload=z(In,_,"TestLoadImage: loaded",!0,m,A),A.onerror=z(In,_,"TestLoadImage: error",!1,m,A),A.onabort=z(In,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=z(In,_,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Bn(u,m){const _=new bn,A=new AbortController,L=setTimeout(()=>{A.abort(),In(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?In(_,"TestPingServer: ok",!0,m):In(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),In(_,"TestPingServer: error",!1,m)})}function In(u,m,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function hr(){this.g=new nr}function ti(u,m,_){const A=_||"";try{Ao(u,function(L,H){let et=L;y(L)&&(et=jn(L)),m.push(A+H+"="+encodeURIComponent(et))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function os(u){this.l=u.Ub||null,this.j=u.eb||!1}X(os,fo),os.prototype.g=function(){return new Ci(this.l,this.j)},os.prototype.i=function(u){return function(){return u}}({});function Ci(u,m){he.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(Ci,he),s=Ci.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ni(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ro(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ro(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ei(this):ni(this),this.readyState==3&&Ro(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,ei(this))},s.Qa=function(u){this.g&&(this.response=u,ei(this))},s.ga=function(){this.g&&ei(this)};function ei(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ni(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Io(u){let m="";return Rt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function ke(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Io(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Zt(u,m,_))}function Ft(u){he.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(Ft,he);var ea=/^https?$/i,fr=["POST","PUT"];s=Ft.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?mo(this.o):mo($n),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){hu(this,H);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(fr,m,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,et]of _)this.g.setRequestHeader(H,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dr(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){hu(this,H)}};function hu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,na(u),ii(u)}function na(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),ii(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),Ft.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},s.bb=function(){ia(this)};function ia(u){if(u.h&&typeof f<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Xe(u.Ea,0,u);else if(Yt(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=et===0){var L=String(u.D).match(ar)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),A=!ea.test(L?L.toLowerCase():"")}_=A}if(_)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var H=2<Cn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",na(u)}}finally{ii(u)}}}}function ii(u,m){if(u.g){dr(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Yt(u,"ready");try{_.onreadystatechange=A}catch{}}}function dr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Kr(m)}};function fu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zh(u){const m={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(it(u[A]))continue;var _=V(u[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}M(m,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function sa(u){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,u),this.cb=mr("retryDelaySeedMs",1e4,u),this.Wa=mr("forwardChannelMaxRetries",2,u),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Si(u&&u.concurrentRequestLimit),this.Da=new hr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=sa.prototype,s.la=8,s.G=1,s.connect=function(u,m,_,A){ae(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=vu(this,null,this.W),aa(this)};function Co(u){if(du(u),u.G==3){var m=u.U++,_=dn(u.I);if(Zt(_,"SID",u.K),Zt(_,"RID",m),Zt(_,"TYPE","terminate"),gr(u,_),m=new nn(u,u.j,m),m.L=2,m.v=lr(dn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=Eu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),sr(m)}_u(u)}function ra(u){u.g&&(pr(u),u.g.cancel(),u.g=null)}function du(u){ra(u),u.u&&(g.clearTimeout(u.u),u.u=null),oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function aa(u){if(!$r(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||N(),ct||(nt(),ct=!0),jt.add(m,u),u.B=0}}function Bh(u,m){return Zr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Te(S(u.Ga,u,m),Do(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new nn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=w(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=mu(this,L,m),_=dn(this.I),Zt(_,"RID",u),Zt(_,"CVER",22),this.D&&Zt(_,"X-HTTP-Session-Id",this.D),gr(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(Io(H)))+"&"+m:this.m&&ke(_,this.m,H)),Wr(this.h,L),this.Ua&&Zt(_,"TYPE","init"),this.P?(Zt(_,"$req",m),Zt(_,"SID","null"),L.T=!0,zn(L,_,null)):zn(L,_,m),this.G=2}}else this.G==3&&(u?xo(this,u):this.i.length==0||$r(this.h)||xo(this))};function xo(u,m){var _;m?_=m.l:_=u.U++;const A=dn(u.I);Zt(A,"SID",u.K),Zt(A,"RID",_),Zt(A,"AID",u.T),gr(u,A),u.m&&u.o&&ke(A,u.m,u.o),_=new nn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=mu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wr(u.h,_),zn(_,A,m)}function gr(u,m){u.H&&Rt(u.H,function(_,A){Zt(m,A,_)}),u.l&&Ao({},function(_,A){Zt(m,A,_)})}function mu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?S(u.l.Na,u.l,u):null;t:{var L=u.i;let H=-1;for(;;){const et=["count="+_];H==-1?0<_?(H=L[0].g,et.push("ofs="+H)):H=0:et.push("ofs="+H);let kt=!0;for(let xe=0;xe<_;xe++){let Pt=L[xe].g;const Pe=L[xe].map;if(Pt-=H,0>Pt)H=Math.max(0,L[xe].g-100),kt=!1;else try{ti(Pe,et,"req"+Pt+"_")}catch{A&&A(Pe)}}if(kt){A=et.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function gu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||N(),ct||(nt(),ct=!0),jt.add(m,u),u.v=0}}function No(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Te(S(u.Fa,u),Do(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Te(S(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),ra(this),pu(this))};function pr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function pu(u){u.g=new nn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=dn(u.qa);Zt(m,"RID","rpc"),Zt(m,"SID",u.K),Zt(m,"AID",u.T),Zt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Zt(m,"TO",u.ja),Zt(m,"TYPE","xmlhttp"),gr(u,m),u.m&&u.o&&ke(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=lr(dn(m)),_.m=null,_.P=!0,Ai(_,u)}s.Za=function(){this.C!=null&&(this.C=null,ra(this),No(this),ae(19))};function oa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function yu(u,m){var _=null;if(u.g==m){oa(u),pr(u),u.g=null;var A=2}else if(Eo(u.h,m))_=m.D,sn(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;A=es(),Yt(A,new Ce(A,_)),aa(u)}else gu(u);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Bh(u,m)||A==2&&No(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),L){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function Do(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function xi(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),A=u.Xa;const L=!A;A=new Ae(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||or(A,"https"),lr(A),L?cr(A.toString(),_):Bn(A.toString(),_)}else ae(2);u.G=0,u.l&&u.l.sa(m),_u(u),du(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function _u(u){if(u.G=0,u.ka=[],u.l){const m=To(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,tt(u.i),u.i.length=0),u.l.ra()}}function vu(u,m,_){var A=_ instanceof Ae?dn(_):new Ae(_);if(A.g!="")m&&(A.g=m+"."+A.g),as(A,A.s);else{var L=g.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new Ae(null);A&&or(H,A),m&&(H.g=m),L&&as(H,L),_&&(H.l=_),A=H}return _=u.D,m=u.ya,_&&m&&Zt(A,_,m),Zt(A,"VER",u.la),gr(u,A),A}function Eu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ft(new os({eb:_})):new Ft(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}s=Tu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function la(){}la.prototype.g=function(u,m){return new rn(u,m)};function rn(u,m){he.call(this),this.g=new sa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!it(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!it(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new si(this)}X(rn,he),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Co(this.g)},rn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=jn(u),u=_);m.i.push(new lu(m.Ya++,u)),m.G==3&&aa(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,rn.aa.N.call(this)};function Au(u){Ei.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}X(Au,Ei);function Su(){po.call(this),this.status=1}X(Su,po);function si(u){this.g=u}X(si,Tu),si.prototype.ua=function(){Yt(this.g,"a")},si.prototype.ta=function(u){Yt(this.g,new Au(u))},si.prototype.sa=function(u){Yt(this.g,new Su)},si.prototype.ra=function(){Yt(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,bE=function(){return new la},SE=function(){return es()},AE=Xn,am={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,kc=ss,Ti.COMPLETE="complete",TE=Ti,go.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",he.prototype.listen=he.prototype.K,Al=go,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,EE=Ft}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore",R0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Rm("@firebase/firestore");function La(){return zr.logLevel}function ot(s,...t){if(zr.logLevel<=Dt.DEBUG){const n=t.map(Lm);zr.debug(`Firestore (${io}): ${s}`,...n)}}function $i(s,...t){if(zr.logLevel<=Dt.ERROR){const n=t.map(Lm);zr.error(`Firestore (${io}): ${s}`,...n)}}function Ya(s,...t){if(zr.logLevel<=Dt.WARN){const n=t.map(Lm);zr.warn(`Firestore (${io}): ${s}`,...n)}}function Lm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,wE(s,r,n)}function wE(s,t,n){let r=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $i(r),new Error(r)}function Qt(s,t,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||wE(t,l,r)}function St(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Wi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class BR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qR{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qt(this.o===void 0,42304);let r=this.i;const l=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let c=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ki,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ki)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string",31837,{l:r}),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class HR{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GR{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new HR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Qt(this.o===void 0,3512);const r=c=>{c.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ot("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>r(c))};const l=c=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=QR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=t.charAt(l[c]%62))}return r}}function Ot(s,t){return s<t?-1:s>t?1:0}function om(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=t.charAt(r);if(l!==c)return Qd(l)===Qd(c)?Ot(l,c):Qd(l)?1:-1}return Ot(s.length,t.length)}const KR=55296,YR=57343;function Qd(s){const t=s.charCodeAt(0);return t>=KR&&t<=YR}function Xa(s,t,n){return s.length===t.length&&s.every((r,l)=>n(r,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="__name__";class hi{constructor(t,n,r){n===void 0?n=0:n>t.length&&vt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&vt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return hi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof hi?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let l=0;l<r;l++){const c=hi.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Ot(t.length,n.length)}static compareSegments(t,n){const r=hi.isNumericId(t),l=hi.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?hi.extractNumericId(t).compare(hi.extractNumericId(n)):om(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Us.fromString(t.substring(4,t.length-2))}}class se extends hi{construct(t,n,r){return new se(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new rt(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(l=>l.length>0))}return new se(n)}static emptyPath(){return new se([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends hi{construct(t,n,r){return new Ke(t,n,r)}static isValidIdentifier(t){return XR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new Ke([C0])}static fromServerFormat(t){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new rt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new rt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=p,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(r+=g,l++):(c(),l++)}if(c(),f)throw new rt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(se.fromString(t))}static fromName(t){return new mt(se.fromString(t).popFirst(5))}static empty(){return new mt(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&se.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return se.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new se(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(s,t,n){if(!n)throw new rt(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function $R(s,t,n,r){if(t===!0&&r===!0)throw new rt(Q.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function x0(s){if(!mt.isDocumentKey(s))throw new rt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function N0(s){if(mt.isDocumentKey(s))throw new rt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function CE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function fh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":vt(12329,{type:typeof s})}function An(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new rt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(s);throw new rt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}function ZR(s,t){if(t<=0)throw new rt(Q.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(s,t){const n={typeString:s};return t&&(n.value=t),n}function Yl(s,t){if(!CE(s))throw new rt(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const l=t[r].typeString,c="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new rt(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=-62135596800,O0=1e6;class re{static now(){return re.fromMillis(Date.now())}static fromDate(t){return re.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*O0);return new re(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<D0)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O0}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yl(t,re._jsonSchema))return new re(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-D0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}re._jsonSchemaVersion="firestore/timestamp/1.0",re._jsonSchema={type:Ie("string",re._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new re(0,0))}static max(){return new At(new re(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function WR(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=At.fromTimestamp(r===1e9?new re(n+1,0):new re(n,r));return new zs(l,mt.empty(),t)}function JR(s){return new zs(s.readTime,s.key,kl)}class zs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new zs(At.min(),mt.empty(),kl)}static max(){return new zs(At.max(),mt.empty(),kl)}}function t2(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=mt.comparator(s.documentKey,t.documentKey),n!==0?n:Ot(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==e2)throw s;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):$.reject(n)}static resolve(t){return new $((n,r)=>{n(t)})}static reject(t){return new $((n,r)=>{r(t)})}static waitFor(t){return new $((n,r)=>{let l=0,c=0,f=!1;t.forEach(g=>{++l,g.next(()=>{++c,f&&c===l&&n()},p=>r(p))}),f=!0,c===l&&n()})}static or(t){let n=$.resolve(!1);for(const r of t)n=n.next(l=>l?$.resolve(l):r());return n}static forEach(t,n){const r=[];return t.forEach((l,c)=>{r.push(n.call(this,l,c))}),this.waitFor(r)}static mapArray(t,n){return new $((r,l)=>{const c=t.length,f=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(t[y]).next(T=>{f[y]=T,++g,g===c&&r(f)},T=>l(T))}})}static doWhile(t,n){return new $((r,l)=>{const c=()=>{t()===!0?n().next(()=>{c()},l):r()};c()})}}function i2(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function mh(s){return s==null}function Xc(s){return s===0&&1/s==-1/0}function s2(s){return typeof s=="number"&&Number.isInteger(s)&&!Xc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="";function r2(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=V0(t)),t=a2(s.get(n),t);return V0(t)}function a2(s,t){let n=t;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case xE:n+="";break;default:n+=c}}return n}function V0(s){return s+xE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function Xs(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function NE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n){this.comparator=t,this.root=n||Qe.EMPTY}insert(t,n){return new ce(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Rc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Rc(this.root,t,this.comparator,!0)}}class Rc{constructor(t,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?r(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,n,r,l,c){this.key=t,this.value=n,this.color=r??Qe.RED,this.left=l??Qe.EMPTY,this.right=c??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,l,c){return new Qe(t??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let l=this;const c=r(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Qe.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,n,r,l,c){return this}insert(t,n,r){return new Qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new k0(this.data.getIterator())}getIteratorFrom(t){return new k0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ve(this.comparator);return n.data=t,n}}class k0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new Tn([])}unionWith(t){let n=new Ve(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Tn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Xa(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new DE("Invalid base64 string: "+c):c}}(t);return new Ye(n)}static fromUint8Array(t){const n=function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c}(t);return new Ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const o2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(s){if(Qt(!!s,39018),typeof s=="string"){let t=0;const n=o2.exec(s);if(Qt(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_e(s.seconds),nanos:_e(s.nanos)}}function _e(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function qs(s){return typeof s=="string"?Ye.fromBase64String(s):Ye.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="server_timestamp",VE="__type__",ME="__previous_value__",kE="__local_write_time__";function zm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[VE])==null?void 0:r.stringValue)===OE}function gh(s){const t=s.mapValue.fields[ME];return zm(t)?gh(t):t}function Pl(s){const t=Bs(s.mapValue.fields[kE].timestampValue);return new re(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t,n,r,l,c,f,g,p,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const $c="(default)";class Ll{constructor(t,n){this.projectId=t,this.database=n||$c}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===$c}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",u2="__max__",Ic={mapValue:{}},LE="__vector__",Zc="value";function Hs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zm(s)?4:h2(s)?9007199254740991:c2(s)?10:11:vt(28295,{value:s})}function _i(s,t){if(s===t)return!0;const n=Hs(s);if(n!==Hs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Pl(s).isEqual(Pl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Bs(l.timestampValue),g=Bs(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(l,c){return qs(l.bytesValue).isEqual(qs(c.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(l,c){return _e(l.geoPointValue.latitude)===_e(c.geoPointValue.latitude)&&_e(l.geoPointValue.longitude)===_e(c.geoPointValue.longitude)}(s,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return _e(l.integerValue)===_e(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=_e(l.doubleValue),g=_e(c.doubleValue);return f===g?Xc(f)===Xc(g):isNaN(f)&&isNaN(g)}return!1}(s,t);case 9:return Xa(s.arrayValue.values||[],t.arrayValue.values||[],_i);case 10:case 11:return function(l,c){const f=l.mapValue.fields||{},g=c.mapValue.fields||{};if(M0(f)!==M0(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!_i(f[p],g[p])))return!1;return!0}(s,t);default:return vt(52216,{left:s})}}function Ul(s,t){return(s.values||[]).find(n=>_i(n,t))!==void 0}function $a(s,t){if(s===t)return 0;const n=Hs(s),r=Hs(t);if(n!==r)return Ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(s.booleanValue,t.booleanValue);case 2:return function(c,f){const g=_e(c.integerValue||c.doubleValue),p=_e(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(s,t);case 3:return P0(s.timestampValue,t.timestampValue);case 4:return P0(Pl(s),Pl(t));case 5:return om(s.stringValue,t.stringValue);case 6:return function(c,f){const g=qs(c),p=qs(f);return g.compareTo(p)}(s.bytesValue,t.bytesValue);case 7:return function(c,f){const g=c.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Ot(g[y],p[y]);if(T!==0)return T}return Ot(g.length,p.length)}(s.referenceValue,t.referenceValue);case 8:return function(c,f){const g=Ot(_e(c.latitude),_e(f.latitude));return g!==0?g:Ot(_e(c.longitude),_e(f.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return L0(s.arrayValue,t.arrayValue);case 10:return function(c,f){var S,z,X,tt;const g=c.fields||{},p=f.fields||{},y=(S=g[Zc])==null?void 0:S.arrayValue,T=(z=p[Zc])==null?void 0:z.arrayValue,b=Ot(((X=y==null?void 0:y.values)==null?void 0:X.length)||0,((tt=T==null?void 0:T.values)==null?void 0:tt.length)||0);return b!==0?b:L0(y,T)}(s.mapValue,t.mapValue);case 11:return function(c,f){if(c===Ic.mapValue&&f===Ic.mapValue)return 0;if(c===Ic.mapValue)return 1;if(f===Ic.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let b=0;b<p.length&&b<T.length;++b){const S=om(p[b],T[b]);if(S!==0)return S;const z=$a(g[p[b]],y[T[b]]);if(z!==0)return z}return Ot(p.length,T.length)}(s.mapValue,t.mapValue);default:throw vt(23264,{he:n})}}function P0(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Ot(s,t);const n=Bs(s),r=Bs(t),l=Ot(n.seconds,r.seconds);return l!==0?l:Ot(n.nanos,r.nanos)}function L0(s,t){const n=s.values||[],r=t.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=$a(n[l],r[l]);if(c)return c}return Ot(n.length,r.length)}function Za(s){return lm(s)}function lm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return qs(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return mt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=lm(c);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${lm(n.fields[f])}`;return l+"}"}(s.mapValue):vt(61005,{value:s})}function Pc(s){switch(Hs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gh(s);return t?16+Pc(t):16;case 5:return 2*s.stringValue.length;case 6:return qs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((l,c)=>l+Pc(c),0)}(s.arrayValue);case 10:case 11:return function(r){let l=0;return Xs(r.fields,(c,f)=>{l+=c.length+Pc(f)}),l}(s.mapValue);default:throw vt(13486,{value:s})}}function U0(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function um(s){return!!s&&"integerValue"in s}function Bm(s){return!!s&&"arrayValue"in s}function j0(s){return!!s&&"nullValue"in s}function z0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Lc(s){return!!s&&"mapValue"in s}function c2(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[PE])==null?void 0:r.stringValue)===LE}function Cl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Xs(s.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Cl(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cl(s.arrayValue.values[n]);return t}return{...s}}function h2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===u2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.value=t}static empty(){return new hn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Lc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cl(n)}setAll(t){let n=Ke.emptyPath(),r={},l=[];t.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,l),r={},l=[],n=g.popLast()}f?r[g.lastSegment()]=Cl(f):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(t){const n=this.field(t.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return _i(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=n.mapValue.fields[t.get(r)];Lc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,r){Xs(n,(l,c)=>t[l]=c);for(const l of r)delete t[l]}clone(){return new hn(Cl(this.value))}}function UE(s){const t=[];return Xs(s.fields,(n,r)=>{const l=new Ke([n]);if(Lc(r)){const c=UE(r.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)}),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,n,r,l,c,f,g){this.key=t,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(t){return new tn(t,0,At.min(),At.min(),At.min(),hn.empty(),0)}static newFoundDocument(t,n,r,l){return new tn(t,1,n,At.min(),r,l,0)}static newNoDocument(t,n){return new tn(t,2,n,At.min(),At.min(),hn.empty(),0)}static newUnknownDocument(t,n){return new tn(t,3,n,At.min(),At.min(),hn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n){this.position=t,this.inclusive=n}}function B0(s,t,n){let r=0;for(let l=0;l<s.position.length;l++){const c=t[l],f=s.position[l];if(c.field.isKeyField()?r=mt.comparator(mt.fromName(f.referenceValue),n.key):r=$a(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function q0(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!_i(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n="asc"){this.field=t,this.dir=n}}function f2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{}class Re extends jE{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new m2(t,n,r):n==="array-contains"?new y2(t,r):n==="in"?new _2(t,r):n==="not-in"?new v2(t,r):n==="array-contains-any"?new E2(t,r):new Re(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new g2(t,r):new p2(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($a(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison($a(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends jE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Yn(t,n)}matches(t){return zE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zE(s){return s.op==="and"}function BE(s){return d2(s)&&zE(s)}function d2(s){for(const t of s.filters)if(t instanceof Yn)return!1;return!0}function cm(s){if(s instanceof Re)return s.field.canonicalString()+s.op.toString()+Za(s.value);if(BE(s))return s.filters.map(t=>cm(t)).join(",");{const t=s.filters.map(n=>cm(n)).join(",");return`${s.op}(${t})`}}function qE(s,t){return s instanceof Re?function(r,l){return l instanceof Re&&r.op===l.op&&r.field.isEqual(l.field)&&_i(r.value,l.value)}(s,t):s instanceof Yn?function(r,l){return l instanceof Yn&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce((c,f,g)=>c&&qE(f,l.filters[g]),!0):!1}(s,t):void vt(19439)}function HE(s){return s instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${Za(n.value)}`}(s):s instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"}(s):"Filter"}class m2 extends Re{constructor(t,n,r){super(t,n,r),this.key=mt.fromName(r.referenceValue)}matches(t){const n=mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class g2 extends Re{constructor(t,n){super(t,"in",n),this.keys=GE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class p2 extends Re{constructor(t,n){super(t,"not-in",n),this.keys=GE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function GE(s,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(r=>mt.fromName(r.referenceValue))}class y2 extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Bm(n)&&Ul(n.arrayValue,this.value)}}class _2 extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ul(this.value.arrayValue,n)}}class v2 extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ul(this.value.arrayValue,n)}}class E2 extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ul(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t,n=null,r=[],l=[],c=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=g,this.Te=null}}function H0(s,t=null,n=[],r=[],l=null,c=null,f=null){return new T2(s,t,n,r,l,c,f)}function qm(s){const t=St(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>cm(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),mh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Za(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Za(r)).join(",")),t.Te=n}return t.Te}function Hm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!f2(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!qE(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!q0(s.startAt,t.startAt)&&q0(s.endAt,t.endAt)}function hm(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,n=null,r=[],l=[],c=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function A2(s,t,n,r,l,c,f,g){return new ao(s,t,n,r,l,c,f,g)}function ph(s){return new ao(s)}function G0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function FE(s){return s.collectionGroup!==null}function xl(s){const t=St(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ve(Ke.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new jl(c,r))}),n.has(Ke.keyField().canonicalString())||t.Ie.push(new jl(Ke.keyField(),r))}return t.Ie}function mi(s){const t=St(s);return t.Ee||(t.Ee=S2(t,xl(s))),t.Ee}function S2(s,t){if(s.limitType==="F")return H0(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new jl(l.field,c)});const n=s.endAt?new Wc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Wc(s.startAt.position,s.startAt.inclusive):null;return H0(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function fm(s,t){const n=s.filters.concat([t]);return new ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Jc(s,t,n){return new ao(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function yh(s,t){return Hm(mi(s),mi(t))&&s.limitType===t.limitType}function QE(s){return`${qm(mi(s))}|lt:${s.limitType}`}function Ua(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(l=>HE(l)).join(", ")}]`),mh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(l=>Za(l)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(l=>Za(l)).join(",")),`Target(${r})`}(mi(s))}; limitType=${s.limitType})`}function _h(s,t){return t.isFoundDocument()&&function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):mt.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(s,t)&&function(r,l){for(const c of xl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(s,t)&&function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0}(s,t)&&function(r,l){return!(r.startAt&&!function(f,g,p){const y=B0(f,g,p);return f.inclusive?y<=0:y<0}(r.startAt,xl(r),l)||r.endAt&&!function(f,g,p){const y=B0(f,g,p);return f.inclusive?y>=0:y>0}(r.endAt,xl(r),l))}(s,t)}function b2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function KE(s){return(t,n)=>{let r=!1;for(const l of xl(s)){const c=w2(l,t,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function w2(s,t,n){const r=s.field.isKeyField()?mt.comparator(t.key,n.key):function(c,f,g){const p=f.data.field(c),y=g.data.field(c);return p!==null&&y!==null?$a(p,y):vt(42886)}(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Xs(this.inner,(n,r)=>{for(const[l,c]of r)t(l,c)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new ce(mt.comparator);function Zi(){return R2}const YE=new ce(mt.comparator);function Sl(...s){let t=YE;for(const n of s)t=t.insert(n.key,n);return t}function XE(s){let t=YE;return s.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Vr(){return Nl()}function $E(){return Nl()}function Nl(){return new Hr(s=>s.toString(),(s,t)=>s.isEqual(t))}const I2=new ce(mt.comparator),C2=new Ve(mt.comparator);function Vt(...s){let t=C2;for(const n of s)t=t.add(n);return t}const x2=new Ve(Ot);function N2(){return x2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(t)?"-0":t}}function ZE(s){return{integerValue:""+s}}function D2(s,t){return s2(t)?ZE(t):Gm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function O2(s,t,n){return s instanceof th?function(l,c){const f={fields:{[VE]:{stringValue:OE},[kE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&zm(c)&&(c=gh(c)),c&&(f.fields[ME]=c),{mapValue:f}}(n,t):s instanceof zl?JE(s,t):s instanceof Bl?tT(s,t):function(l,c){const f=WE(l,c),g=F0(f)+F0(l.Ae);return um(f)&&um(l.Ae)?ZE(g):Gm(l.serializer,g)}(s,t)}function V2(s,t,n){return s instanceof zl?JE(s,t):s instanceof Bl?tT(s,t):n}function WE(s,t){return s instanceof eh?function(r){return um(r)||function(c){return!!c&&"doubleValue"in c}(r)}(t)?t:{integerValue:0}:null}class th extends vh{}class zl extends vh{constructor(t){super(),this.elements=t}}function JE(s,t){const n=eT(t);for(const r of s.elements)n.some(l=>_i(l,r))||n.push(r);return{arrayValue:{values:n}}}class Bl extends vh{constructor(t){super(),this.elements=t}}function tT(s,t){let n=eT(t);for(const r of s.elements)n=n.filter(l=>!_i(l,r));return{arrayValue:{values:n}}}class eh extends vh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function F0(s){return _e(s.integerValue||s.doubleValue)}function eT(s){return Bm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function M2(s,t){return s.field.isEqual(t.field)&&function(r,l){return r instanceof zl&&l instanceof zl||r instanceof Bl&&l instanceof Bl?Xa(r.elements,l.elements,_i):r instanceof eh&&l instanceof eh?_i(r.Ae,l.Ae):r instanceof th&&l instanceof th}(s.transform,t.transform)}class k2{constructor(t,n){this.version=t,this.transformResults=n}}class Qn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Qn}static exists(t){return new Qn(void 0,t)}static updateTime(t){return new Qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Uc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Eh{}function nT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new sT(s.key,Qn.none()):new Xl(s.key,s.data,Qn.none());{const n=s.data,r=hn.empty();let l=new Ve(Ke.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new $s(s.key,r,new Tn(l.toArray()),Qn.none())}}function P2(s,t,n){s instanceof Xl?function(l,c,f){const g=l.value.clone(),p=K0(l.fieldTransforms,c,f.transformResults);g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(s,t,n):s instanceof $s?function(l,c,f){if(!Uc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const g=K0(l.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(iT(l)),p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(s,t,n):function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function Dl(s,t,n,r){return s instanceof Xl?function(c,f,g,p){if(!Uc(c.precondition,f))return g;const y=c.value.clone(),T=Y0(c.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(s,t,n,r):s instanceof $s?function(c,f,g,p){if(!Uc(c.precondition,f))return g;const y=Y0(c.fieldTransforms,p,f),T=f.data;return T.setAll(iT(c)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(b=>b.field))}(s,t,n,r):function(c,f,g){return Uc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(s,t,n)}function L2(s,t){let n=null;for(const r of s.fieldTransforms){const l=t.data.field(r.field),c=WE(r.transform,l||null);c!=null&&(n===null&&(n=hn.empty()),n.set(r.field,c))}return n||null}function Q0(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Xa(r,l,(c,f)=>M2(c,f))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Xl extends Eh{constructor(t,n,r,l=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class $s extends Eh{constructor(t,n,r,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function iT(s){const t=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}}),t}function K0(s,t,n){const r=new Map;Qt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,g=t.data.field(c.field);r.set(c.field,V2(f,g,n[l]))}return r}function Y0(s,t,n){const r=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);r.set(l.field,O2(c,f,t))}return r}class sT extends Eh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U2 extends Eh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t,n,r,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&P2(c,t,r[l])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Dl(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Dl(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=$E();return this.mutations.forEach(l=>{const c=t.get(l.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(l.key)?null:g;const p=nT(f,g);p!==null&&r.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Xa(this.mutations,t.mutations,(n,r)=>Q0(n,r))&&Xa(this.baseMutations,t.baseMutations,(n,r)=>Q0(n,r))}}class Fm{constructor(t,n,r,l){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(t,n,r){Qt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=function(){return I2}();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new Fm(t,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Ut;function q2(s){switch(s){case Q.OK:return vt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return vt(15467,{code:s})}}function rT(s){if(s===void 0)return $i("GRPC error has no .code"),Q.UNKNOWN;switch(s){case we.OK:return Q.OK;case we.CANCELLED:return Q.CANCELLED;case we.UNKNOWN:return Q.UNKNOWN;case we.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case we.INTERNAL:return Q.INTERNAL;case we.UNAVAILABLE:return Q.UNAVAILABLE;case we.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case we.NOT_FOUND:return Q.NOT_FOUND;case we.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case we.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case we.ABORTED:return Q.ABORTED;case we.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case we.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case we.DATA_LOSS:return Q.DATA_LOSS;default:return vt(39323,{code:s})}}(Ut=we||(we={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Us([4294967295,4294967295],0);function X0(s){const t=H2().encode(s),n=new vE;return n.update(t),new Uint8Array(n.digest())}function $0(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Us([n,r],0),new Us([l,c],0)]}class Qm{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bl(`Invalid padding: ${n}`);if(r<0)throw new bl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new bl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Us.fromNumber(this.ge)}ye(t,n,r){let l=t.add(n.multiply(Us.fromNumber(r)));return l.compare(G2)===1&&(l=new Us([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=X0(t),[r,l]=$0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(t,n,r){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Qm(c,l,n);return r.forEach(g=>f.insert(g)),f}insert(t){if(this.ge===0)return;const n=X0(t),[r,l]=$0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,n,r,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const l=new Map;return l.set(t,$l.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Th(At.min(),l,new ce(Ot),Zi(),Vt())}}class $l{constructor(t,n,r,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new $l(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,n,r,l){this.be=t,this.removedTargetIds=n,this.key=r,this.De=l}}class aT{constructor(t,n){this.targetId=t,this.Ce=n}}class oT{constructor(t,n,r=Ye.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Z0{constructor(){this.ve=0,this.Fe=W0(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),n=Vt(),r=Vt();return this.Fe.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:vt(38017,{changeType:c})}}),new $l(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=W0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Zi(),this.Je=Cc(),this.He=Cc(),this.Ye=new ce(Ot)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:vt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((r,l)=>{this.rt(l)&&n(l)})}st(t){const n=t.targetId,r=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(hm(c))if(r===0){const f=new mt(c.path);this.et(n,f,tn.newNoDocument(f,At.min()))}else Qt(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const g=this.ut(t),p=g?this.ct(g,t,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let f,g;try{f=qs(r).toUint8Array()}catch(p){if(p instanceof DE)return Ya("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Qm(f,l,c)}catch(p){return Ya(p instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach(c=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(n,c,null),l++)}),l}Tt(t){const n=new Map;this.ze.forEach((c,f)=>{const g=this.ot(f);if(g){if(c.current&&hm(g.target)){const p=new mt(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,tn.newNoDocument(p,t))}c.Be&&(n.set(f,c.ke()),c.qe())}});let r=Vt();this.He.forEach((c,f)=>{let g=!0;f.forEachWhile(p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(c))}),this.je.forEach((c,f)=>f.setReadTime(t));const l=new Th(t,n,this.Ye,this.je,r);return this.je=Zi(),this.Je=Cc(),this.He=Cc(),this.Ye=new ce(Ot),l}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Z0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ve(Ot),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ve(Ot),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ot("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Z0),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Cc(){return new ce(mt.comparator)}function W0(){return new ce(mt.comparator)}const Q2={asc:"ASCENDING",desc:"DESCENDING"},K2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y2={and:"AND",or:"OR"};class X2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function dm(s,t){return s.useProto3Json||mh(t)?t:{value:t}}function nh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lT(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function $2(s,t){return nh(s,t.toTimestamp())}function gi(s){return Qt(!!s,49232),At.fromTimestamp(function(n){const r=Bs(n);return new re(r.seconds,r.nanos)}(s))}function Km(s,t){return mm(s,t).canonicalString()}function mm(s,t){const n=function(l){return new se(["projects",l.projectId,"databases",l.database])}(s).child("documents");return t===void 0?n:n.child(t)}function uT(s){const t=se.fromString(s);return Qt(mT(t),10190,{key:t.toString()}),t}function gm(s,t){return Km(s.databaseId,t.path)}function Kd(s,t){const n=uT(t);if(n.get(1)!==s.databaseId.projectId)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new mt(hT(n))}function cT(s,t){return Km(s.databaseId,t)}function Z2(s){const t=uT(s);return t.length===4?se.emptyPath():hT(t)}function pm(s){return new se(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hT(s){return Qt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function J0(s,t,n){return{name:gm(s,t),fields:n.value.mapValue.fields}}function W2(s,t){let n;if("targetChange"in t){t.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:vt(39313,{state:y})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(y,T){return y.useProto3Json?(Qt(T===void 0||typeof T=="string",58123),Ye.fromBase64String(T||"")):(Qt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ye.fromUint8Array(T||new Uint8Array))}(s,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&function(y){const T=y.code===void 0?Q.UNKNOWN:rT(y.code);return new rt(T,y.message||"")}(f);n=new oT(r,l,c,g||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=Kd(s,r.document.name),c=gi(r.document.updateTime),f=r.document.createTime?gi(r.document.createTime):At.min(),g=new hn({mapValue:{fields:r.document.fields}}),p=tn.newFoundDocument(l,c,f,g),y=r.targetIds||[],T=r.removedTargetIds||[];n=new jc(y,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=Kd(s,r.document),c=r.readTime?gi(r.readTime):At.min(),f=tn.newNoDocument(l,c),g=r.removedTargetIds||[];n=new jc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=Kd(s,r.document),c=r.removedTargetIds||[];n=new jc([],c,l,null)}else{if(!("filter"in t))return vt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new B2(l,c),g=r.targetId;n=new aT(g,f)}}return n}function J2(s,t){let n;if(t instanceof Xl)n={update:J0(s,t.key,t.value)};else if(t instanceof sT)n={delete:gm(s,t.key)};else if(t instanceof $s)n={update:J0(s,t.key,t.data),updateMask:lI(t.fieldMask)};else{if(!(t instanceof U2))return vt(16599,{Vt:t.type});n={verify:gm(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(c,f){const g=f.transform;if(g instanceof th)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof zl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Bl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof eh)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw vt(20930,{transform:f.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:$2(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:vt(27497)}(s,t.precondition)),n}function tI(s,t){return s&&s.length>0?(Qt(t!==void 0,14353),s.map(n=>function(l,c){let f=l.updateTime?gi(l.updateTime):gi(c);return f.isEqual(At.min())&&(f=gi(c)),new k2(f,l.transformResults||[])}(n,t))):[]}function eI(s,t){return{documents:[cT(s,t.path)]}}function nI(s,t){const n={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cT(s,l);const c=function(y){if(y.length!==0)return dT(Yn.create(y,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const f=function(y){if(y.length!==0)return y.map(T=>function(S){return{field:ja(S.field),direction:rI(S.dir)}}(T))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=dm(s,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(t.endAt)),{ft:n,parent:l}}function iI(s){let t=Z2(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){Qt(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=function(b){const S=fT(b);return S instanceof Yn&&BE(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(S=>function(X){return new jl(za(X.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(S))}(n.orderBy));let g=null;n.limit&&(g=function(b){let S;return S=typeof b=="object"?b.value:b,mh(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(b){const S=!!b.before,z=b.values||[];return new Wc(z,S)}(n.startAt));let y=null;return n.endAt&&(y=function(b){const S=!b.before,z=b.values||[];return new Wc(z,S)}(n.endAt)),A2(t,l,f,c,g,"F",p,y)}function sI(s,t){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:l})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function fT(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=za(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=za(n.unaryFilter.field);return Re.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=za(n.unaryFilter.field);return Re.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=za(n.unaryFilter.field);return Re.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}}(s):s.fieldFilter!==void 0?function(n){return Re.create(za(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>fT(r)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return vt(1026)}}(n.compositeFilter.op))}(s):vt(30097,{filter:s})}function rI(s){return Q2[s]}function aI(s){return K2[s]}function oI(s){return Y2[s]}function ja(s){return{fieldPath:s.canonicalString()}}function za(s){return Ke.fromServerFormat(s.fieldPath)}function dT(s){return s instanceof Re?function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(j0(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(j0(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:aI(n.op),value:n.value}}}(s):s instanceof Yn?function(n){const r=n.getFilters().map(l=>dT(l));return r.length===1?r[0]:{compositeFilter:{op:oI(n.op),filters:r}}}(s):vt(54877,{filter:s})}function lI(s){const t=[];return s.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function mT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,n,r,l,c=At.min(),f=At.min(),g=Ye.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Ms(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.yt=t}}function cI(s){const t=iI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.Cn=new fI}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(zs.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(zs.min())}updateCollectionGroup(t,n,r){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class fI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n]||new Ve(se.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Ve(se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gT=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(gT,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Wa(0)}static cr(){return new Wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",dI=1048576;function nv([s,t],[n,r]){const l=Ot(s,n);return l===0?Ot(t,r):l}class mI{constructor(t){this.Ir=t,this.buffer=new Ve(nv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();nv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gI{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ot(ev,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?ot(ev,"Ignoring IndexedDB error during garbage collection: ",n):await so(n)}await this.Vr(3e5)})}}class pI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return $.resolve(dh.ce);const r=new mI(n);return this.mr.forEachTarget(t,l=>r.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>r.Ar(l))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(tv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tv):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,l,c,f,g,p,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,f=Date.now(),this.nthSequenceNumber(t,l))).next(b=>(r=b,g=Date.now(),this.removeTargets(t,r,n))).next(b=>(c=b,p=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(y=Date.now(),La()<=Dt.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b})))}}function yI(s,t){return new pI(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.changes=new Hr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,n,r,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(l=>(r=l,this.remoteDocumentCache.getEntry(t,n))).next(l=>(r!==null&&Dl(r.mutation,l,Tn.empty(),re.now()),l))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Vt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Vt()){const l=Vr();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,r).next(c=>{let f=Sl();return c.forEach((g,p)=>{f=f.insert(g,p.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const r=Vr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Vt()))}populateOverlays(t,n,r){const l=[];return r.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(t,n,r,l){let c=Zi();const f=Nl(),g=function(){return Nl()}();return n.forEach((p,y)=>{const T=r.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof $s)?c=c.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Dl(T.mutation,y,T.mutation.getFieldMask(),re.now())):f.set(y.key,Tn.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>g.set(y,new vI(T,f.get(y)??null))),g))}recalculateAndSaveOverlays(t,n){const r=Nl();let l=new ce((f,g)=>f-g),c=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const g of f)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let T=r.get(p)||Tn.empty();T=g.applyToLocalView(y,T),r.set(p,T);const b=(l.get(g.batchId)||Vt()).add(p);l=l.insert(g.batchId,b)})}).next(()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,b=$E();T.forEach(S=>{if(!c.has(S)){const z=nT(n.get(S),r.get(S));z!==null&&b.set(S,z),c=c.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(t,y,b))}return $.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,l){return function(f){return mt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):FE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,l):this.getDocumentsMatchingCollectionQuery(t,n,r,l)}getNextDocuments(t,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,l).next(c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,l-c.size):$.resolve(Vr());let g=kl,p=c;return f.next(y=>$.forEach(y,(T,b)=>(g<b.largestBatchId&&(g=b.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next(S=>{p=p.insert(T,S)}))).next(()=>this.populateOverlays(t,y,c)).next(()=>this.computeViews(t,p,y,Vt())).next(T=>({batchId:g,changes:XE(T)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new mt(n)).next(r=>{let l=Sl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l})}getDocumentsMatchingCollectionGroupQuery(t,n,r,l){const c=n.collectionGroup;let f=Sl();return this.indexManager.getCollectionParents(t,c).next(g=>$.forEach(g,p=>{const y=function(b,S){return new ao(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,r,l).next(T=>{T.forEach((b,S)=>{f=f.insert(b,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,c,l))).next(f=>{c.forEach((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,tn.newInvalidDocument(T)))});let g=Sl();return f.forEach((p,y)=>{const T=c.get(p);T!==void 0&&Dl(T.mutation,y,Tn.empty(),re.now()),_h(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:gi(l.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(l){return{name:l.name,query:cI(l.bundledQuery),readTime:gi(l.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.overlays=new ce(mt.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Vr();return $.forEach(n,l=>this.getOverlay(t,l).next(c=>{c!==null&&r.set(l,c)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((l,c)=>{this.St(t,n,c)}),$.resolve()}removeOverlaysForBatchId(t,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(t,n,r){const l=Vr(),c=n.length+1,f=new mt(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>r&&l.set(p.getKey(),p)}return $.resolve(l)}getOverlaysForCollectionGroup(t,n,r,l){let c=new ce((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=c.get(y.largestBatchId);T===null&&(T=Vr(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Vr(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>g.set(y,T)),!(g.size()>=l)););return $.resolve(g)}St(t,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new z2(n,r));let c=this.qr.get(n);c===void 0&&(c=Vt(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Qr=new Ve(ze.$r),this.Ur=new Ve(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new ze(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Gr(new ze(t,n))}zr(t,n){t.forEach(r=>this.removeReference(r,n))}jr(t){const n=new mt(new se([])),r=new ze(n,t),l=new ze(n,t+1),c=[];return this.Ur.forEachInRange([r,l],f=>{this.Gr(f),c.push(f.key)}),c}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new mt(new se([])),r=new ze(n,t),l=new ze(n,t+1);let c=Vt();return this.Ur.forEachInRange([r,l],f=>{c=c.add(f.key)}),c}containsKey(t){const n=new ze(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ze{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return mt.comparator(t.key,n.key)||Ot(t.Yr,n.Yr)}static Kr(t,n){return Ot(t.Yr,n.Yr)||mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(ze.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new j2(c,n,r,l);this.mutationQueue.push(f);for(const g of l)this.Zr=this.Zr.add(new ze(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return $.resolve(f)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?jm:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ze(n,0),l=new ze(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],f=>{const g=this.Xr(f.Yr);c.push(g)}),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ve(Ot);return n.forEach(l=>{const c=new ze(l,0),f=new ze(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],g=>{r=r.add(g.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,l=r.length+1;let c=r;mt.isDocumentKey(c)||(c=c.child(""));const f=new ze(new mt(c),0);let g=new Ve(Ot);return this.Zr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)},f),$.resolve(this.ti(g))}ti(t){const n=[];return t.forEach(r=>{const l=this.Xr(r);l!==null&&n.push(l)}),n}removeMutationBatch(t,n){Qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,l=>{const c=new ze(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=r})}ir(t){}containsKey(t,n){const r=new ze(n,0),l=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t){this.ri=t,this.docs=function(){return new ce(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(t,n){let r=Zi();return n.forEach(l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():tn.newInvalidDocument(l))}),$.resolve(r)}getDocumentsMatchingQuery(t,n,r,l){let c=Zi();const f=n.path,g=new mt(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||t2(JR(T),r)<=0||(l.has(T.key)||_h(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(t,n,r,l){vt(9500)}ii(t,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new RI(this)}getSize(t){return $.resolve(this.size)}}class RI extends _I{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.persistence=t,this.si=new Hr(n=>qm(n),Hm),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new Ym,this.targetCount=0,this.ai=Wa.ur()}forEachTarget(t,n){return this.si.forEach((r,l)=>n(l)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Wa(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,r){let l=0;const c=[];return this.si.forEach((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),$.waitFor(c).next(()=>l)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(f=>{c.push(l.markPotentiallyOrphaned(t,f))}),$.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,n){this.ui={},this.overlays={},this.ci=new dh(0),this.li=!1,this.li=!0,this.hi=new SI,this.referenceDelegate=t(this),this.Pi=new II(this),this.indexManager=new hI,this.remoteDocumentCache=function(l){return new wI(l)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new uI(n),this.Ii=new TI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new bI(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){ot("MemoryPersistence","Starting transaction:",t);const l=new CI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next(c=>this.referenceDelegate.di(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}Ai(t,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(t,n)))}}class CI extends n2{constructor(t){super(),this.currentSequenceNumber=t}}class Xm{constructor(t){this.persistence=t,this.Ri=new Ym,this.Vi=null}static mi(t){return new Xm(t)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(l=>this.fi.add(l.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(l=>{l.forEach(c=>this.fi.add(c.toString()))}).next(()=>r.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const l=mt.fromPath(r);return this.gi(t,l).next(c=>{c||n.removeEntry(l,At.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class ih{constructor(t,n){this.persistence=t,this.pi=new Hr(r=>r2(r.path),(r,l)=>r.isEqual(l)),this.garbageCollector=yI(this,n)}static mi(t,n){return new ih(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(l=>r+l))}wr(t){let n=0;return this.pr(t,r=>{n++}).next(()=>n)}pr(t,n){return $.forEach(this.pi,(r,l)=>this.br(t,r,l).next(c=>c?$.resolve():n(l)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,f=>this.br(t,f,n).next(g=>{g||(r++,c.removeEntry(f,At.min()))})).next(()=>c.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),$.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Pc(t.data.value)),n}br(t,n,r){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,n,r,l){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=l}static As(t,n){let r=Vt(),l=Vt();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new $m(t,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rS()?8:i2(en())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,l){const c={result:null};return this.ys(t,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ws(t,n,l,r).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new xI;return this.Ss(t,n,f).next(g=>{if(c.result=g,this.Vs)return this.bs(t,n,f,g.size)})}).next(()=>c.result)}bs(t,n,r,l){return r.documentReadCount<this.fs?(La()<=Dt.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",Ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(La()<=Dt.DEBUG&&ot("QueryEngine","Query:",Ua(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(La()<=Dt.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",Ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mi(n))):$.resolve())}ys(t,n){if(G0(n))return $.resolve(null);let r=mi(n);return this.indexManager.getIndexType(t,r).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=Jc(n,null,"F"),r=mi(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(c=>{const f=Vt(...c);return this.ps.getDocuments(t,f).next(g=>this.indexManager.getMinOffset(t,r).next(p=>{const y=this.Ds(n,g);return this.Cs(n,y,f,p.readTime)?this.ys(t,Jc(n,null,"F")):this.vs(t,y,n,p)}))})))}ws(t,n,r,l){return G0(n)||l.isEqual(At.min())?$.resolve(null):this.ps.getDocuments(t,r).next(c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,l)?$.resolve(null):(La()<=Dt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ua(n)),this.vs(t,f,n,WR(l,kl)).next(g=>g))})}Ds(t,n){let r=new Ve(KE(t));return n.forEach((l,c)=>{_h(t,c)&&(r=r.add(c))}),r}Cs(t,n,r,l){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,r){return La()<=Dt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",Ua(n)),this.ps.getDocumentsMatchingQuery(t,n,zs.min(),r)}vs(t,n,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="LocalStore",DI=3e8;class OI{constructor(t,n,r,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ce(Ot),this.xs=new Hr(c=>qm(c),Hm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new EI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function VI(s,t,n,r){return new OI(s,t,n,r)}async function yT(s,t){const n=St(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next(c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const f=[],g=[];let p=Vt();for(const y of l){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next(y=>({Ls:y,removedBatchIds:f,addedBatchIds:g}))})})}function MI(s,t){const n=St(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return function(g,p,y,T){const b=y.batch,S=b.keys();let z=$.resolve();return S.forEach(X=>{z=z.next(()=>T.getEntry(p,X)).next(tt=>{const W=y.docVersions.get(X);Qt(W!==null,48541),tt.version.compareTo(W)<0&&(b.applyToRemoteDocument(tt,y),tt.isValidDocument()&&(tt.setReadTime(y.commitVersion),T.addEntry(tt)))})}),z.next(()=>g.mutationQueue.removeMutationBatch(p,b))}(n,r,t,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let p=Vt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(t))).next(()=>n.localDocuments.getDocuments(r,l))})}function _T(s){const t=St(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function kI(s,t){const n=St(s),r=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach((T,b)=>{const S=l.get(b);if(!S)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,b).next(()=>n.Pi.addMatchingKeys(c,T.addedDocuments,b)));let z=S.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(b)!==null?z=z.withResumeToken(Ye.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,r)),l=l.insert(b,z),function(tt,W,at){return tt.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-tt.snapshotVersion.toMicroseconds()>=DI?!0:at.addedDocuments.size+at.modifiedDocuments.size+at.removedDocuments.size>0}(S,z,T)&&g.push(n.Pi.updateTargetData(c,z))});let p=Zi(),y=Vt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(PI(c,f,t.documentUpdates).next(T=>{p=T.ks,y=T.qs})),!r.isEqual(At.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next(b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(T)}return $.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(n.Ms=l,c))}function PI(s,t,n){let r=Vt(),l=Vt();return n.forEach(c=>r=r.add(c)),t.getEntries(s,r).next(c=>{let f=Zi();return n.forEach((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(At.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):ot(Zm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{ks:f,qs:l}})}function LI(s,t){const n=St(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function UI(s,t){const n=St(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let l;return n.Pi.getTargetData(r,t).next(c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(r).next(f=>(l=new Ms(t,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next(()=>l))))}).then(r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r})}async function ym(s,t,n){const r=St(s),l=r.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!ro(f))throw f;ot(Zm,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function iv(s,t,n){const r=St(s);let l=At.min(),c=Vt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(p,y,T){const b=St(p),S=b.xs.get(T);return S!==void 0?$.resolve(b.Ms.get(S)):b.Pi.getTargetData(y,T)}(r,f,mi(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next(p=>{c=p})}).next(()=>r.Fs.getDocumentsMatchingQuery(f,t,n?l:At.min(),n?c:Vt())).next(g=>(jI(r,b2(t),g),{documents:g,Qs:c})))}function jI(s,t,n){let r=s.Os.get(t)||At.min();n.forEach((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),s.Os.set(t,r)}class sv{constructor(){this.activeTargetIds=N2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zI{constructor(){this.Mo=new sv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new sv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="ConnectivityMonitor";class av{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(rv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ot(rv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function _m(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="RestConnection",qI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===$c?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,n,r,l,c){const f=_m(),g=this.zo(t,n.toUriEncodedString());ot(Yd,`Sending RPC '${t}' ${f}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:y}=new URL(g),T=to(y);return this.Jo(t,g,p,r,T).then(b=>(ot(Yd,`Received RPC '${t}' ${f}: `,b),b),b=>{throw Ya(Yd,`RPC '${t}' ${f} failed with error: `,b,"url: ",g,"request:",r),b})}Ho(t,n,r,l,c,f){return this.Go(t,n,r,l,c)}jo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>t[c]=l),r&&r.headers.forEach((l,c)=>t[c]=l)}zo(t,n){const r=qI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class FI extends HI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,l,c){const f=_m();return new Promise((g,p)=>{const y=new EE;y.setWithCredentials(!0),y.listenOnce(TE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case kc.NO_ERROR:const b=y.getResponseJson();ot(We,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(b)),g(b);break;case kc.TIMEOUT:ot(We,`RPC '${t}' ${f} timed out`),p(new rt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const S=y.getStatus();if(ot(We,`RPC '${t}' ${f} failed with status:`,S,"response text:",y.getResponseText()),S>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=z==null?void 0:z.error;if(X&&X.status&&X.message){const tt=function(at){const it=at.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(it)>=0?it:Q.UNKNOWN}(X.status);p(new rt(tt,X.message))}else p(new rt(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new rt(Q.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ot(We,`RPC '${t}' ${f} completed.`)}});const T=JSON.stringify(l);ot(We,`RPC '${t}' ${f} sending request:`,l),y.send(n,"POST",T,r,15)})}T_(t,n,r){const l=_m(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=bE(),g=SE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=c.join("");ot(We,`Creating RPC '${t}' stream ${l}: ${T}`,p);const b=f.createWebChannel(T,p);this.I_(b);let S=!1,z=!1;const X=new GI({Yo:W=>{z?ot(We,`Not sending because RPC '${t}' stream ${l} is closed:`,W):(S||(ot(We,`Opening RPC '${t}' stream ${l} transport.`),b.open(),S=!0),ot(We,`RPC '${t}' stream ${l} sending:`,W),b.send(W))},Zo:()=>b.close()}),tt=(W,at,it)=>{W.listen(at,dt=>{try{it(dt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return tt(b,Al.EventType.OPEN,()=>{z||(ot(We,`RPC '${t}' stream ${l} transport opened.`),X.o_())}),tt(b,Al.EventType.CLOSE,()=>{z||(z=!0,ot(We,`RPC '${t}' stream ${l} transport closed`),X.a_(),this.E_(b))}),tt(b,Al.EventType.ERROR,W=>{z||(z=!0,Ya(We,`RPC '${t}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),X.a_(new rt(Q.UNAVAILABLE,"The operation could not be completed")))}),tt(b,Al.EventType.MESSAGE,W=>{var at;if(!z){const it=W.data[0];Qt(!!it,16349);const dt=it,Mt=(dt==null?void 0:dt.error)||((at=dt[0])==null?void 0:at.error);if(Mt){ot(We,`RPC '${t}' stream ${l} received error:`,Mt);const Tt=Mt.status;let Rt=function(x){const O=we[x];if(O!==void 0)return rT(O)}(Tt),M=Mt.message;Rt===void 0&&(Rt=Q.INTERNAL,M="Unknown error status: "+Tt+" with message "+Mt.message),z=!0,X.a_(new rt(Rt,M)),b.close()}else ot(We,`RPC '${t}' stream ${l} received:`,it),X.u_(it)}}),tt(g,AE.STAT_EVENT,W=>{W.stat===am.PROXY?ot(We,`RPC '${t}' stream ${l} detected buffering proxy`):W.stat===am.NOPROXY&&ot(We,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{X.__()},0),X}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(s){return new X2(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n,r=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ot("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class ET{constructor(t,n,r,l,c,f,g,p){this.Mi=t,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?($i(n.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,l])=>{this.D_===n&&this.G_(r,l)},r=>{t(()=>{const l=new rt(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)})})}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{r(()=>this.z_(l))}),this.stream.onMessage(l=>{r(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ot(ov,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(ot(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QI extends ET{constructor(t,n,r,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=W2(this.serializer,t),r=function(c){if(!("targetChange"in c))return At.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?At.min():f.readTime?gi(f.readTime):At.min()}(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=pm(this.serializer),n.addTarget=function(c,f){let g;const p=f.target;if(g=hm(p)?{documents:eI(c,p)}:{query:nI(c,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=lT(c,f.resumeToken);const y=dm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(At.min())>0){g.readTime=nh(c,f.snapshotVersion.toTimestamp());const y=dm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,t);const r=sI(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=pm(this.serializer),n.removeTarget=t,this.q_(n)}}class KI extends ET{constructor(t,n,r,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=tI(t.writeResults,t.commitTime),r=gi(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=pm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>J2(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{}class XI extends YI{constructor(t,n,r,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Go(t,mm(n,r),l,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new rt(Q.UNKNOWN,c.toString())})}Ho(t,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Ho(t,mm(n,r),l,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new rt(Q.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class $I{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($i(n),this.aa=!1):ot("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="RemoteStore";class ZI{constructor(t,n,r,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(f=>{r.enqueueAndForget(async()=>{Gr(this)&&(ot(Br,"Restarting streams for network reachability change."),await async function(p){const y=St(p);y.Ea.add(4),await Zl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Sh(y)}(this))})}),this.Ra=new $I(r,l)}}async function Sh(s){if(Gr(s))for(const t of s.da)await t(!0)}async function Zl(s){for(const t of s.da)await t(!1)}function TT(s,t){const n=St(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),eg(n)?tg(n):oo(n).O_()&&Jm(n,t))}function Wm(s,t){const n=St(s),r=oo(n);n.Ia.delete(t),r.O_()&&AT(n,t),n.Ia.size===0&&(r.O_()?r.L_():Gr(n)&&n.Ra.set("Unknown"))}function Jm(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}oo(s).Y_(t)}function AT(s,t){s.Va.Ue(t),oo(s).Z_(t)}function tg(s){s.Va=new F2({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),oo(s).start(),s.Ra.ua()}function eg(s){return Gr(s)&&!oo(s).x_()&&s.Ia.size>0}function Gr(s){return St(s).Ea.size===0}function ST(s){s.Va=void 0}async function WI(s){s.Ra.set("Online")}async function JI(s){s.Ia.forEach((t,n)=>{Jm(s,t)})}async function tC(s,t){ST(s),eg(s)?(s.Ra.ha(t),tg(s)):s.Ra.set("Unknown")}async function eC(s,t,n){if(s.Ra.set("Online"),t instanceof oT&&t.state===2&&t.cause)try{await async function(l,c){const f=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ia.delete(g),l.Va.removeTarget(g))}(s,t)}catch(r){ot(Br,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await sh(s,r)}else if(t instanceof jc?s.Va.Ze(t):t instanceof aT?s.Va.st(t):s.Va.tt(t),!n.isEqual(At.min()))try{const r=await _T(s.localStore);n.compareTo(r)>=0&&await function(c,f){const g=c.Va.Tt(f);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(p.resumeToken,f))}}),g.targetMismatches.forEach((p,y)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(Ye.EMPTY_BYTE_STRING,T.snapshotVersion)),AT(c,p);const b=new Ms(T.target,p,y,T.sequenceNumber);Jm(c,b)}),c.remoteSyncer.applyRemoteEvent(g)}(s,n)}catch(r){ot(Br,"Failed to raise snapshot:",r),await sh(s,r)}}async function sh(s,t,n){if(!ro(t))throw t;s.Ea.add(1),await Zl(s),s.Ra.set("Offline"),n||(n=()=>_T(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ot(Br,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Sh(s)})}function bT(s,t){return t().catch(n=>sh(s,n,t))}async function bh(s){const t=St(s),n=Gs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:jm;for(;nC(t);)try{const l=await LI(t.localStore,r);if(l===null){t.Ta.length===0&&n.L_();break}r=l.batchId,iC(t,l)}catch(l){await sh(t,l)}wT(t)&&RT(t)}function nC(s){return Gr(s)&&s.Ta.length<10}function iC(s,t){s.Ta.push(t);const n=Gs(s);n.O_()&&n.X_&&n.ea(t.mutations)}function wT(s){return Gr(s)&&!Gs(s).x_()&&s.Ta.length>0}function RT(s){Gs(s).start()}async function sC(s){Gs(s).ra()}async function rC(s){const t=Gs(s);for(const n of s.Ta)t.ea(n.mutations)}async function aC(s,t,n){const r=s.Ta.shift(),l=Fm.from(r,t,n);await bT(s,()=>s.remoteSyncer.applySuccessfulWrite(l)),await bh(s)}async function oC(s,t){t&&Gs(s).X_&&await async function(r,l){if(function(f){return q2(f)&&f!==Q.ABORTED}(l.code)){const c=r.Ta.shift();Gs(r).B_(),await bT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l)),await bh(r)}}(s,t),wT(s)&&RT(s)}async function lv(s,t){const n=St(s);n.asyncQueue.verifyOperationInProgress(),ot(Br,"RemoteStore received new credentials");const r=Gr(n);n.Ea.add(3),await Zl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Sh(n)}async function lC(s,t){const n=St(s);t?(n.Ea.delete(2),await Sh(n)):t||(n.Ea.add(2),await Zl(n),n.Ra.set("Unknown"))}function oo(s){return s.ma||(s.ma=function(n,r,l){const c=St(n);return c.sa(),new QI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(s.datastore,s.asyncQueue,{Xo:WI.bind(null,s),t_:JI.bind(null,s),r_:tC.bind(null,s),H_:eC.bind(null,s)}),s.da.push(async t=>{t?(s.ma.B_(),eg(s)?tg(s):s.Ra.set("Unknown")):(await s.ma.stop(),ST(s))})),s.ma}function Gs(s){return s.fa||(s.fa=function(n,r,l){const c=St(n);return c.sa(),new KI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:sC.bind(null,s),r_:oC.bind(null,s),ta:rC.bind(null,s),na:aC.bind(null,s)}),s.da.push(async t=>{t?(s.fa.B_(),await bh(s)):(await s.fa.stop(),s.Ta.length>0&&(ot(Br,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t,n,r,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,l,c){const f=Date.now()+r,g=new ng(t,n,f,l,c);return g.start(r),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(s,t){if($i("AsyncQueue",`${t}: ${s}`),ro(s))return new rt(Q.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(t){return new Qa(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||mt.comparator(n.key,r.key):(n,r)=>mt.comparator(n.key,r.key),this.keyedMap=Sl(),this.sortedSet=new ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Qa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.ga=new ce(mt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):vt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ja{constructor(t,n,r,l,c,f,g,p,y){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,r,l,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new Ja(t,n,Qa.emptySet(n),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class cC{constructor(){this.queries=cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=St(n),c=l.queries;l.queries=cv(),c.forEach((f,g)=>{for(const p of g.Sa)p.onError(r)})})(this,new rt(Q.ABORTED,"Firestore shutting down"))}}function cv(){return new Hr(s=>QE(s),yh)}async function sg(s,t){const n=St(s);let r=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(r=2):(c=new uC,r=t.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=ig(f,`Initialization of query '${Ua(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&ag(n)}async function rg(s,t){const n=St(s),r=t.query;let l=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hC(s,t){const n=St(s);let r=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Fa(l)&&(r=!0);f.wa=l}}r&&ag(n)}function fC(s,t,n){const r=St(s),l=r.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(t)}function ag(s){s.Ca.forEach(t=>{t.next()})}var vm,hv;(hv=vm||(vm={})).Ma="default",hv.Cache="cache";class og{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Ja(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ja.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.key=t}}class CT{constructor(t){this.key=t}}class dC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=KE(t),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new uv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((T,b)=>{const S=l.get(T),z=_h(this.query,b)?b:null,X=!!S&&this.mutatedKeys.has(S.key),tt=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let W=!1;S&&z?S.data.isEqual(z.data)?X!==tt&&(r.track({type:3,doc:z}),W=!0):this.su(S,z)||(r.track({type:2,doc:z}),W=!0,(p&&this.eu(z,p)>0||y&&this.eu(z,y)<0)&&(g=!0)):!S&&z?(r.track({type:0,doc:z}),W=!0):S&&!z&&(r.track({type:1,doc:S}),W=!0,(p||y)&&(g=!0)),W&&(z?(f=f.add(z),c=tt?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:g,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort((T,b)=>function(z,X){const tt=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:W})}};return tt(z)-tt(X)}(T.type,b.type)||this.eu(T.doc,b.doc)),this.ou(r),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new Ja(this.query,t.tu,c,f,t.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return t.forEach(r=>{this.Xa.has(r)||n.push(new CT(r))}),this.Xa.forEach(r=>{t.has(r)||n.push(new IT(r))}),n}cu(t){this.Ya=t.Qs,this.Xa=Vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lg="SyncEngine";class mC{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class gC{constructor(t){this.key=t,this.hu=!1}}class pC{constructor(t,n,r,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Hr(g=>QE(g),yh),this.Iu=new Map,this.Eu=new Set,this.du=new ce(mt.comparator),this.Au=new Map,this.Ru=new Ym,this.Vu={},this.mu=new Map,this.fu=Wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yC(s,t,n=!0){const r=MT(s);let l;const c=r.Tu.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await xT(r,t,n,!0),l}async function _C(s,t){const n=MT(s);await xT(n,t,!0,!1)}async function xT(s,t,n,r){const l=await UI(s.localStore,mi(t)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let g;return r&&(g=await vC(s,t,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&TT(s.remoteStore,l),g}async function vC(s,t,n,r,l){s.pu=(b,S,z)=>async function(tt,W,at,it){let dt=W.view.ru(at);dt.Cs&&(dt=await iv(tt.localStore,W.query,!1).then(({documents:M})=>W.view.ru(M,dt)));const Mt=it&&it.targetChanges.get(W.targetId),Tt=it&&it.targetMismatches.get(W.targetId)!=null,Rt=W.view.applyChanges(dt,tt.isPrimaryClient,Mt,Tt);return dv(tt,W.targetId,Rt.au),Rt.snapshot}(s,b,S,z);const c=await iv(s.localStore,t,!0),f=new dC(t,c.Qs),g=f.ru(c.documents),p=$l.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),y=f.applyChanges(g,s.isPrimaryClient,p);dv(s,n,y.au);const T=new mC(t,n,f);return s.Tu.set(t,T),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),y.snapshot}async function EC(s,t,n){const r=St(s),l=r.Tu.get(t),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter(f=>!yh(f,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await ym(r.localStore,l.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Wm(r.remoteStore,l.targetId),Em(r,l.targetId)}).catch(so)):(Em(r,l.targetId),await ym(r.localStore,l.targetId,!0))}async function TC(s,t){const n=St(s),r=n.Tu.get(t),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wm(n.remoteStore,r.targetId))}async function AC(s,t,n){const r=xC(s);try{const l=await function(f,g){const p=St(f),y=re.now(),T=g.reduce((z,X)=>z.add(X.key),Vt());let b,S;return p.persistence.runTransaction("Locally write mutations","readwrite",z=>{let X=Zi(),tt=Vt();return p.Ns.getEntries(z,T).next(W=>{X=W,X.forEach((at,it)=>{it.isValidDocument()||(tt=tt.add(at))})}).next(()=>p.localDocuments.getOverlayedDocuments(z,X)).next(W=>{b=W;const at=[];for(const it of g){const dt=L2(it,b.get(it.key).overlayedDocument);dt!=null&&at.push(new $s(it.key,dt,UE(dt.value.mapValue),Qn.exists(!0)))}return p.mutationQueue.addMutationBatch(z,y,at,g)}).next(W=>{S=W;const at=W.applyToLocalDocumentSet(b,tt);return p.documentOverlayCache.saveOverlays(z,W.batchId,at)})}).then(()=>({batchId:S.batchId,changes:XE(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),function(f,g,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new ce(Ot)),y=y.insert(g,p),f.Vu[f.currentUser.toKey()]=y}(r,l.batchId,n),await Wl(r,l.changes),await bh(r.remoteStore)}catch(l){const c=ig(l,"Failed to persist write");n.reject(c)}}async function NT(s,t){const n=St(s);try{const r=await kI(n.localStore,t);t.targetChanges.forEach((l,c)=>{const f=n.Au.get(c);f&&(Qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Qt(f.hu,14607):l.removedDocuments.size>0&&(Qt(f.hu,42227),f.hu=!1))}),await Wl(n,r,t)}catch(r){await so(r)}}function fv(s,t,n){const r=St(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach((c,f)=>{const g=f.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(f,g){const p=St(f);p.onlineState=g;let y=!1;p.queries.forEach((T,b)=>{for(const S of b.Sa)S.va(g)&&(y=!0)}),y&&ag(p)}(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function SC(s,t,n){const r=St(s);r.sharedClientState.updateQueryState(t,"rejected",n);const l=r.Au.get(t),c=l&&l.key;if(c){let f=new ce(mt.comparator);f=f.insert(c,tn.newNoDocument(c,At.min()));const g=Vt().add(c),p=new Th(At.min(),new Map,new ce(Ot),f,g);await NT(r,p),r.du=r.du.remove(c),r.Au.delete(t),ug(r)}else await ym(r.localStore,t,!1).then(()=>Em(r,t,n)).catch(so)}async function bC(s,t){const n=St(s),r=t.batch.batchId;try{const l=await MI(n.localStore,t);OT(n,r,null),DT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wl(n,l)}catch(l){await so(l)}}async function wC(s,t,n){const r=St(s);try{const l=await function(f,g){const p=St(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next(b=>(Qt(b!==null,37113),T=b.keys(),p.mutationQueue.removeMutationBatch(y,b))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>p.localDocuments.getDocuments(y,T))})}(r.localStore,t);OT(r,t,n),DT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wl(r,l)}catch(l){await so(l)}}function DT(s,t){(s.mu.get(t)||[]).forEach(n=>{n.resolve()}),s.mu.delete(t)}function OT(s,t,n){const r=St(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function Em(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach(r=>{s.Ru.containsKey(r)||VT(s,r)})}function VT(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(Wm(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),ug(s))}function dv(s,t,n){for(const r of n)r instanceof IT?(s.Ru.addReference(r.key,t),RC(s,r)):r instanceof CT?(ot(lg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||VT(s,r.key)):vt(19791,{wu:r})}function RC(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ot(lg,"New document in limbo: "+n),s.Eu.add(r),ug(s))}function ug(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new mt(se.fromString(t)),r=s.fu.next();s.Au.set(r,new gC(n)),s.du=s.du.insert(n,r),TT(s.remoteStore,new Ms(mi(ph(n.path)),r,"TargetPurposeLimboResolution",dh.ce))}}async function Wl(s,t,n){const r=St(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach((g,p)=>{f.push(r.pu(p,t,n).then(y=>{var T;if((y||n)&&r.isPrimaryClient){const b=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){l.push(y);const b=$m.As(p.targetId,y);c.push(b)}}))}),await Promise.all(f),r.Pu.H_(l),await async function(p,y){const T=St(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>$.forEach(y,S=>$.forEach(S.Es,z=>T.persistence.referenceDelegate.addReference(b,S.targetId,z)).next(()=>$.forEach(S.ds,z=>T.persistence.referenceDelegate.removeReference(b,S.targetId,z)))))}catch(b){if(!ro(b))throw b;ot(Zm,"Failed to update sequence numbers: "+b)}for(const b of y){const S=b.targetId;if(!b.fromCache){const z=T.Ms.get(S),X=z.snapshotVersion,tt=z.withLastLimboFreeSnapshotVersion(X);T.Ms=T.Ms.insert(S,tt)}}}(r.localStore,c))}async function IC(s,t){const n=St(s);if(!n.currentUser.isEqual(t)){ot(lg,"User change. New user:",t.toKey());const r=await yT(n.localStore,t);n.currentUser=t,function(c,f){c.mu.forEach(g=>{g.forEach(p=>{p.reject(new rt(Q.CANCELLED,f))})}),c.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Wl(n,r.Ls)}}function CC(s,t){const n=St(s),r=n.Au.get(t);if(r&&r.hu)return Vt().add(r.key);{let l=Vt();const c=n.Iu.get(t);if(!c)return l;for(const f of c){const g=n.Tu.get(f);l=l.unionWith(g.view.nu)}return l}}function MT(s){const t=St(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SC.bind(null,t),t.Pu.H_=hC.bind(null,t.eventManager),t.Pu.yu=fC.bind(null,t.eventManager),t}function xC(s){const t=St(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wC.bind(null,t),t}class rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ah(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return VI(this.persistence,new NI,t.initialUser,this.serializer)}Cu(t){return new pT(Xm.mi,this.serializer)}Du(t){return new zI}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rh.provider={build:()=>new rh};class NC extends rh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Qt(this.persistence.referenceDelegate instanceof ih,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gI(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new pT(r=>ih.mi(r,n),this.serializer)}}class Tm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IC.bind(null,this.syncEngine),await lC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new cC}()}createDatastore(t){const n=Ah(t.databaseInfo.databaseId),r=function(c){return new FI(c)}(t.databaseInfo);return function(c,f,g,p){return new XI(c,f,g,p)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,l,c,f,g){return new ZI(r,l,c,f,g)}(this.localStore,this.datastore,t.asyncQueue,n=>fv(this.syncEngine,n,0),function(){return av.v()?new av:new BI}())}createSyncEngine(t,n){return function(l,c,f,g,p,y,T){const b=new pC(l,c,f,g,p,y);return T&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(l){const c=St(l);ot(Br,"RemoteStore shutting down."),c.Ea.add(5),await Zl(c),c.Aa.shutdown(),c.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):$i("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class DC{constructor(t,n,r,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Je.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async f=>{ot(Fs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(ot(Fs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ig(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $d(s,t){s.asyncQueue.verifyOperationInProgress(),ot(Fs,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async l=>{r.isEqual(l)||(await yT(t.localStore,l),r=l)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function mv(s,t){s.asyncQueue.verifyOperationInProgress();const n=await OC(s);ot(Fs,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener(r=>lv(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,l)=>lv(t.remoteStore,l)),s._onlineComponents=t}async function OC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ot(Fs,"Using user provided OfflineComponentProvider");try{await $d(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Ya("Error using user provided cache. Falling back to memory cache: "+n),await $d(s,new rh)}}else ot(Fs,"Using default OfflineComponentProvider"),await $d(s,new NC(void 0));return s._offlineComponents}async function kT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ot(Fs,"Using user provided OnlineComponentProvider"),await mv(s,s._uninitializedComponentsProvider._online)):(ot(Fs,"Using default OnlineComponentProvider"),await mv(s,new Tm))),s._onlineComponents}function VC(s){return kT(s).then(t=>t.syncEngine)}async function ah(s){const t=await kT(s),n=t.eventManager;return n.onListen=yC.bind(null,t.syncEngine),n.onUnlisten=EC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_C.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=TC.bind(null,t.syncEngine),n}function MC(s,t,n={}){const r=new Ki;return s.asyncQueue.enqueueAndForget(async()=>function(c,f,g,p,y){const T=new cg({next:S=>{T.Nu(),f.enqueueAndForget(()=>rg(c,b));const z=S.docs.has(g);!z&&S.fromCache?y.reject(new rt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&S.fromCache&&p&&p.source==="server"?y.reject(new rt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),b=new og(ph(g.path),T,{includeMetadataChanges:!0,qa:!0});return sg(c,b)}(await ah(s),s.asyncQueue,t,n,r)),r.promise}function kC(s,t,n={}){const r=new Ki;return s.asyncQueue.enqueueAndForget(async()=>function(c,f,g,p,y){const T=new cg({next:S=>{T.Nu(),f.enqueueAndForget(()=>rg(c,b)),S.fromCache&&p.source==="server"?y.reject(new rt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),b=new og(g,T,{includeMetadataChanges:!0,qa:!0});return sg(c,b)}(await ah(s),s.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firestore.googleapis.com",pv=!0;class yv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LT,this.ssl=pv}else this.host=t.host,this.ssl=t.ssl??pv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<dI)throw new rt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$R("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(t.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,l){return r.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wh{constructor(t,n,r,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zR;switch(r.type){case"firstParty":return new GR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new rt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gv.get(n);r&&(ot("ComponentProvider","Removing Datastore"),gv.delete(n),r.terminate())}(this),Promise.resolve()}}function PC(s,t,n,r={}){var y;s=An(s,wh);const l=to(t),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},g=`${t}:${n}`;l&&(Dv(`https://${g}`),Ov("Firestore",!0)),c.host!==LT&&c.host!==g&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:r};if(!Pr(p,f)&&(s._setSettings(p),r.mockUserToken)){let T,b;if(typeof r.mockUserToken=="string")T=r.mockUserToken,b=Je.MOCK_USER;else{T=$A(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new rt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Je(S)}s._authCredentials=new BR(new RE(T,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ji(this.firestore,t,this._query)}}class me{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Yl(n,me._jsonSchema))return new me(t,r||null,new mt(se.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Ie("string",me._jsonSchemaVersion),referencePath:Ie("string")};class js extends Ji{constructor(t,n,r){super(t,n,ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new mt(t))}withConverter(t){return new js(this.firestore,t,this._path)}}function Rh(s,t,...n){if(s=Me(s),IE("collection","path",t),s instanceof wh){const r=se.fromString(t,...n);return N0(r),new js(s,null,r)}{if(!(s instanceof me||s instanceof js))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(se.fromString(t,...n));return N0(r),new js(s.firestore,null,r)}}function lo(s,t,...n){if(s=Me(s),arguments.length===1&&(t=Um.newId()),IE("doc","path",t),s instanceof wh){const r=se.fromString(t,...n);return x0(r),new me(s,null,new mt(r))}{if(!(s instanceof me||s instanceof js))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(se.fromString(t,...n));return x0(r),new me(s.firestore,s instanceof js?s.converter:null,new mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="AsyncQueue";class vv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vT(this,"async_queue_retry"),this._c=()=>{const r=Xd();r&&ot(_v,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ki;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ro(t))throw t;ot(_v,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(r=>{throw this.nc=r,this.rc=!1,$i("INTERNAL UNHANDLED ERROR: ",Ev(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=ng.createAndSchedule(this,t,n,r,c=>this.hc(c));return this.tc.push(l),l}uc(){this.nc&&vt(47125,{Pc:Ev(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Ev(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1}(s,["next","error","complete"])}class Qs extends wh{constructor(t,n,r,l){super(t,n,r,l),this.type="firestore",this._queue=new vv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vv(t),this._firestoreClient=void 0,await t}}}function LC(s,t){const n=typeof s=="object"?s:Pv(),r=typeof s=="string"?s:$c,l=Cm(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=YA("firestore");c&&PC(l,...c)}return l}function Ih(s){if(s._terminated)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||UC(s),s._firestoreClient}function UC(s){var r,l,c;const t=s._freezeSettings(),n=function(g,p,y,T){return new l2(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,PT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new DC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ln(Ye.fromBase64String(t))}catch(n){throw new rt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ln(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yl(t,Ln._jsonSchema))return Ln.fromBase64String(t.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Ie("string",Ln._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pi._jsonSchemaVersion}}static fromJSON(t){if(Yl(t,pi._jsonSchema))return new pi(t.latitude,t.longitude)}}pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Ie("string",pi._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0}(this._values,t._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yl(t,yi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new yi(t.vectorValues);throw new rt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ie("string",yi._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^__.*__$/;class zC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new $s(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xl(t,this.data,n,this.fieldTransforms)}}class UT{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new $s(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function jT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:s})}}class fg{constructor(t,n,r,l,c,f){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new fg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(jT(this.Ac)&&jC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class BC{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(t)}Cc(t,n,r,l=!1){return new fg({Ac:t,methodName:n,Dc:r,path:Ke.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xh(s){const t=s._freezeSettings(),n=Ah(s._databaseId);return new BC(s._databaseId,!!t.ignoreUndefinedProperties,n)}function zT(s,t,n,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,t,n,l);dg("Data must be an object, but it was:",f,r);const g=BT(r,f);let p,y;if(c.merge)p=new Tn(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const b of c.mergeFields){const S=Am(t,b,n);if(!f.contains(S))throw new rt(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);HT(T,S)||T.push(S)}p=new Tn(T),y=f.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,y=f.fieldTransforms;return new zC(new hn(g),p,y)}class Nh extends hg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nh}}function qC(s,t,n,r){const l=s.Cc(1,t,n);dg("Data must be an object, but it was:",l,r);const c=[],f=hn.empty();Xs(r,(p,y)=>{const T=mg(t,p,n);y=Me(y);const b=l.yc(T);if(y instanceof Nh)c.push(T);else{const S=Jl(y,b);S!=null&&(c.push(T),f.set(T,S))}});const g=new Tn(c);return new UT(f,g,l.fieldTransforms)}function HC(s,t,n,r,l,c){const f=s.Cc(1,t,n),g=[Am(t,r,n)],p=[l];if(c.length%2!=0)throw new rt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)g.push(Am(t,c[S])),p.push(c[S+1]);const y=[],T=hn.empty();for(let S=g.length-1;S>=0;--S)if(!HT(y,g[S])){const z=g[S];let X=p[S];X=Me(X);const tt=f.yc(z);if(X instanceof Nh)y.push(z);else{const W=Jl(X,tt);W!=null&&(y.push(z),T.set(z,W))}}const b=new Tn(y);return new UT(T,b,f.fieldTransforms)}function GC(s,t,n,r=!1){return Jl(n,s.Cc(r?4:3,t))}function Jl(s,t){if(qT(s=Me(s)))return dg("Unsupported field value:",t,s),BT(s,t);if(s instanceof hg)return function(r,l){if(!jT(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(r,l){const c=[];let f=0;for(const g of r){let p=Jl(g,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}}(s,t)}return function(r,l){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D2(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=re.fromDate(r);return{timestampValue:nh(l.serializer,c)}}if(r instanceof re){const c=new re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(l.serializer,c)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:lT(l.serializer,r._byteString)};if(r instanceof me){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Km(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof yi)return function(f,g){return{mapValue:{fields:{[PE]:{stringValue:LE},[Zc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Gm(g.serializer,y)})}}}}}}(r,l);throw l.Sc(`Unsupported field value: ${fh(r)}`)}(s,t)}function BT(s,t){const n={};return NE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xs(s,(r,l)=>{const c=Jl(l,t.mc(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function qT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof re||s instanceof pi||s instanceof Ln||s instanceof me||s instanceof hg||s instanceof yi)}function dg(s,t,n){if(!qT(n)||!CE(n)){const r=fh(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function Am(s,t,n){if((t=Me(t))instanceof Ch)return t._internalPath;if(typeof t=="string")return mg(s,t);throw oh("Field path arguments must be of type string or ",s,!1,void 0,n)}const FC=new RegExp("[~\\*/\\[\\]]");function mg(s,t,n){if(t.search(FC)>=0)throw oh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ch(...t.split("."))._internalPath}catch{throw oh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function oh(s,t,n,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${r}`),f&&(p+=` in document ${l}`),p+=")"),new rt(Q.INVALID_ARGUMENT,g+s+p)}function HT(s,t){return s.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n,r,l,c){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QC extends GT{data(){return super.data()}}function gg(s,t){return typeof t=="string"?mg(s,t):t instanceof Ch?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new rt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class yg extends pg{}function QT(s,t,...n){let r=[];t instanceof pg&&r.push(t),r=r.concat(n),function(c){const f=c.filter(p=>p instanceof vg).length,g=c.filter(p=>p instanceof _g).length;if(f>1||f>0&&g>0)throw new rt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const l of r)s=l._apply(s);return s}class _g extends yg{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new _g(t,n,r)}_apply(t){const n=this._parse(t);return KT(t._query,n),new Ji(t.firestore,t.converter,fm(t._query,n))}_parse(t){const n=xh(t.firestore);return function(c,f,g,p,y,T,b){let S;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Sv(b,T);const X=[];for(const tt of b)X.push(Av(p,c,tt));S={arrayValue:{values:X}}}else S=Av(p,c,b)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Sv(b,T),S=GC(g,f,b,T==="in"||T==="not-in");return Re.create(y,T,S)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class vg extends pg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new vg(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(l,c){let f=l;const g=c.getFlattenedFilters();for(const p of g)KT(f,p),f=fm(f,p)}(t._query,n),new Ji(t.firestore,t.converter,fm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eg extends yg{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Eg(t,n)}_apply(t){const n=function(l,c,f){if(l.startAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jl(c,f)}(t._query,this._field,this._direction);return new Ji(t.firestore,t.converter,function(l,c){const f=l.explicitOrderBy.concat([c]);return new ao(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(t._query,n))}}function KC(s,t="asc"){const n=t,r=gg("orderBy",s);return Eg._create(r,n)}class Tg extends yg{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Tg(t,n,r)}_apply(t){return new Ji(t.firestore,t.converter,Jc(t._query,this._limit,this._limitType))}}function YC(s){return ZR("limit",s),Tg._create("limit",s,"F")}function Av(s,t,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new rt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(t)&&n.indexOf("/")!==-1)throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(se.fromString(n));if(!mt.isDocumentKey(r))throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return U0(s,new mt(r))}if(n instanceof me)return U0(s,n._key);throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function Sv(s,t){if(!Array.isArray(s)||s.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function KT(s,t){const n=function(l,c){for(const f of l)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class XC{convertValue(t,n="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Xs(t,(l,c)=>{r[l]=this.convertValue(c,n)}),r}convertVectorValue(t){var r,l,c;const n=(c=(l=(r=t.fields)==null?void 0:r[Zc].arrayValue)==null?void 0:l.values)==null?void 0:c.map(f=>_e(f.doubleValue));return new yi(n)}convertGeoPoint(t){return new pi(_e(t.latitude),_e(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=gh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pl(t));default:return null}}convertTimestamp(t){const n=Bs(t);return new re(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=se.fromString(t);Qt(mT(r),9688,{name:t});const l=new Ll(r.get(1),r.get(3)),c=new mt(r.popFirst(5));return l.isEqual(n)||$i(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(s,t,n){let r;return r=s?s.toFirestore(t):t,r}class wl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mr extends GT{constructor(t,n,r,l,c,f){super(t,n,r,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(gg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:Ie("string",Mr._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class zc extends Mr{data(t={}){return super.data(t)}}class kr{constructor(t,n,r,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new wl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(g=>{const p=new zc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new wl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new zc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new wl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:$C(g.type),doc:p,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=kr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function $C(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(s){s=An(s,me);const t=An(s.firestore,Qs);return MC(Ih(t),s._key).then(n=>WT(t,s,n))}kr._jsonSchemaVersion="firestore/querySnapshot/1.0",kr._jsonSchema={type:Ie("string",kr._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class Ag extends XC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ln(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function $T(s){s=An(s,Ji);const t=An(s.firestore,Qs),n=Ih(t),r=new Ag(t);return FT(s._query),kC(n,s._query).then(l=>new kr(t,r,s,l))}function ZC(s,t,n){s=An(s,me);const r=An(s.firestore,Qs),l=YT(s.converter,t);return Sg(r,[zT(xh(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Qn.none())])}function ZT(s,t,n,...r){s=An(s,me);const l=An(s.firestore,Qs),c=xh(l);let f;return f=typeof(t=Me(t))=="string"||t instanceof Ch?HC(c,"updateDoc",s._key,t,n,r):qC(c,"updateDoc",s._key,t),Sg(l,[f.toMutation(s._key,Qn.exists(!0))])}function WC(s,t){const n=An(s.firestore,Qs),r=lo(s),l=YT(s.converter,t);return Sg(n,[zT(xh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}function JC(s,...t){var p,y,T;s=Me(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Tv(t[r])||(n=t[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Tv(t[r])){const b=t[r];t[r]=(p=b.next)==null?void 0:p.bind(b),t[r+1]=(y=b.error)==null?void 0:y.bind(b),t[r+2]=(T=b.complete)==null?void 0:T.bind(b)}let c,f,g;if(s instanceof me)f=An(s.firestore,Qs),g=ph(s._key.path),c={next:b=>{t[r]&&t[r](WT(f,s,b))},error:t[r+1],complete:t[r+2]};else{const b=An(s,Ji);f=An(b.firestore,Qs),g=b._query;const S=new Ag(f);c={next:z=>{t[r]&&t[r](new kr(f,S,b,z))},error:t[r+1],complete:t[r+2]},FT(s._query)}return function(S,z,X,tt){const W=new cg(tt),at=new og(z,W,X);return S.asyncQueue.enqueueAndForget(async()=>sg(await ah(S),at)),()=>{W.Nu(),S.asyncQueue.enqueueAndForget(async()=>rg(await ah(S),at))}}(Ih(f),g,l,c)}function Sg(s,t){return function(r,l){const c=new Ki;return r.asyncQueue.enqueueAndForget(async()=>AC(await VC(r),l,c)),c.promise}(Ih(s),t)}function WT(s,t,n){const r=n.docs.get(t._key),l=new Ag(s);return new Mr(s,l,t._key,r,new wl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(l){io=l})(eo),Ka(new Lr("firestore",(r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),g=new Qs(new qR(r.getProvider("auth-internal")),new FR(f,r.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new rt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,T)}(f,l),f);return c={useFetchStreams:n,...c},g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Ls(w0,R0,t),Ls(w0,R0,"esm2020")})();const tx={apiKey:"AIzaSyDYlR9POLPSqn9yiQtu_WZa4rHOhbEsFDQ",authDomain:"curiow-432ed.firebaseapp.com",projectId:"curiow-432ed",storageBucket:"curiow-432ed.firebasestorage.app",messagingSenderId:"115136967854",appId:"1:115136967854:web:24228c1379993b8c61e93f",measurementId:"G-LF4YY7HHR3"},JT=kv(tx),Nc=UR(JT),ts=LC(JT),ex=async()=>{try{const s=Rh(ts,"channels");return(await $T(s)).docs.map(n=>({id:n.id,...n.data()}))}catch(s){return console.error("Error fetching channels:",s),[]}},nx=async(s=20)=>{try{const t=Rh(ts,"gems"),n=QT(t,YC(s));return(await $T(n)).docs.map(l=>({id:l.id,...l.data(),userQuestions:[]}))}catch(t){return console.error("Error fetching gems:",t),[]}},ix=async s=>{try{const t=lo(ts,"users",s),n=await XT(t);return n.exists()?n.data():null}catch(t){return console.error("Error fetching user profile:",t),null}},sx=async s=>{try{const t=lo(ts,"users",s),n=await XT(t);return n.exists()&&n.data().savedLists?n.data().savedLists:[]}catch(t){return console.error("Error fetching user saved lists:",t),[]}},rx=async(s,t,n,r)=>{const l=lo(ts,"users",s);await ZC(l,{email:t,firstName:n,lastName:r,savedLists:[{id:"default",name:"Preferiti Generici",gemIds:[]}]})},ax=async(s,t)=>{const n=lo(ts,"users",s);await ZT(n,t)},ox=async(s,t)=>{const n=lo(ts,"users",s);await ZT(n,{savedLists:t})},lx=async(s,t)=>{const n=Rh(ts,"gems",s,"userQuestions");await WC(n,{question:t,answer:"",isGenerating:!0,createdAt:new Date})},ux=(s,t)=>{const n=Rh(ts,"gems",s,"userQuestions"),r=QT(n,KC("createdAt","desc"));return JC(r,l=>{const c=l.docs.map(f=>({id:f.id,...f.data()}));t(c)})};var Ba=(s=>(s.GENERAL_CULTURE="Cultura Generale & Curiosità",s.SCIENCE_TECH="Scienza, Tecnologia & Futuro",s.ART_DESIGN="Arte, Design & Creatività",s.WELLBEING="Benessere & Sviluppo Personale",s.ECONOMY="Economia, Finanza & Società",s))(Ba||{});const cx=[Ba.GENERAL_CULTURE,Ba.SCIENCE_TECH,Ba.ART_DESIGN,Ba.WELLBEING,Ba.ECONOMY],bg=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),t1=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.186 2.25 2.25 0 0 0-3.933 2.186Z"})}),Dh=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),wg=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),hx=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),Sm=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),Rg=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),bm=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H12m4.5 0H21m-12 0H3.75m12 0a1.5 1.5 0 0 0-1.5-1.5H7.5a1.5 1.5 0 0 0-1.5 1.5m12 0v12.75A1.5 1.5 0 0 1 16.5 18h-9a1.5 1.5 0 0 1-1.5-1.5V3.75m1.5-1.5h9a1.5 1.5 0 0 1 1.5 1.5v12.75"})}),e1=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.003 1.11-1.226l.05-.022c.556-.23 1.156-.23 1.712 0l.05.022c.55.223 1.02.684 1.11 1.226l.06.353c.184.992.52 1.95 1.01 2.82l.05.09c.48.85.99 1.64 1.56 2.34l.05.06c.56.69.96 1.45 1.18 2.26l.02.09c.22.8.22 1.64 0 2.44l-.02.09a4.5 4.5 0 0 1-1.18 2.26l-.05.06c-.56.7-1.08 1.49-1.56 2.34l-.05.09c-.49.87-.83 1.83-1.01 2.82l-.06.353c-.09.542-.56 1.003-1.11 1.226l-.05.022c-.556.23-1.156-.23-1.712 0l-.05-.022c-.55-.223-1.02-.684-1.11-1.226l-.06-.353c-.184-.992-.52-1.95-1.01-2.82l-.05-.09c-.48-.85-.99-1.64-1.56-2.34l-.05-.06a4.5 4.5 0 0 1-1.18-2.26l-.02-.09c-.22-.8-.22-1.64 0-2.44l.02-.09c.22-.81.62-1.57 1.18-2.26l.05-.06c.56-.7 1.08-1.49 1.56-2.34l.05-.09c.49-.87.83-1.83 1.01-2.82l.06-.353ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"})}),Ig=({className:s})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:[R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),fx=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})}),dx=({className:s})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),mx=({isLoggedIn:s,onLogin:t,onLogout:n,selectedFilter:r,onSelectFilter:l,onNavigate:c,channels:f})=>{const g=p=>{const y="px-3 py-1.5 text-sm font-semibold rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900 focus:ring-indigo-500 whitespace-nowrap";return r.type===p.type&&(!("value"in r&&"value"in p)||r.value===p.value)?`${y} bg-indigo-600 text-white shadow-md`:`${y} bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700`};return R.jsx("header",{className:"sticky top-0 z-30 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-700/50",children:R.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[R.jsxs("div",{className:"flex items-center justify-between h-16",children:[R.jsxs("button",{onClick:()=>{l({type:"all"}),c("feed")},className:"flex items-center space-x-2",children:[R.jsx(Dh,{className:"w-7 h-7 text-indigo-500"}),R.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Curiow"})]}),R.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:()=>c("saved"),title:"Liste Salvate",className:"p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:R.jsx(bm,{className:"w-6 h-6"})}),R.jsx("button",{onClick:()=>c("profile"),title:"Profilo e Impostazioni",className:"p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:R.jsx(e1,{className:"w-6 h-6"})})]}),s?R.jsxs("button",{onClick:n,className:"flex items-center space-x-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[R.jsx(Sm,{className:"w-6 h-6"}),R.jsx("span",{className:"hidden sm:inline",children:"Logout"})]}):R.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[R.jsx(Sm,{className:"w-6 h-6"}),R.jsx("span",{className:"hidden sm:inline",children:"Login"})]})]})]}),R.jsx("div",{className:"pb-4 overflow-x-auto",children:R.jsxs("nav",{className:"flex items-center space-x-2 sm:space-x-3",children:[R.jsx("button",{onClick:()=>l({type:"all"}),className:g({type:"all"}),children:"Tutti"}),s&&R.jsx("button",{onClick:()=>l({type:"favorites"}),className:g({type:"favorites"}),children:"Preferiti"}),r.type==="tag"&&R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"border-l border-slate-300 dark:border-slate-600 h-6 mx-2"}),R.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Tag"}),R.jsxs("button",{onClick:()=>{},className:g(r),children:[R.jsx(Ig,{className:"w-3 h-3 inline-block mr-1.5"}),r.value]})]}),R.jsx("div",{className:"border-l border-slate-300 dark:border-slate-600 h-6 mx-2"}),R.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Canali"}),f.map(p=>R.jsxs("button",{onClick:()=>l({type:"channel",value:p.id}),className:g({type:"channel",value:p.id}),children:[p.emoji," ",p.name]},p.id)),R.jsx("div",{className:"border-l border-slate-300 dark:border-slate-600 h-6 mx-2"}),R.jsx("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Argomenti"}),cx.map(p=>R.jsx("button",{onClick:()=>l({type:"topic",value:p}),className:g({type:"topic",value:p}),children:p.split(" ")[0]},p))]})})]})})},n1=({gem:s,isLoggedIn:t,isFavorite:n,onSaveRequest:r,onSelect:l,onLoginRequest:c})=>{const f=()=>{t?l(s.id):c()},g=y=>{y.stopPropagation(),t?r(s.id):c()},p=y=>{y.stopPropagation(),t?(navigator.clipboard.writeText(`Scopri questa gemma di conoscenza: "${s.title}" su Curiow!`),alert("Contenuto copiato negli appunti!")):c()};return R.jsxs("div",{onClick:f,className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg overflow-hidden snap-center group transition-transform duration-200 ease-in-out hover:scale-105 cursor-pointer",role:"button",tabIndex:0,"aria-label":`Vedi dettagli per: ${s.title}`,onKeyDown:y=>(y.key==="Enter"||y.key===" ")&&f(),children:[R.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover aspect-[3/4]"}),R.jsxs("div",{className:"p-5",children:[R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-semibold uppercase tracking-wider",children:s.topic}),R.jsx("h3",{className:"mt-1 text-lg font-bold text-slate-900 dark:text-white leading-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:s.title})]}),R.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[R.jsx("button",{onClick:g,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-red-100 dark:hover:bg-slate-700 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:n?"Modifica salvataggio":"Salva come preferito","aria-label":n?"Modifica salvataggio":"Salva come preferito",children:R.jsx(bg,{className:`w-6 h-6 ${n?"fill-red-500 text-red-500":""}`})}),R.jsx("button",{onClick:p,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-indigo-100 dark:hover:bg-slate-700 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors",title:"Condividi","aria-label":"Condividi gemma",children:R.jsx(t1,{className:"w-6 h-6"})})]})]}),s.tags&&s.tags.length>0&&R.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 items-center",children:[R.jsx(Ig,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),s.tags.map(y=>R.jsx("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-medium",children:y},y))]})]})]})},gx=({userQuestion:s})=>R.jsxs("div",{className:"mt-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[R.jsxs("p",{className:"font-semibold text-sm text-slate-600 dark:text-slate-300",children:["Domanda: ",R.jsx("span",{className:"font-normal",children:s.question})]}),R.jsx("div",{className:"mt-2 text-sm text-slate-800 dark:text-slate-200",children:s.isGenerating?R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(Dh,{className:"w-4 h-4 animate-pulse text-indigo-400"}),R.jsx("span",{children:"Generazione risposta..."})]}):R.jsx("p",{className:"whitespace-pre-wrap",children:s.answer})})]}),px=({gem:s,isFavorite:t,onBack:n,onSaveRequest:r,onAddUserQuestion:l,onTagSelect:c})=>{const[f,g]=Bt.useState(""),[p,y]=Bt.useState(!1),T=S=>{S.preventDefault(),f.trim()&&(l(s.id,f.trim()),g(""))},b=()=>{navigator.clipboard.writeText(`Scopri questa gemma di conoscenza: "${s.title}" su Curiow!`),alert("Contenuto copiato negli appunti!")};return R.jsxs("div",{className:"max-w-2xl mx-auto",children:[R.jsxs("header",{className:"sticky top-0 z-10 flex items-center p-2 sm:p-4 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-700/50",children:[R.jsx("button",{onClick:n,className:"p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors","aria-label":"Torna indietro",children:R.jsx(Rg,{className:"w-6 h-6"})}),R.jsx("span",{className:"ml-4 font-semibold text-slate-800 dark:text-slate-200",children:s.topic})]}),R.jsxs("article",{children:[R.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover md:rounded-b-lg"}),R.jsxs("div",{className:"p-5 sm:p-8",children:[R.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white leading-tight",children:s.title}),R.jsxs("div",{className:"mt-4 flex flex-wrap gap-x-4 gap-y-2 items-center",children:[R.jsxs("button",{onClick:()=>r(s.id),className:"flex items-center space-x-1.5 text-slate-600 dark:text-slate-300 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:[R.jsx(bg,{className:`w-6 h-6 ${t?"fill-red-500 text-red-500":""}`}),R.jsx("span",{className:"text-sm font-medium",children:t?"Salvato":"Salva"})]}),R.jsxs("button",{onClick:b,className:"flex items-center space-x-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors",children:[R.jsx(t1,{className:"w-6 h-6"}),R.jsx("span",{className:"text-sm font-medium",children:"Condividi"})]})]}),s.tags&&s.tags.length>0&&R.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[R.jsx(Ig,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),s.tags.map(S=>R.jsx("button",{onClick:()=>c(S),className:"px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:S},S))]}),R.jsx("p",{className:"mt-6 text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:s.description}),R.jsxs("section",{className:"mt-8 border-t border-slate-200 dark:border-slate-700 pt-6",children:[R.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center",children:[R.jsx(wg,{className:"w-6 h-6 mr-2 text-indigo-500"}),"Approfondisci"]}),s.suggestedQuestions&&s.suggestedQuestions.length>0&&R.jsxs("div",{className:"mt-4 p-4 bg-indigo-50 dark:bg-slate-800/50 rounded-lg",children:[R.jsx("h3",{className:"text-sm font-semibold text-indigo-800 dark:text-indigo-200",children:"Spunti di riflessione:"}),R.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.suggestedQuestions.map((S,z)=>R.jsxs("button",{onClick:()=>g(S),className:"px-2.5 py-1 bg-white dark:bg-slate-700 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-medium border border-indigo-200 dark:border-slate-600 hover:bg-indigo-100 dark:hover:bg-slate-600 transition-colors",children:['" ',S,' "']},z))})]}),R.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-4",children:"Fai una domanda per scoprire di più."}),R.jsxs("form",{onSubmit:T,className:"mt-2 flex items-center space-x-2",children:[R.jsx("input",{type:"text",value:f,onChange:S=>g(S.target.value),placeholder:"Fai una domanda su questo argomento...",className:"flex-grow bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-full py-2 px-4 text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),R.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed",disabled:!f.trim(),children:R.jsx(hx,{className:"w-5 h-5"})})]}),s.userQuestions.length>0&&R.jsxs("div",{className:"mt-6",children:[R.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Approfondimenti precedenti:"}),s.userQuestions.map(S=>R.jsx(gx,{userQuestion:S},S.id))]})]}),s.sources&&s.sources.length>0&&R.jsxs("section",{className:"mt-8 border-t border-slate-200 dark:border-slate-700 pt-6",children:[R.jsxs("button",{onClick:()=>y(!p),className:"w-full flex justify-between items-center text-left","aria-expanded":p,children:[R.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center",children:[R.jsx(fx,{className:"w-5 h-5 mr-2 text-slate-500"}),"Fonti"]}),R.jsx(dx,{className:`w-5 h-5 text-slate-500 transition-transform ${p?"rotate-180":""}`})]}),p&&R.jsx("ul",{className:"mt-3 space-y-2",children:s.sources.map((S,z)=>R.jsx("li",{children:R.jsxs("a",{href:S.uri,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline break-all",children:[z+1,". ",S.title||S.uri]})},z))})]})]})]})]})},yx=({onLoginAttempt:s,onSignUpAttempt:t,onCancel:n})=>{const[r,l]=Bt.useState(!0),[c,f]=Bt.useState(""),[g,p]=Bt.useState(""),[y,T]=Bt.useState(""),[b,S]=Bt.useState(""),[z,X]=Bt.useState(""),[tt,W]=Bt.useState(!1),at=async it=>{it.preventDefault(),X(""),W(!0);try{if(r)await s(c,g);else{if(!y||!b){X("Nome e cognome sono obbligatori."),W(!1);return}await t(c,g,y,b)}}catch(dt){X(dt.message||"Si è verificato un errore.")}finally{W(!1)}};return R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:n,children:R.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full mx-4 transform transition-all",onClick:it=>it.stopPropagation(),children:[R.jsx(Dh,{className:"w-12 h-12 text-indigo-500 mx-auto mb-4"}),R.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r?"Bentornato!":"Crea il tuo account"}),R.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:r?"Accedi per continuare la tua avventura.":"Unisciti a Curiow per salvare le tue scoperte."}),R.jsxs("form",{onSubmit:at,className:"mt-6 text-left space-y-4",children:[!r&&R.jsxs("div",{className:"flex gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nome"}),R.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:y,onChange:it=>T(it.target.value),className:"mt-1 block w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Cognome"}),R.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:b,onChange:it=>S(it.target.value),className:"mt-1 block w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email"}),R.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c,onChange:it=>f(it.target.value),className:"mt-1 block w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),R.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:g,onChange:it=>p(it.target.value),className:"mt-1 block w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]}),z&&R.jsx("p",{className:"text-sm text-red-500 text-center",children:z}),R.jsxs("div",{className:"pt-2 flex flex-col gap-3",children:[R.jsx("button",{type:"submit",disabled:tt,className:"w-full px-4 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-all",children:tt?"Caricamento...":r?"Accedi":"Registrati"}),R.jsx("button",{type:"button",onClick:()=>{l(!r),X("")},className:"w-full text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline",children:r?"Non hai un account? Registrati":"Hai già un account? Accedi"})]})]})]})})},_x=({allGems:s,allFavoriteIds:t,savedLists:n,onUpdateLists:r,onSelectGem:l,onToggleFavorite:c,onLoginRequest:f,onBack:g})=>{const[p,y]=Bt.useState(""),T=n.filter(at=>at.id!=="default"),[b,S]=Bt.useState("all"),z=at=>{if(at.preventDefault(),p.trim()){const it={id:self.crypto.randomUUID(),name:p.trim(),gemIds:[]};r([it,...n]),y("")}},X=()=>{if(b==="all")return s.filter(it=>t.includes(it.id));const at=n.find(it=>it.id===b);return at?s.filter(it=>at.gemIds.includes(it.id)):[]},tt=at=>{const it="px-4 py-2 text-sm font-semibold rounded-lg transition-colors duration-200 text-left";return b===at?`${it} bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300`:`${it} text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800`},W=X();return R.jsxs("div",{className:"max-w-5xl mx-auto",children:[R.jsxs("header",{className:"sticky top-0 z-10 flex items-center p-2 sm:p-4 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-700/50",children:[R.jsx("button",{onClick:g,className:"p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors","aria-label":"Torna indietro",children:R.jsx(Rg,{className:"w-6 h-6"})}),R.jsx("h1",{className:"ml-4 text-xl font-bold text-slate-900 dark:text-white",children:"Le tue Liste"})]}),R.jsxs("div",{className:"flex flex-col md:flex-row",children:[R.jsxs("aside",{className:"w-full md:w-64 lg:w-72 p-4 border-b md:border-b-0 md:border-r border-slate-200 dark:border-slate-700",children:[R.jsx("h2",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Liste"}),R.jsxs("nav",{className:"mt-4 flex flex-col space-y-1",children:[R.jsxs("button",{onClick:()=>S("all"),className:tt("all"),children:["Tutti i Preferiti (",t.length,")"]}),T.map(at=>R.jsxs("button",{onClick:()=>S(at.id),className:tt(at.id),children:[at.name," (",at.gemIds.length,")"]},at.id))]}),R.jsxs("form",{onSubmit:z,className:"mt-6",children:[R.jsx("h2",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nuova Lista"}),R.jsxs("div",{className:"mt-2 flex space-x-2",children:[R.jsx("input",{type:"text",value:p,onChange:at=>y(at.target.value),placeholder:"Nome della lista...",className:"flex-grow bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md py-1.5 px-3 text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),R.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",disabled:!p.trim(),children:R.jsx(wg,{className:"w-5 h-5"})})]})]})]}),R.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:W.length>0?R.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-xl mx-auto",children:W.map(at=>R.jsx(n1,{gem:at,isLoggedIn:!0,isFavorite:t.includes(at.id),onSaveRequest:c,onSelect:l,onLoginRequest:f},at.id))}):R.jsxs("div",{className:"text-center pt-20 text-slate-500 dark:text-slate-400",children:[R.jsx("h3",{className:"text-xl font-semibold",children:"Nessuna gemma in questa lista"}),R.jsx("p",{className:"mt-2 max-w-md mx-auto",children:b==="all"?"Salva le tue gemme preferite cliccando sul cuore. Le troverai tutte qui.":"Aggiungi gemme a questa lista dalla loro pagina di dettaglio o dal popup di salvataggio."})]})})]})]})},vx=({user:s,onUpdateUser:t,onBack:n})=>{const[r,l]=Bt.useState(s),[c,f]=Bt.useState(!1);Bt.useEffect(()=>{l(s)},[s]),Bt.useEffect(()=>{f(r.firstName!==s.firstName||r.lastName!==s.lastName)},[r,s]);const g=y=>{const{name:T,value:b}=y.target;l(S=>({...S,[T]:b}))},p=y=>{y.preventDefault(),t(r),f(!1)};return R.jsxs("div",{className:"max-w-2xl mx-auto",children:[R.jsxs("header",{className:"sticky top-0 z-10 flex items-center p-2 sm:p-4 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-700/50",children:[R.jsx("button",{onClick:n,className:"p-2 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors","aria-label":"Torna indietro",children:R.jsx(Rg,{className:"w-6 h-6"})}),R.jsx("h1",{className:"ml-4 text-xl font-bold text-slate-900 dark:text-white",children:"Profilo e Impostazioni"})]}),R.jsx("main",{className:"p-5 sm:p-8",children:R.jsxs("form",{onSubmit:p,children:[R.jsxs("div",{className:"flex flex-col items-center",children:[R.jsx(Sm,{className:"w-24 h-24 text-slate-400 dark:text-slate-500"}),R.jsxs("h2",{className:"mt-4 text-2xl font-bold text-slate-900 dark:text-white",children:[s.firstName," ",s.lastName]}),R.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:s.email})]}),R.jsxs("section",{className:"mt-10 border-t border-slate-200 dark:border-slate-700 pt-6",children:[R.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center",children:[R.jsx(e1,{className:"w-6 h-6 mr-2 text-slate-500"}),"I tuoi dati"]}),R.jsxs("div",{className:"mt-4 space-y-4",children:[R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nome"}),R.jsx("input",{type:"text",name:"firstName",id:"firstName",value:r.firstName,onChange:g,className:"mt-1 block w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Cognome"}),R.jsx("input",{type:"text",name:"lastName",id:"lastName",value:r.lastName,onChange:g,className:"mt-1 block w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-slate-900 dark:text-white"})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email (Credenziale)"}),R.jsx("input",{type:"email",name:"email",id:"email",value:r.email,disabled:!0,className:"mt-1 block w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm py-2 px-3 sm:text-sm text-slate-500 dark:text-slate-400 cursor-not-allowed"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Password"}),R.jsx("button",{type:"button",className:"mt-1 w-full sm:w-auto px-4 py-2 border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cambia Password"})]})]})]}),R.jsx("div",{className:"mt-8 pt-5 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:R.jsx("button",{type:"submit",disabled:!c,className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors",children:"Salva Modifiche"})})]})})]})},Ex=({isOpen:s,onClose:t,lists:n,gemId:r,onSaveToList:l,onCreateAndSave:c,onToggleDefaultFavorite:f,isSavedToDefault:g})=>{const[p,y]=Bt.useState("");if(!s)return null;const T=z=>{z.preventDefault(),p.trim()&&(c(p.trim()),y(""),t())},b=z=>{l(z),t()},S=()=>{f(r),t()};return R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:t,children:R.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full mx-4 text-center transform transition-all",onClick:z=>z.stopPropagation(),children:[R.jsx(bm,{className:"w-10 h-10 text-indigo-500 mx-auto mb-3"}),R.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Salva in una lista"}),R.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Organizza le tue gemme per ritrovarle facilmente."}),R.jsxs("div",{className:"mt-4 text-left space-y-2 max-h-40 overflow-y-auto pr-2",children:[R.jsxs("button",{onClick:S,className:"w-full flex items-center px-3 py-2 text-sm font-semibold rounded-lg text-left transition-colors text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:[R.jsx(bg,{className:`w-5 h-5 mr-3 flex-shrink-0 ${g?"fill-red-500 text-red-500":"text-slate-400"}`}),"Preferiti"]}),n.map(z=>R.jsxs("button",{onClick:()=>b(z.id),className:"w-full flex items-center px-3 py-2 text-sm font-semibold rounded-lg text-left transition-colors text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700",children:[R.jsx(bm,{className:`w-5 h-5 mr-3 flex-shrink-0 ${z.gemIds.includes(r)?"text-indigo-500":"text-slate-400"}`}),R.jsx("span",{className:"flex-grow",children:z.name}),R.jsx("span",{className:"text-xs text-slate-400",children:z.gemIds.length})]},z.id))]}),R.jsx("form",{onSubmit:T,className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{type:"text",value:p,onChange:z=>y(z.target.value),placeholder:"Crea una nuova lista...",className:"flex-grow bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md py-1.5 px-3 text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),R.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",disabled:!p.trim(),children:R.jsx(wg,{className:"w-5 h-5"})})]})}),R.jsx("div",{className:"mt-4",children:R.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-all",children:"Chiudi"})})]})})},Tx=()=>{var Kt;const[s,t]=Bt.useState([]),[n,r]=Bt.useState([]),[l,c]=Bt.useState(!0),[f,g]=Bt.useState(null),[p,y]=Bt.useState(null),[T,b]=Bt.useState([]),[S,z]=Bt.useState({type:"all"}),[X,tt]=Bt.useState(!1),[W,at]=Bt.useState("feed"),[it,dt]=Bt.useState(null),[Mt,Tt]=Bt.useState(!1),[Rt,M]=Bt.useState(null);Bt.useEffect(()=>{(async()=>{c(!0);const[qt,zt]=await Promise.all([nx(),ex()]);t(qt),r(zt),c(!1)})()},[]),Bt.useEffect(()=>{const ut=Rw(Nc,async qt=>{if(g(qt),qt){const zt=await ix(qt.uid),le=await sx(qt.uid);y(zt),b(le),tt(!1)}else y(null),b([]),z({type:"all"}),at("feed")});return()=>ut()},[]),Bt.useEffect(()=>{if(!it)return;const ut=ux(it,qt=>{t(zt=>zt.map(le=>le.id===it?{...le,userQuestions:qt}:le))});return()=>ut()},[it]);const w=async(ut,qt,zt,le)=>{const Un=await Aw(Nc,ut,qt);await rx(Un.user.uid,ut,zt,le)},x=async(ut,qt)=>{await Sw(Nc,ut,qt)},O=()=>{Iw(Nc)},V=ut=>{window.scrollTo(0,0),at(ut)},P=()=>{f||tt(!0)},C=Bt.useMemo(()=>Array.from(new Set(T.flatMap(ut=>ut.gemIds))),[T]),ve=ut=>{M(ut),Tt(!0)},ee=async ut=>{f&&(b(ut),await ox(f.uid,ut))},G=ut=>{if(!Rt)return;const qt=T.map(zt=>zt.id===ut&&!zt.gemIds.includes(Rt)?{...zt,gemIds:[...zt.gemIds,Rt]}:zt);ee(qt)},nt=ut=>{if(!Rt)return;const qt={id:self.crypto.randomUUID(),name:ut,gemIds:[Rt]};ee([...T,qt])},ct=ut=>{const qt=C.includes(ut);let zt;qt?zt=T.map(le=>({...le,gemIds:le.gemIds.filter(Un=>Un!==ut)})):zt=T.map(le=>le.id==="default"?{...le,gemIds:[...le.gemIds,ut]}:le),ee(zt)},jt=async(ut,qt)=>{await lx(ut,qt)},N=ut=>{dt(ut),V("detail")},Z=()=>{dt(null),V("feed")},st=ut=>{z({type:"tag",value:ut}),Z()},J=async ut=>{f&&(y(ut),await ax(f.uid,{firstName:ut.firstName,lastName:ut.lastName}),alert("Profilo aggiornato!"))},ft=s.filter(ut=>{if(!ut.tags)return!1;switch(S.type){case"all":return!0;case"favorites":return f?C.includes(ut.id):!1;case"topic":return ut.topic===S.value;case"channel":const qt=n.find(zt=>zt.id===S.value);return qt?ut.tags.some(zt=>qt.filterTags.includes(zt.toLowerCase())):!1;case"tag":return ut.tags.map(zt=>zt.toLowerCase()).includes(S.value.toLowerCase());default:return!0}}),bt=s.find(ut=>ut.id===it),gt=()=>R.jsxs(R.Fragment,{children:[R.jsx(mx,{isLoggedIn:!!f,onLogin:()=>tt(!0),onLogout:O,selectedFilter:S,onSelectFilter:z,onNavigate:V,channels:n}),R.jsx("main",{className:"max-w-xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:l&&s.length===0?R.jsxs("div",{className:"flex flex-col items-center justify-center text-center text-slate-500 dark:text-slate-400 pt-20",children:[R.jsx(Dh,{className:"w-16 h-16 animate-pulse text-indigo-400"}),R.jsx("p",{className:"mt-4 text-lg font-semibold",children:"Stiamo preparando Curiow per te..."}),R.jsx("p",{className:"mt-1 text-sm",children:"Un momento, stiamo cercando spunti interessanti."})]}):R.jsx("div",{className:"space-y-8",children:ft.length>0?ft.map(ut=>R.jsx(n1,{gem:ut,isLoggedIn:!!f,isFavorite:C.includes(ut.id),onSaveRequest:ve,onSelect:N,onLoginRequest:P},ut.id)):R.jsxs("div",{className:"text-center pt-20 text-slate-500 dark:text-slate-400",children:[R.jsx("h3",{className:"text-xl font-semibold",children:"Nessuna gemma trovata"}),R.jsx("p",{className:"mt-2",children:"Prova a selezionare un'altra categoria o filtro."})]})})})]}),Ee=()=>{switch(W){case"detail":return bt?R.jsx(px,{gem:bt,isFavorite:C.includes(bt.id),onBack:Z,onSaveRequest:ve,onAddUserQuestion:jt,onTagSelect:st}):gt();case"saved":return f?R.jsx(_x,{allGems:s,allFavoriteIds:C,savedLists:T,onUpdateLists:ee,onSelectGem:N,onToggleFavorite:ct,onLoginRequest:P,onBack:()=>V("feed")}):gt();case"profile":return f&&p?R.jsx(vx,{user:p,onUpdateUser:J,onBack:()=>V("feed")}):gt();case"feed":default:return gt()}};return R.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[Ee(),X&&R.jsx(yx,{onLoginAttempt:x,onSignUpAttempt:w,onCancel:()=>tt(!1)}),Mt&&Rt&&R.jsx(Ex,{isOpen:Mt,onClose:()=>Tt(!1),lists:T.filter(ut=>ut.id!=="default"),gemId:Rt,onSaveToList:G,onCreateAndSave:nt,onToggleDefaultFavorite:ct,isSavedToDefault:((Kt=T.find(ut=>ut.id==="default"))==null?void 0:Kt.gemIds.includes(Rt))??!1})]})},i1=document.getElementById("root");if(!i1)throw new Error("Could not find root element to mount to");const Ax=jA.createRoot(i1);Ax.render(R.jsx(DA.StrictMode,{children:R.jsx(Tx,{})}));
